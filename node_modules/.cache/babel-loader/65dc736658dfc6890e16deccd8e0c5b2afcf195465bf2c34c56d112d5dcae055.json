{"ast":null,"code":"var _jsxFileName = \"/Users/diegogg98/NEW CRM MAR18/src/components/ui/KanbanBoard.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Link } from 'react-router-dom';\nimport { APPLICATION_STATUS, STATUS_LABELS } from '../../utils/constants/statuses';\nimport { usePermissions } from '../../contexts/PermissionsContext';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { formatCurrency } from '../../utils/formatters';\nimport { APPLICATION_TYPE_LABELS } from '../../utils/constants/applications';\n\n// NOTA: La funcionalidad de tiempo real ha sido desactivada \n// debido a problemas de compatibilidad\n// Las actualizaciones se reflejarán al recargar la página o cuando el componente\n// padre envíe nuevas aplicaciones como prop\n\n// Añadir nueva interfaz para el payload\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst KanbanBoard = ({\n  applications,\n  onStatusChange,\n  statusField = 'status',\n  applicationTypeFilter\n}) => {\n  _s();\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [warnMessage, setWarnMessage] = useState(null);\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [processingAppId, setProcessingAppId] = useState(null);\n  const [appsWithApproval, setAppsWithApproval] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const dragItemRef = useRef(null);\n  const pendingRefreshRef = useRef(false);\n  const [expandedColumns, setExpandedColumns] = useState({});\n\n  // Añadir contexto de permisos para verificar el rol del usuario\n  const {\n    isAdvisor,\n    isCompanyAdmin\n  } = usePermissions();\n  const {\n    user\n  } = useAuth();\n\n  // Set up applications when component mounts\n  useEffect(() => {\n    const fetchApplicationsWithApproval = async () => {\n      setIsLoading(true);\n      try {\n        // Debug: Log all unique application types \n        const appTypes = new Set(applications.map(app => app.application_type));\n        console.log('Available application types:', Array.from(appTypes));\n        console.log('Current filter type:', applicationTypeFilter);\n        console.log('Number of applications before filtering:', applications.length);\n\n        // Debug: Log financing_type values\n        console.log('Financing types:', applications.map(app => ({\n          id: app.id,\n          type: app.application_type,\n          financing: app.financing_type\n        })));\n\n        // Primero, asegurarse de que solo trabajamos con aplicaciones de tipo 'selected_plans'\n        const selectedPlansOnly = applications.filter(app => app.application_type === 'selected_plans');\n        console.log(`Filtered to ${selectedPlansOnly.length} 'selected_plans' applications`);\n\n        // Map applications to a simpler format and initialize status properties\n        let mappedApps = selectedPlansOnly.map(app => {\n          // Determine which status field to use\n          const statusToUse = app[statusField] || app.status;\n\n          // Debug: Log financing_type for this specific app\n          console.log(`App ${app.id} financing_type:`, app.financing_type);\n          return {\n            id: app.id,\n            status: statusToUse,\n            // Use the status field specified in props\n            advisor_status: app.advisor_status || app.status,\n            company_status: app.company_status || app.status,\n            global_status: app.global_status || app.status,\n            client_name: app.client_name || 'Cliente sin nombre',\n            company_name: app.company_name,\n            amount: app.amount || app.requested_amount || 0,\n            application_type: app.application_type,\n            financing_type: app.financing_type || null,\n            // Asegurarse de incluir financing_type\n            approvalStatus: {\n              approvedByAdvisor: app.approved_by_advisor,\n              approvedByCompany: app.approved_by_company,\n              isFullyApproved: app.approved_by_advisor && app.approved_by_company,\n              rejectedByAdvisor: app.rejected_by_advisor,\n              rejectedByCompany: app.rejected_by_company\n            }\n          };\n        });\n\n        // Filter by application type if specified\n        if (applicationTypeFilter && applicationTypeFilter !== 'all') {\n          console.log(`Filtering initial applications by type: ${applicationTypeFilter}`);\n          const beforeCount = mappedApps.length;\n          mappedApps = mappedApps.filter(app => app.application_type === applicationTypeFilter);\n          console.log(`Filtered from ${beforeCount} to ${mappedApps.length} applications with type ${applicationTypeFilter}`);\n        }\n\n        // Set the applications in state\n        setAppsWithApproval(mappedApps);\n      } catch (error) {\n        console.error('Error setting up applications:', error);\n        setErrorMessage('Error al cargar las aplicaciones');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    // Call the function\n    fetchApplicationsWithApproval();\n  }, [applications, statusField, applicationTypeFilter]);\n\n  // Group applications by status\n  const getApplicationsByStatus = status => {\n    // First filter by status\n    let filteredApps = appsWithApproval.filter(app => app.status === status);\n\n    // SIEMPRE filtrar por 'selected_plans' independientemente del filtro recibido\n    const selectedPlansFilter = 'selected_plans';\n    filteredApps = filteredApps.filter(app => app.application_type === selectedPlansFilter);\n    return filteredApps;\n  };\n\n  // Get visible applications (limited to 5 by default)\n  const getVisibleApplications = status => {\n    const apps = getApplicationsByStatus(status);\n    if (expandedColumns[status]) {\n      return apps; // Show all if expanded\n    }\n    return apps.slice(0, 5); // Show only first 5\n  };\n\n  // Toggle expanded state for a column\n  const toggleColumnExpand = status => {\n    setExpandedColumns(prev => ({\n      ...prev,\n      [status]: !prev[status]\n    }));\n  };\n  const handleDragStart = (e, application) => {\n    // Store the drag start element for later reference\n    dragItemRef.current = e.currentTarget;\n\n    // Add moving class to the dragged item\n    e.currentTarget.classList.add('card-moving');\n\n    // Set the data for the drag operation\n    e.dataTransfer.setData('application/id', application.id);\n    e.dataTransfer.effectAllowed = 'move';\n\n    // Create a custom drag image for better UX\n    try {\n      const ghostElement = e.currentTarget.cloneNode(true);\n      ghostElement.style.position = 'absolute';\n      ghostElement.style.top = '-1000px';\n      ghostElement.style.opacity = '0.8';\n      ghostElement.style.transform = 'scale(0.8)';\n      ghostElement.style.width = `${e.currentTarget.offsetWidth}px`;\n      document.body.appendChild(ghostElement);\n      e.dataTransfer.setDragImage(ghostElement, 20, 20);\n\n      // Clean up the ghost element after a short delay\n      setTimeout(() => {\n        if (ghostElement.parentNode) {\n          document.body.removeChild(ghostElement);\n        }\n      }, 100);\n    } catch (error) {\n      console.warn('Failed to create custom drag image:', error);\n      // Fall back to default drag image\n    }\n  };\n  const handleDragEnd = e => {\n    // Remove dragging-related classes from the dragged item\n    if (dragItemRef.current) {\n      dragItemRef.current.classList.remove('card-moving');\n    }\n\n    // Get and remove any columns with drag-over class\n    const columns = document.querySelectorAll('.column-content');\n    columns.forEach(column => column.classList.remove('drag-over'));\n\n    // Clear the reference\n    dragItemRef.current = null;\n  };\n  const handleDragOver = e => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n\n    // Add a class to the drop target\n    e.currentTarget.classList.add('drag-over');\n  };\n  const handleDragLeave = e => {\n    // Remove the drag-over class\n    e.currentTarget.classList.remove('drag-over');\n  };\n  const canMoveToStatus = (applicationStatus, newStatus, application) => {\n    // Don't allow moving to the same status\n    if (applicationStatus === newStatus) return false;\n\n    // Status transition rules based on the specific view (advisor, company, or global)\n    if (statusField === 'advisor_status') {\n      // Advisor-specific rules\n      if (applicationStatus === APPLICATION_STATUS.NEW) {\n        // From NEW, advisors can move to IN_REVIEW, APPROVED or REJECTED\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || newStatus === APPLICATION_STATUS.APPROVED || newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.IN_REVIEW) {\n        // From IN_REVIEW, advisors can go back to NEW, approve or reject\n        return newStatus === APPLICATION_STATUS.NEW || newStatus === APPLICATION_STATUS.APPROVED || newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.APPROVED) {\n        // Once approved, advisors can go back to IN_REVIEW or reject\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.POR_DISPERSAR) {\n        // Permitir a asesores retroceder de POR_DISPERSAR a EN_REVISIÓN para corregir errores\n        // o marcar como COMPLETED para indicar que se ha completado la dispersión\n        // o REJECTED para rechazar\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || newStatus === APPLICATION_STATUS.COMPLETED || newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.REJECTED) {\n        // Permitir mover desde REJECTED a NEW o IN_REVIEW para reactivar\n        return newStatus === APPLICATION_STATUS.NEW || newStatus === APPLICATION_STATUS.IN_REVIEW || newStatus === APPLICATION_STATUS.APPROVED;\n      }\n    } else if (statusField === 'company_status') {\n      // Company-specific rules\n      if (applicationStatus === APPLICATION_STATUS.NEW) {\n        // From NEW, company can move to IN_REVIEW, APPROVED or REJECTED\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || newStatus === APPLICATION_STATUS.APPROVED || newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.IN_REVIEW) {\n        // From IN_REVIEW, company can go back to NEW, approve or reject\n        return newStatus === APPLICATION_STATUS.NEW || newStatus === APPLICATION_STATUS.APPROVED || newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.APPROVED) {\n        // Once approved, company can go back to IN_REVIEW or reject\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.REJECTED) {\n        // Permitir mover desde REJECTED a NEW o IN_REVIEW para reactivar\n        return newStatus === APPLICATION_STATUS.NEW || newStatus === APPLICATION_STATUS.IN_REVIEW || newStatus === APPLICATION_STATUS.APPROVED;\n      }\n    } else if (statusField === 'global_status') {\n      // Global view rules - this is for admins or the \"por dispersar\" stage and beyond\n      if (applicationStatus === APPLICATION_STATUS.NEW) {\n        // Can move from NEW to IN_REVIEW, APPROVED or REJECTED\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || newStatus === APPLICATION_STATUS.APPROVED || newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.IN_REVIEW) {\n        // From IN_REVIEW, can move to NEW, APPROVED or REJECTED\n        if (newStatus === APPLICATION_STATUS.NEW) return true;\n        if (newStatus === APPLICATION_STATUS.APPROVED) {\n          var _application$approval, _application$approval2;\n          // For global view, we still require both approvals when moving from IN_REVIEW to APPROVED\n          return ((_application$approval = application.approvalStatus) === null || _application$approval === void 0 ? void 0 : _application$approval.approvedByAdvisor) === true && ((_application$approval2 = application.approvalStatus) === null || _application$approval2 === void 0 ? void 0 : _application$approval2.approvedByCompany) === true;\n        }\n        if (newStatus === APPLICATION_STATUS.REJECTED) return true;\n        return false;\n      } else if (applicationStatus === APPLICATION_STATUS.APPROVED) {\n        // From APPROVED, can move to IN_REVIEW, POR_DISPERSAR or REJECTED\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || newStatus === APPLICATION_STATUS.POR_DISPERSAR || newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.POR_DISPERSAR) {\n        // From POR_DISPERSAR, can move to APPROVED, COMPLETED, IN_REVIEW or REJECTED\n        return newStatus === APPLICATION_STATUS.APPROVED || newStatus === APPLICATION_STATUS.COMPLETED || newStatus === APPLICATION_STATUS.IN_REVIEW || newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.COMPLETED) {\n        // Completed applications cannot be moved\n        return false;\n      } else if (applicationStatus === APPLICATION_STATUS.REJECTED) {\n        // Permitir mover desde REJECTED a otros estados para reactivar\n        return newStatus === APPLICATION_STATUS.NEW || newStatus === APPLICATION_STATUS.IN_REVIEW || newStatus === APPLICATION_STATUS.APPROVED;\n      }\n    } else {\n      // Default rules for the standard status field\n      if (applicationStatus === APPLICATION_STATUS.NEW) {\n        // Can move from NEW to IN_REVIEW, APPROVED or REJECTED\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || newStatus === APPLICATION_STATUS.APPROVED || newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.IN_REVIEW) {\n        // From IN_REVIEW, can move to NEW or APPROVED or REJECTED\n        if (newStatus === APPLICATION_STATUS.NEW) return true;\n        if (newStatus === APPLICATION_STATUS.APPROVED) {\n          if (isAdvisor()) {\n            var _application$approval3;\n            return ((_application$approval3 = application.approvalStatus) === null || _application$approval3 === void 0 ? void 0 : _application$approval3.approvedByAdvisor) === true;\n          } else if (isCompanyAdmin()) {\n            var _application$approval4;\n            return ((_application$approval4 = application.approvalStatus) === null || _application$approval4 === void 0 ? void 0 : _application$approval4.approvedByCompany) === true;\n          } else {\n            var _application$approval5, _application$approval6;\n            return ((_application$approval5 = application.approvalStatus) === null || _application$approval5 === void 0 ? void 0 : _application$approval5.approvedByAdvisor) === true && ((_application$approval6 = application.approvalStatus) === null || _application$approval6 === void 0 ? void 0 : _application$approval6.approvedByCompany) === true;\n          }\n        }\n        if (newStatus === APPLICATION_STATUS.REJECTED) return true;\n        return false;\n      } else if (applicationStatus === APPLICATION_STATUS.APPROVED) {\n        // From APPROVED, can move to IN_REVIEW, POR_DISPERSAR or REJECTED\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || newStatus === APPLICATION_STATUS.POR_DISPERSAR || newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.POR_DISPERSAR) {\n        // From POR_DISPERSAR, can move to APPROVED, COMPLETED, IN_REVIEW or REJECTED\n        if (isAdvisor() && newStatus === APPLICATION_STATUS.IN_REVIEW) return true;\n        if (isAdvisor() && newStatus === APPLICATION_STATUS.REJECTED) return true;\n        return newStatus === APPLICATION_STATUS.APPROVED || newStatus === APPLICATION_STATUS.COMPLETED;\n      } else if (applicationStatus === APPLICATION_STATUS.COMPLETED) {\n        // Completed applications cannot be moved\n        return false;\n      } else if (applicationStatus === APPLICATION_STATUS.REJECTED) {\n        // Permitir mover desde REJECTED a otros estados para reactivar\n        return newStatus === APPLICATION_STATUS.NEW || newStatus === APPLICATION_STATUS.IN_REVIEW || newStatus === APPLICATION_STATUS.APPROVED;\n      }\n    }\n\n    // Default: allow movement between states that don't have specific rules\n    return true;\n  };\n  const handleDrop = async (e, newStatus) => {\n    e.preventDefault();\n\n    // Clear styling\n    e.currentTarget.classList.remove('drag-over');\n\n    // Check if something is being dragged\n    if (!dragItemRef.current) {\n      console.warn('Nothing is being dragged');\n      return;\n    }\n\n    // Extract application data from the dataTransfer\n    const applicationId = e.dataTransfer.getData('application/id');\n    const application = appsWithApproval.find(app => app.id === applicationId);\n    if (!application) {\n      console.error('Application not found:', applicationId);\n      return;\n    }\n\n    // Don't allow dropping in the same column or if processing another application\n    if (application.status === newStatus || processingAppId !== null) {\n      return;\n    }\n\n    // Check if this transition is allowed\n    if (!canMoveToStatus(application.status, newStatus, application)) {\n      if (application.status === APPLICATION_STATUS.IN_REVIEW && newStatus === APPLICATION_STATUS.APPROVED) {\n        var _application$approval7, _application$approval8;\n        // Mensaje personalizado según el rol del usuario\n        if (isAdvisor() && !((_application$approval7 = application.approvalStatus) !== null && _application$approval7 !== void 0 && _application$approval7.approvedByAdvisor)) {\n          setWarnMessage('No puedes aprobar esta solicitud. Debes aprobarla primero desde la página de detalle.');\n        } else if (isCompanyAdmin() && !((_application$approval8 = application.approvalStatus) !== null && _application$approval8 !== void 0 && _application$approval8.approvedByCompany)) {\n          setWarnMessage('No puedes aprobar esta solicitud. Debes aprobarla primero desde la página de detalle.');\n        } else {\n          var _application$approval9, _application$approval10;\n          // Para otros roles, mostrar mensaje sobre ambas aprobaciones\n          const missingApprovals = [];\n          if (!((_application$approval9 = application.approvalStatus) !== null && _application$approval9 !== void 0 && _application$approval9.approvedByAdvisor)) missingApprovals.push('del asesor');\n          if (!((_application$approval10 = application.approvalStatus) !== null && _application$approval10 !== void 0 && _application$approval10.approvedByCompany)) missingApprovals.push('de la empresa');\n          setWarnMessage(`No se puede aprobar esta solicitud. Falta aprobación ${missingApprovals.join(' y ')}.`);\n        }\n        setTimeout(() => setWarnMessage(null), 5000);\n      } else {\n        // General transition not allowed message\n        setErrorMessage(`No se permite cambiar el estado de \"${STATUS_LABELS[application.status]}\" a \"${STATUS_LABELS[newStatus]}\"`);\n        setTimeout(() => setErrorMessage(null), 5000);\n      }\n      return;\n    }\n\n    // Bail if there's no status change handler\n    if (!onStatusChange) {\n      setWarnMessage('No tienes permisos para cambiar el estado de las solicitudes');\n      setTimeout(() => setWarnMessage(null), 3000);\n      return;\n    }\n\n    // Mark that we're processing this application\n    setProcessingAppId(applicationId);\n\n    // Mark this application as moving in the UI\n    setAppsWithApproval(prev => prev.map(app => app.id === applicationId ? {\n      ...app,\n      isMoving: true\n    } : app));\n    try {\n      // IMPORTANTE: Crear un payload que solo contenga el campo de status específico\n      // para evitar que se actualicen otros campos\n      const payload = {\n        id: application.id\n        // Solo incluir el campo correspondiente al statusField actual\n      };\n\n      // Solo añadir el campo que necesitamos actualizar, no todos los campos de estado\n      if (statusField === 'advisor_status') {\n        payload.advisor_status = newStatus;\n      } else if (statusField === 'company_status') {\n        payload.company_status = newStatus;\n      } else if (statusField === 'global_status') {\n        payload.global_status = newStatus;\n      } else {\n        payload.status = newStatus;\n      }\n      console.log(`Actualizando ${statusField} a ${newStatus} para aplicación ${application.id}. Payload:`, payload);\n\n      // Call the parent component to update the status\n      await onStatusChange(payload, newStatus, statusField);\n\n      // Update local state after successful change\n      setAppsWithApproval(prev => prev.map(app => {\n        if (app.id === applicationId) {\n          var _app$approvalStatus5, _app$approvalStatus6;\n          // Create a new object with updated status\n          const updatedApp = {\n            ...app,\n            isMoving: false\n          };\n\n          // IMPORTANT: Update ONLY the specific status field and the local \"status\" property\n          // This ensures that only the current view sees the card in the new position\n          if (statusField === 'advisor_status') {\n            updatedApp.advisor_status = newStatus;\n            updatedApp.status = newStatus; // This is the view-specific status\n\n            // Si estamos moviendo directo de NEW a APPROVED, actualizar el indicador de aprobación del asesor\n            if (app.status === APPLICATION_STATUS.NEW && newStatus === APPLICATION_STATUS.APPROVED) {\n              var _app$approvalStatus;\n              updatedApp.approvalStatus = {\n                ...app.approvalStatus,\n                approvedByAdvisor: true,\n                isFullyApproved: ((_app$approvalStatus = app.approvalStatus) === null || _app$approvalStatus === void 0 ? void 0 : _app$approvalStatus.approvedByCompany) === true\n              };\n            }\n          } else if (statusField === 'company_status') {\n            updatedApp.company_status = newStatus;\n            updatedApp.status = newStatus; // This is the view-specific status\n\n            // Si estamos moviendo directo de NEW a APPROVED, actualizar el indicador de aprobación de la empresa\n            if (app.status === APPLICATION_STATUS.NEW && newStatus === APPLICATION_STATUS.APPROVED) {\n              var _app$approvalStatus2;\n              updatedApp.approvalStatus = {\n                ...app.approvalStatus,\n                approvedByCompany: true,\n                isFullyApproved: ((_app$approvalStatus2 = app.approvalStatus) === null || _app$approvalStatus2 === void 0 ? void 0 : _app$approvalStatus2.approvedByAdvisor) === true\n              };\n            }\n          } else if (statusField === 'global_status') {\n            updatedApp.global_status = newStatus;\n            updatedApp.status = newStatus; // This is the view-specific status\n\n            // Si estamos moviendo directo de NEW a APPROVED en global_status, establecer ambos como aprobados\n            if (app.status === APPLICATION_STATUS.NEW && newStatus === APPLICATION_STATUS.APPROVED) {\n              updatedApp.approvalStatus = {\n                ...app.approvalStatus,\n                approvedByAdvisor: true,\n                approvedByCompany: true,\n                isFullyApproved: true\n              };\n            }\n          } else {\n            updatedApp.status = newStatus;\n\n            // Si estamos moviendo directo de NEW a APPROVED en el status principal\n            if (app.status === APPLICATION_STATUS.NEW && newStatus === APPLICATION_STATUS.APPROVED) {\n              if (isAdvisor()) {\n                var _app$approvalStatus3;\n                updatedApp.approvalStatus = {\n                  ...app.approvalStatus,\n                  approvedByAdvisor: true,\n                  isFullyApproved: ((_app$approvalStatus3 = app.approvalStatus) === null || _app$approvalStatus3 === void 0 ? void 0 : _app$approvalStatus3.approvedByCompany) === true\n                };\n              } else if (isCompanyAdmin()) {\n                var _app$approvalStatus4;\n                updatedApp.approvalStatus = {\n                  ...app.approvalStatus,\n                  approvedByCompany: true,\n                  isFullyApproved: ((_app$approvalStatus4 = app.approvalStatus) === null || _app$approvalStatus4 === void 0 ? void 0 : _app$approvalStatus4.approvedByAdvisor) === true\n                };\n              } else {\n                // Para rol de admin, establecer ambos como aprobados\n                updatedApp.approvalStatus = {\n                  ...app.approvalStatus,\n                  approvedByAdvisor: true,\n                  approvedByCompany: true,\n                  isFullyApproved: true\n                };\n              }\n            }\n          }\n\n          // Si estamos moviendo directo de NEW a REJECTED, actualizar los indicadores de rechazo\n          if (app.status === APPLICATION_STATUS.NEW && newStatus === APPLICATION_STATUS.REJECTED) {\n            if (statusField === 'advisor_status') {\n              updatedApp.approvalStatus = {\n                ...app.approvalStatus,\n                rejectedByAdvisor: true\n              };\n            } else if (statusField === 'company_status') {\n              updatedApp.approvalStatus = {\n                ...app.approvalStatus,\n                rejectedByCompany: true\n              };\n            } else {\n              // Para rol de admin o status principal/global, establecer ambos como rechazados\n              updatedApp.approvalStatus = {\n                ...app.approvalStatus,\n                rejectedByAdvisor: true,\n                rejectedByCompany: true\n              };\n            }\n          }\n\n          // Existing code for when both parties have approved\n          if (statusField === 'advisor_status' && newStatus === APPLICATION_STATUS.APPROVED && (_app$approvalStatus5 = app.approvalStatus) !== null && _app$approvalStatus5 !== void 0 && _app$approvalStatus5.approvedByCompany || statusField === 'company_status' && newStatus === APPLICATION_STATUS.APPROVED && (_app$approvalStatus6 = app.approvalStatus) !== null && _app$approvalStatus6 !== void 0 && _app$approvalStatus6.approvedByAdvisor) {\n            updatedApp.approvalStatus = {\n              ...app.approvalStatus,\n              isFullyApproved: true\n            };\n          }\n\n          // If moving from APPROVED to another status, update approvalStatus\n          if (app.status === APPLICATION_STATUS.APPROVED && newStatus !== APPLICATION_STATUS.APPROVED) {\n            if (statusField === 'advisor_status') {\n              updatedApp.approvalStatus = {\n                ...app.approvalStatus,\n                approvedByAdvisor: false,\n                isFullyApproved: false\n              };\n            } else if (statusField === 'company_status') {\n              updatedApp.approvalStatus = {\n                ...app.approvalStatus,\n                approvedByCompany: false,\n                isFullyApproved: false\n              };\n            }\n          }\n          return updatedApp;\n        }\n        return app;\n      }));\n\n      // Show success message\n      setSuccessMessage(`Se ha movido \"${application.client_name}\" a \"${STATUS_LABELS[newStatus]}\"`);\n      setTimeout(() => setSuccessMessage(null), 3000);\n    } catch (error) {\n      console.error('Error updating status:', error);\n\n      // Reset the card to its original state\n      setAppsWithApproval(prev => prev.map(app => app.id === applicationId ? {\n        ...app,\n        isMoving: false\n      } : app));\n\n      // Show error message\n      if (error instanceof Error) {\n        setErrorMessage(`Error: ${error.message}`);\n      } else {\n        setErrorMessage('Error desconocido al actualizar el estado');\n      }\n      setTimeout(() => setErrorMessage(null), 5000);\n    } finally {\n      // Clear processing state\n      setProcessingAppId(null);\n    }\n  };\n\n  // Function to get the appropriate card color based on its approval status\n  const getCardColor = app => {\n    // Here you can implement different styling based on approval status\n    if (app.isMoving) return 'card-moving';\n\n    // Use the status that corresponds to the current view\n    const viewStatus = statusField === 'advisor_status' ? app.advisor_status : statusField === 'company_status' ? app.company_status : statusField === 'global_status' ? app.global_status : app.status;\n    switch (viewStatus) {\n      case APPLICATION_STATUS.NEW:\n        return 'bg-white border-l-yellow-400';\n      case APPLICATION_STATUS.IN_REVIEW:\n        return 'bg-white border-l-blue-400';\n      case APPLICATION_STATUS.APPROVED:\n        return 'bg-white border-l-green-400';\n      case APPLICATION_STATUS.REJECTED:\n        return 'bg-white border-l-red-400';\n      case APPLICATION_STATUS.POR_DISPERSAR:\n        return 'bg-white border-l-purple-400';\n      case APPLICATION_STATUS.COMPLETED:\n        return 'bg-white border-l-slate-400';\n      default:\n        return 'bg-white';\n    }\n  };\n\n  // Function to determine if a card can be dragged\n  const canDragCard = app => {\n    // Implement your business rules for what cards can be dragged\n    // For example, you might not want completed applications to be moved\n\n    // Simple example: don't allow dragging of cards that are already moving\n    if (app.isMoving) return false;\n\n    // Don't allow dragging while any card is processing\n    if (processingAppId) return false;\n    return true;\n  };\n\n  // Function to get tooltip text for draggable status\n  const getDragTooltip = app => {\n    if (processingAppId) return 'Procesando otra aplicación, espere un momento';\n    if (app.isMoving) return 'Actualizando estado...';\n    if (!canDragCard(app)) return 'Esta aplicación no puede ser movida';\n    return 'Arrastre para cambiar el estado';\n  };\n\n  // Function to get CSS classes for draggable status\n  const getDraggableClasses = app => {\n    if (!canDragCard(app)) return 'kanban-card-locked';\n    return 'kanban-card-draggable';\n  };\n\n  // Función auxiliar para renderizar los indicadores de aprobación\n  const renderApprovalIndicators = app => {\n    var _app$approvalStatus7, _app$approvalStatus8, _app$approvalStatus9, _app$approvalStatus10, _app$approvalStatus11, _app$approvalStatus12, _app$approvalStatus13, _app$approvalStatus14, _app$approvalStatus15, _app$approvalStatus16;\n    // Show both indicators for all roles, but highlight the relevant one for the current view\n    const isAdvisorView = statusField === 'advisor_status';\n    const isCompanyView = statusField === 'company_status';\n\n    // Determinar el estado de aprobación/rechazo del asesor\n    let advisorBadgeClass = 'badge-warning'; // Por defecto: pendiente (amarillo)\n    let advisorStatusText = 'Pendiente';\n    if ((_app$approvalStatus7 = app.approvalStatus) !== null && _app$approvalStatus7 !== void 0 && _app$approvalStatus7.approvedByAdvisor || app.advisor_status === APPLICATION_STATUS.APPROVED) {\n      advisorBadgeClass = 'badge-success text-white'; // Aprobado (verde)\n      advisorStatusText = 'Aprobado';\n    } else if ((_app$approvalStatus8 = app.approvalStatus) !== null && _app$approvalStatus8 !== void 0 && _app$approvalStatus8.rejectedByAdvisor) {\n      // Solo marcar como rechazado si el asesor específicamente rechazó\n      advisorBadgeClass = 'badge-error text-white'; // Rechazado (rojo)\n      advisorStatusText = 'Rechazado';\n    }\n\n    // Determinar el estado de aprobación/rechazo de la empresa\n    let companyBadgeClass = 'badge-warning'; // Por defecto: pendiente (amarillo)\n    let companyStatusText = 'Pendiente';\n    if ((_app$approvalStatus9 = app.approvalStatus) !== null && _app$approvalStatus9 !== void 0 && _app$approvalStatus9.approvedByCompany || app.company_status === APPLICATION_STATUS.APPROVED) {\n      companyBadgeClass = 'badge-success text-white'; // Aprobado (verde)\n      companyStatusText = 'Aprobado';\n    } else if ((_app$approvalStatus10 = app.approvalStatus) !== null && _app$approvalStatus10 !== void 0 && _app$approvalStatus10.rejectedByCompany) {\n      // Solo marcar como rechazado si la empresa específicamente rechazó\n      companyBadgeClass = 'badge-error text-white'; // Rechazado (rojo)\n      companyStatusText = 'Rechazado';\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col space-y-1 mt-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xs font-medium text-gray-500\",\n        children: \"Estado de aprobaci\\xF3n:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 726,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-3 items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex items-center gap-1 ${isAdvisorView ? 'p-1 bg-base-200 rounded-md border border-primary' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: `badge badge-sm ${advisorBadgeClass}`,\n            title: `Asesor: ${advisorStatusText}`,\n            children: \"A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 732,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs\",\n            children: advisorStatusText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 738,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 731,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex items-center gap-1 ${isCompanyView ? 'p-1 bg-base-200 rounded-md border border-primary' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: `badge badge-sm ${companyBadgeClass}`,\n            title: `Empresa: ${companyStatusText}`,\n            children: \"E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 745,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs\",\n            children: companyStatusText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 751,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 744,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 729,\n        columnNumber: 9\n      }, this), (((_app$approvalStatus11 = app.approvalStatus) === null || _app$approvalStatus11 === void 0 ? void 0 : _app$approvalStatus11.approvedByAdvisor) || app.advisor_status === APPLICATION_STATUS.APPROVED) && (((_app$approvalStatus12 = app.approvalStatus) === null || _app$approvalStatus12 === void 0 ? void 0 : _app$approvalStatus12.approvedByCompany) || app.company_status === APPLICATION_STATUS.APPROVED) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center mt-1\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"badge badge-sm badge-success text-white\",\n          children: \"Aprobaci\\xF3n completa\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 761,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 760,\n        columnNumber: 11\n      }, this), (app.status === APPLICATION_STATUS.REJECTED || ((_app$approvalStatus13 = app.approvalStatus) === null || _app$approvalStatus13 === void 0 ? void 0 : _app$approvalStatus13.rejectedByAdvisor) || ((_app$approvalStatus14 = app.approvalStatus) === null || _app$approvalStatus14 === void 0 ? void 0 : _app$approvalStatus14.rejectedByCompany)) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center mt-1\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"badge badge-sm badge-error text-white\",\n          children: [\"Solicitud rechazada\", (_app$approvalStatus15 = app.approvalStatus) !== null && _app$approvalStatus15 !== void 0 && _app$approvalStatus15.rejectedByAdvisor ? ' por Asesor' : (_app$approvalStatus16 = app.approvalStatus) !== null && _app$approvalStatus16 !== void 0 && _app$approvalStatus16.rejectedByCompany ? ' por Empresa' : '']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 772,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 771,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 724,\n      columnNumber: 7\n    }, this);\n  };\n  const getApplicationTag = (type, financingType) => {\n    // Get the human-readable label\n    const label = APPLICATION_TYPE_LABELS[type] || type;\n\n    // Si es un plan seleccionado y tiene tipo de financiamiento, mostrar eso en lugar del tipo de aplicación\n    if (type === 'selected_plans' && financingType) {\n      const financingLabel = financingType === 'producto' ? 'Financiamiento de Producto' : financingType === 'personal' ? 'Crédito Personal' : financingType;\n      const bgColorClass = financingType === 'producto' ? 'bg-indigo-100 text-indigo-800' : financingType === 'personal' ? 'bg-purple-100 text-purple-800' : 'bg-blue-100 text-blue-800';\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        className: `application-tag ${bgColorClass}`,\n        children: financingLabel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 797,\n        columnNumber: 9\n      }, this);\n    }\n\n    // Funcionamiento original para otros tipos\n    switch (type) {\n      case 'selected_plans':\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"application-tag bg-blue-100 text-blue-800\",\n          children: label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 807,\n          columnNumber: 11\n        }, this);\n      case 'cash_requests':\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"application-tag bg-green-100 text-green-800\",\n          children: label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 813,\n          columnNumber: 11\n        }, this);\n      case 'product_simulations':\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"application-tag bg-orange-100 text-orange-800\",\n          children: label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 819,\n          columnNumber: 11\n        }, this);\n      case 'AUTO_LOAN':\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"application-tag bg-purple-100 text-purple-800\",\n          children: label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 825,\n          columnNumber: 11\n        }, this);\n      case 'CAR_BACKED_LOAN':\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"application-tag bg-indigo-100 text-indigo-800\",\n          children: label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 831,\n          columnNumber: 11\n        }, this);\n      case 'PERSONAL_LOAN':\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"application-tag bg-pink-100 text-pink-800\",\n          children: label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 837,\n          columnNumber: 11\n        }, this);\n      case 'CASH_ADVANCE':\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"application-tag bg-yellow-100 text-yellow-800\",\n          children: label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 843,\n          columnNumber: 11\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"application-tag bg-gray-100 text-gray-800\",\n          children: label || type\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 849,\n          columnNumber: 11\n        }, this);\n    }\n  };\n\n  // CSS for the Kanban board\n  const customStyles = `\n    .custom-scrollbar::-webkit-scrollbar {\n      width: 8px;\n      height: 8px;\n    }\n    \n    .custom-scrollbar::-webkit-scrollbar-track {\n      background: #f1f1f1;\n      border-radius: 10px;\n    }\n    \n    .custom-scrollbar::-webkit-scrollbar-thumb {\n      background: #888;\n      border-radius: 10px;\n    }\n    \n    .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n      background: #555;\n    }\n    \n    .kanban-card {\n      transition: transform 0.2s ease-in-out, opacity 0.2s ease-in-out, box-shadow 0.3s ease-in-out, border-color 0.3s ease;\n      touch-action: none;\n      user-select: none;\n      will-change: transform, opacity;\n    }\n    \n    .kanban-card-draggable {\n      cursor: grab !important;\n      position: relative;\n    }\n    \n    .kanban-card-draggable:hover {\n      transform: translateY(-4px);\n      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.15);\n      border-color: #a855f7;\n      z-index: 10;\n    }\n    \n    .kanban-card-draggable:active {\n      cursor: grabbing !important;\n    }\n    \n    .kanban-card-locked {\n      position: relative;\n      cursor: not-allowed !important;\n      opacity: 0.8;\n    }\n    \n    .card-moving {\n      opacity: 0.7;\n      background-color: #f9fafb;\n    }\n    \n    .drag-over {\n      background-color: #f3f4f6;\n    }\n    \n    @keyframes processingPulse {\n      0% { box-shadow: 0 0 0 0 rgba(168, 85, 247, 0.4); }\n      70% { box-shadow: 0 0 0 10px rgba(168, 85, 247, 0); }\n      100% { box-shadow: 0 0 0 0 rgba(168, 85, 247, 0); }\n    }\n    \n    .processing {\n      animation: processingPulse 1.5s infinite;\n    }\n\n    .application-tag {\n      display: inline-block;\n      font-size: 0.7rem;\n      padding: 0.15rem 0.4rem;\n      border-radius: 0.25rem;\n      font-weight: 500;\n    }\n\n    .approval-indicators {\n      display: flex;\n      margin-top: 0.5rem;\n      margin-bottom: 0.5rem;\n      gap: 0.5rem;\n    }\n    \n    .approval-indicator {\n      display: flex;\n      align-items: center;\n      gap: 0.25rem;\n    }\n    \n    .approval-indicator-dot {\n      width: 14px;\n      height: 14px;\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border: 1px solid #e2e8f0;\n      transition: all 0.2s ease;\n    }\n    \n    .approval-indicator-dot.approved {\n      background-color: #22c55e;\n      border-color: #16a34a;\n      box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.2);\n    }\n    \n    .approval-indicator-dot.pending {\n      background-color: #d1d5db;\n      border-color: #9ca3af;\n    }\n    \n    .approval-indicator-label {\n      font-size: 0.75rem;\n      font-weight: 500;\n    }\n    \n    .approval-indicator-label.approved {\n      color: #16a34a;\n    }\n    \n    .approval-indicator-label.pending {\n      color: #6b7280;\n    }\n\n    .tag-product {\n      background-color: #e0f2fe;\n      color: #0369a1;\n    }\n\n    .tag-cash {\n      background-color: #dcfce7;\n      color: #15803d;\n    }\n\n    .tag-selected {\n      background-color: #f3e8ff;\n      color: #7e22ce;\n    }\n\n    .column-header {\n      font-weight: 600;\n      padding: 0.75rem;\n      border-radius: 0.5rem;\n      margin-bottom: 1rem;\n    }\n\n    .column-count {\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      width: 1.5rem;\n      height: 1.5rem;\n      border-radius: 9999px;\n      font-size: 0.75rem;\n      font-weight: 600;\n      background-color: white;\n      color: #4b5563;\n      margin-left: 0.5rem;\n    }\n  `;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"kanban-board-container bg-base-100 p-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      dangerouslySetInnerHTML: {\n        __html: customStyles\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1020,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center mb-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"badge badge-lg badge-accent gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          className: \"inline-block w-4 h-4 stroke-current\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: \"2\",\n            d: \"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1026,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1025,\n          columnNumber: 11\n        }, this), \"Solo Planes Seleccionados\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1024,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1023,\n      columnNumber: 7\n    }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-error shadow-lg mb-4 mx-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          className: \"stroke-current flex-shrink-0 h-6 w-6\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: \"2\",\n            d: \"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1036,\n            columnNumber: 134\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1036,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: errorMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1037,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1035,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-none\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setErrorMessage(null),\n          className: \"btn btn-sm btn-ghost\",\n          children: \"Cerrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1040,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1039,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1034,\n      columnNumber: 9\n    }, this), warnMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-warning shadow-lg mb-4 mx-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          className: \"stroke-current flex-shrink-0 h-6 w-6\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: \"2\",\n            d: \"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1048,\n            columnNumber: 134\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1048,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: warnMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1049,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1047,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-none\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setWarnMessage(null),\n          className: \"btn btn-sm btn-ghost\",\n          children: \"Cerrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1052,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1051,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1046,\n      columnNumber: 9\n    }, this), successMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-success shadow-lg mb-4 mx-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          className: \"stroke-current flex-shrink-0 h-6 w-6\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: \"2\",\n            d: \"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1060,\n            columnNumber: 134\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1060,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: successMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1061,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1059,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-none\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setSuccessMessage(null),\n          className: \"btn btn-sm btn-ghost\",\n          children: \"Cerrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1064,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1063,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1058,\n      columnNumber: 9\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-24\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1072,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"ml-2 text-gray-600\",\n        children: \"Cargando aplicaciones...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1073,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1071,\n      columnNumber: 9\n    }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-error shadow-lg mb-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          className: \"stroke-current flex-shrink-0 h-6 w-6\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: \"2\",\n            d: \"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1078,\n            columnNumber: 134\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1078,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Error: \", error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1079,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1077,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1076,\n      columnNumber: 9\n    }, this) :\n    /*#__PURE__*/\n    // The actual Kanban board grid\n    _jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"kanban-column bg-base-200 rounded-lg p-4 h-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-header mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-bold flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"w-3 h-3 rounded-full bg-yellow-400 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1089,\n              columnNumber: 17\n            }, this), STATUS_LABELS[APPLICATION_STATUS.NEW], \" (\", getApplicationsByStatus(APPLICATION_STATUS.NEW).length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1088,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1087,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\",\n          onDragOver: handleDragOver,\n          onDragLeave: handleDragLeave,\n          onDrop: e => handleDrop(e, APPLICATION_STATUS.NEW),\n          children: [getVisibleApplications(APPLICATION_STATUS.NEW).map(app => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`,\n            draggable: canDragCard(app),\n            onDragStart: canDragCard(app) ? e => handleDragStart(e, app) : undefined,\n            onDragEnd: handleDragEnd,\n            title: getDragTooltip(app),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-start mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold text-gray-800\",\n                children: app.client_name || \"Cliente sin nombre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1109,\n                columnNumber: 21\n              }, this), getApplicationTag(app.application_type, app.financing_type)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1108,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mb-2\",\n              children: app.company_name && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: app.company_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1113,\n                columnNumber: 42\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1112,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm font-medium text-gray-900 mb-1\",\n              children: formatCurrency(app.amount)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1115,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col mt-2 pt-2 border-t border-gray-100\",\n              children: [renderApprovalIndicators(app), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-500\",\n                  children: [\"ID: \", app.id.substring(0, 5), \"...\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1121,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: `/applications/${app.id}`,\n                  className: \"btn btn-xs btn-primary\",\n                  children: \"VER DETALLE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1122,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1120,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1118,\n              columnNumber: 19\n            }, this)]\n          }, app.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1100,\n            columnNumber: 17\n          }, this)), getApplicationsByStatus(APPLICATION_STATUS.NEW).length > 5 && !expandedColumns[APPLICATION_STATUS.NEW] && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => toggleColumnExpand(APPLICATION_STATUS.NEW),\n            className: \"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\",\n            children: [\"Ver \", getApplicationsByStatus(APPLICATION_STATUS.NEW).length - 5, \" m\\xE1s\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1133,\n            columnNumber: 17\n          }, this), expandedColumns[APPLICATION_STATUS.NEW] && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => toggleColumnExpand(APPLICATION_STATUS.NEW),\n            className: \"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\",\n            children: \"Ver menos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1141,\n            columnNumber: 17\n          }, this), getApplicationsByStatus(APPLICATION_STATUS.NEW).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-4 text-gray-500 italic\",\n            children: \"No hay solicitudes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1149,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1093,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1086,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"kanban-column bg-base-200 rounded-lg p-4 h-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-header mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-bold flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"w-3 h-3 rounded-full bg-blue-400 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1160,\n              columnNumber: 17\n            }, this), STATUS_LABELS[APPLICATION_STATUS.IN_REVIEW], \" (\", getApplicationsByStatus(APPLICATION_STATUS.IN_REVIEW).length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1159,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1158,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\",\n          onDragOver: handleDragOver,\n          onDragLeave: handleDragLeave,\n          onDrop: e => handleDrop(e, APPLICATION_STATUS.IN_REVIEW),\n          children: [getVisibleApplications(APPLICATION_STATUS.IN_REVIEW).map(app => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`,\n            draggable: canDragCard(app),\n            onDragStart: canDragCard(app) ? e => handleDragStart(e, app) : undefined,\n            onDragEnd: handleDragEnd,\n            title: getDragTooltip(app),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-start mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold text-gray-800\",\n                children: app.client_name || \"Cliente sin nombre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1180,\n                columnNumber: 21\n              }, this), getApplicationTag(app.application_type, app.financing_type)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1179,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mb-2\",\n              children: app.company_name && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: app.company_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1184,\n                columnNumber: 42\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1183,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm font-medium text-gray-900 mb-1\",\n              children: formatCurrency(app.amount)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1186,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col mt-2 pt-2 border-t border-gray-100\",\n              children: [renderApprovalIndicators(app), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-500\",\n                  children: [\"ID: \", app.id.substring(0, 5), \"...\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1192,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: `/applications/${app.id}`,\n                  className: \"btn btn-xs btn-primary\",\n                  children: \"VER DETALLE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1193,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1191,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1189,\n              columnNumber: 19\n            }, this)]\n          }, app.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1171,\n            columnNumber: 17\n          }, this)), getApplicationsByStatus(APPLICATION_STATUS.IN_REVIEW).length > 5 && !expandedColumns[APPLICATION_STATUS.IN_REVIEW] && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => toggleColumnExpand(APPLICATION_STATUS.IN_REVIEW),\n            className: \"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\",\n            children: [\"Ver \", getApplicationsByStatus(APPLICATION_STATUS.IN_REVIEW).length - 5, \" m\\xE1s\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1204,\n            columnNumber: 17\n          }, this), expandedColumns[APPLICATION_STATUS.IN_REVIEW] && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => toggleColumnExpand(APPLICATION_STATUS.IN_REVIEW),\n            className: \"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\",\n            children: \"Ver menos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1212,\n            columnNumber: 17\n          }, this), getApplicationsByStatus(APPLICATION_STATUS.IN_REVIEW).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-4 text-gray-500 italic\",\n            children: \"No hay solicitudes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1220,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1164,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1157,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"kanban-column bg-base-200 rounded-lg p-4 h-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-header mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-bold flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"w-3 h-3 rounded-full bg-green-400 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1231,\n              columnNumber: 17\n            }, this), STATUS_LABELS[APPLICATION_STATUS.APPROVED], \" (\", getApplicationsByStatus(APPLICATION_STATUS.APPROVED).length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1230,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1229,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\",\n          onDragOver: handleDragOver,\n          onDragLeave: handleDragLeave,\n          onDrop: e => handleDrop(e, APPLICATION_STATUS.APPROVED),\n          children: [getVisibleApplications(APPLICATION_STATUS.APPROVED).map(app => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`,\n            draggable: canDragCard(app),\n            onDragStart: canDragCard(app) ? e => handleDragStart(e, app) : undefined,\n            onDragEnd: handleDragEnd,\n            title: getDragTooltip(app),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-start mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold text-gray-800\",\n                children: app.client_name || \"Cliente sin nombre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1251,\n                columnNumber: 21\n              }, this), getApplicationTag(app.application_type, app.financing_type)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1250,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mb-2\",\n              children: app.company_name && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: app.company_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1255,\n                columnNumber: 42\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1254,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm font-medium text-gray-900 mb-1\",\n              children: formatCurrency(app.amount)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1257,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col mt-2 pt-2 border-t border-gray-100\",\n              children: [renderApprovalIndicators(app), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-500\",\n                  children: [\"ID: \", app.id.substring(0, 5), \"...\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1263,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: `/applications/${app.id}`,\n                  className: \"btn btn-xs btn-primary\",\n                  children: \"VER DETALLE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1264,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1262,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1260,\n              columnNumber: 19\n            }, this)]\n          }, app.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1242,\n            columnNumber: 17\n          }, this)), getApplicationsByStatus(APPLICATION_STATUS.APPROVED).length > 5 && !expandedColumns[APPLICATION_STATUS.APPROVED] && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => toggleColumnExpand(APPLICATION_STATUS.APPROVED),\n            className: \"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\",\n            children: [\"Ver \", getApplicationsByStatus(APPLICATION_STATUS.APPROVED).length - 5, \" m\\xE1s\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1275,\n            columnNumber: 17\n          }, this), expandedColumns[APPLICATION_STATUS.APPROVED] && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => toggleColumnExpand(APPLICATION_STATUS.APPROVED),\n            className: \"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\",\n            children: \"Ver menos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1283,\n            columnNumber: 17\n          }, this), getApplicationsByStatus(APPLICATION_STATUS.APPROVED).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-4 text-gray-500 italic\",\n            children: \"No hay solicitudes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1291,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1235,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1228,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"kanban-column bg-base-200 rounded-lg p-4 h-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-header mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-bold flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"w-3 h-3 rounded-full bg-purple-400 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1302,\n              columnNumber: 17\n            }, this), STATUS_LABELS[APPLICATION_STATUS.POR_DISPERSAR], \" (\", getApplicationsByStatus(APPLICATION_STATUS.POR_DISPERSAR).length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1301,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1300,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\",\n          onDragOver: handleDragOver,\n          onDragLeave: handleDragLeave,\n          onDrop: e => handleDrop(e, APPLICATION_STATUS.POR_DISPERSAR),\n          children: [getVisibleApplications(APPLICATION_STATUS.POR_DISPERSAR).map(app => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`,\n            draggable: canDragCard(app),\n            onDragStart: canDragCard(app) ? e => handleDragStart(e, app) : undefined,\n            onDragEnd: handleDragEnd,\n            title: getDragTooltip(app),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-start mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold text-gray-800\",\n                children: app.client_name || \"Cliente sin nombre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1322,\n                columnNumber: 21\n              }, this), getApplicationTag(app.application_type, app.financing_type)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1321,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mb-2\",\n              children: app.company_name && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: app.company_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1326,\n                columnNumber: 42\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1325,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm font-medium text-gray-900 mb-1\",\n              children: formatCurrency(app.amount)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1328,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col mt-2 pt-2 border-t border-gray-100\",\n              children: [renderApprovalIndicators(app), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-500\",\n                  children: [\"ID: \", app.id.substring(0, 5), \"...\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1334,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: `/applications/${app.id}`,\n                  className: \"btn btn-xs btn-primary\",\n                  children: \"VER DETALLE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1335,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1333,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1331,\n              columnNumber: 19\n            }, this)]\n          }, app.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1313,\n            columnNumber: 17\n          }, this)), getApplicationsByStatus(APPLICATION_STATUS.POR_DISPERSAR).length > 5 && !expandedColumns[APPLICATION_STATUS.POR_DISPERSAR] && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => toggleColumnExpand(APPLICATION_STATUS.POR_DISPERSAR),\n            className: \"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\",\n            children: [\"Ver \", getApplicationsByStatus(APPLICATION_STATUS.POR_DISPERSAR).length - 5, \" m\\xE1s\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1346,\n            columnNumber: 17\n          }, this), expandedColumns[APPLICATION_STATUS.POR_DISPERSAR] && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => toggleColumnExpand(APPLICATION_STATUS.POR_DISPERSAR),\n            className: \"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\",\n            children: \"Ver menos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1354,\n            columnNumber: 17\n          }, this), getApplicationsByStatus(APPLICATION_STATUS.POR_DISPERSAR).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-4 text-gray-500 italic\",\n            children: \"No hay solicitudes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1362,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1306,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1299,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"kanban-column bg-base-200 rounded-lg p-4 h-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-header mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-bold flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"w-3 h-3 rounded-full bg-slate-400 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1373,\n              columnNumber: 17\n            }, this), STATUS_LABELS[APPLICATION_STATUS.COMPLETED], \" (\", getApplicationsByStatus(APPLICATION_STATUS.COMPLETED).length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1372,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1371,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\",\n          onDragOver: handleDragOver,\n          onDragLeave: handleDragLeave,\n          onDrop: e => handleDrop(e, APPLICATION_STATUS.COMPLETED),\n          children: [getVisibleApplications(APPLICATION_STATUS.COMPLETED).map(app => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`,\n            draggable: canDragCard(app),\n            onDragStart: canDragCard(app) ? e => handleDragStart(e, app) : undefined,\n            onDragEnd: handleDragEnd,\n            title: getDragTooltip(app),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-start mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold text-gray-800\",\n                children: app.client_name || \"Cliente sin nombre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1393,\n                columnNumber: 21\n              }, this), getApplicationTag(app.application_type, app.financing_type)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1392,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mb-2\",\n              children: app.company_name && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: app.company_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1397,\n                columnNumber: 42\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1396,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm font-medium text-gray-900 mb-1\",\n              children: formatCurrency(app.amount)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1399,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col mt-2 pt-2 border-t border-gray-100\",\n              children: [renderApprovalIndicators(app), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-500\",\n                  children: [\"ID: \", app.id.substring(0, 5), \"...\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1405,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: `/applications/${app.id}`,\n                  className: \"btn btn-xs btn-primary\",\n                  children: \"VER DETALLE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1406,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1404,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1402,\n              columnNumber: 19\n            }, this)]\n          }, app.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1384,\n            columnNumber: 23\n          }, this)), getApplicationsByStatus(APPLICATION_STATUS.COMPLETED).length > 5 && !expandedColumns[APPLICATION_STATUS.COMPLETED] && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => toggleColumnExpand(APPLICATION_STATUS.COMPLETED),\n            className: \"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\",\n            children: [\"Ver \", getApplicationsByStatus(APPLICATION_STATUS.COMPLETED).length - 5, \" m\\xE1s\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1417,\n            columnNumber: 17\n          }, this), expandedColumns[APPLICATION_STATUS.COMPLETED] && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => toggleColumnExpand(APPLICATION_STATUS.COMPLETED),\n            className: \"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\",\n            children: \"Ver menos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1425,\n            columnNumber: 17\n          }, this), getApplicationsByStatus(APPLICATION_STATUS.COMPLETED).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-4 text-gray-500 italic\",\n            children: \"No hay solicitudes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1433,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1377,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1370,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"kanban-column bg-base-200 rounded-lg p-4 h-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-header mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-bold flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"w-3 h-3 rounded-full bg-red-400 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1444,\n              columnNumber: 17\n            }, this), STATUS_LABELS[APPLICATION_STATUS.REJECTED], \" (\", getApplicationsByStatus(APPLICATION_STATUS.REJECTED).length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1443,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1442,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\",\n          onDragOver: handleDragOver,\n          onDragLeave: handleDragLeave,\n          onDrop: e => handleDrop(e, APPLICATION_STATUS.REJECTED),\n          children: [getVisibleApplications(APPLICATION_STATUS.REJECTED).map(app => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`,\n            draggable: canDragCard(app),\n            onDragStart: canDragCard(app) ? e => handleDragStart(e, app) : undefined,\n            onDragEnd: handleDragEnd,\n            title: getDragTooltip(app),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-start mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold text-gray-800\",\n                children: app.client_name || \"Cliente sin nombre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1464,\n                columnNumber: 21\n              }, this), getApplicationTag(app.application_type, app.financing_type)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1463,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mb-2\",\n              children: app.company_name && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: app.company_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1468,\n                columnNumber: 42\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1467,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm font-medium text-gray-900 mb-1\",\n              children: formatCurrency(app.amount)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1470,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col mt-2 pt-2 border-t border-gray-100\",\n              children: [renderApprovalIndicators(app), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-500\",\n                  children: [\"ID: \", app.id.substring(0, 5), \"...\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1476,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: `/applications/${app.id}`,\n                  className: \"btn btn-xs btn-primary\",\n                  children: \"VER DETALLE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1477,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1475,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1473,\n              columnNumber: 19\n            }, this)]\n          }, app.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1455,\n            columnNumber: 17\n          }, this)), getApplicationsByStatus(APPLICATION_STATUS.REJECTED).length > 5 && !expandedColumns[APPLICATION_STATUS.REJECTED] && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => toggleColumnExpand(APPLICATION_STATUS.REJECTED),\n            className: \"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\",\n            children: [\"Ver \", getApplicationsByStatus(APPLICATION_STATUS.REJECTED).length - 5, \" m\\xE1s\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1488,\n            columnNumber: 17\n          }, this), expandedColumns[APPLICATION_STATUS.REJECTED] && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => toggleColumnExpand(APPLICATION_STATUS.REJECTED),\n            className: \"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\",\n            children: \"Ver menos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1496,\n            columnNumber: 17\n          }, this), getApplicationsByStatus(APPLICATION_STATUS.REJECTED).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-4 text-gray-500 italic\",\n            children: \"No hay solicitudes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1504,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1448,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1441,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1084,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1019,\n    columnNumber: 5\n  }, this);\n};\n_s(KanbanBoard, \"ch/6emiDxBjivAqYs+LyInB2OsU=\", false, function () {\n  return [usePermissions, useAuth];\n});\n_c = KanbanBoard;\nexport default KanbanBoard;\nvar _c;\n$RefreshReg$(_c, \"KanbanBoard\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","APPLICATION_STATUS","STATUS_LABELS","usePermissions","useAuth","formatCurrency","APPLICATION_TYPE_LABELS","jsxDEV","_jsxDEV","KanbanBoard","applications","onStatusChange","statusField","applicationTypeFilter","_s","errorMessage","setErrorMessage","warnMessage","setWarnMessage","successMessage","setSuccessMessage","processingAppId","setProcessingAppId","appsWithApproval","setAppsWithApproval","isLoading","setIsLoading","error","setError","dragItemRef","pendingRefreshRef","expandedColumns","setExpandedColumns","isAdvisor","isCompanyAdmin","user","fetchApplicationsWithApproval","appTypes","Set","map","app","application_type","console","log","Array","from","length","id","type","financing","financing_type","selectedPlansOnly","filter","mappedApps","statusToUse","status","advisor_status","company_status","global_status","client_name","company_name","amount","requested_amount","approvalStatus","approvedByAdvisor","approved_by_advisor","approvedByCompany","approved_by_company","isFullyApproved","rejectedByAdvisor","rejected_by_advisor","rejectedByCompany","rejected_by_company","beforeCount","getApplicationsByStatus","filteredApps","selectedPlansFilter","getVisibleApplications","apps","slice","toggleColumnExpand","prev","handleDragStart","e","application","current","currentTarget","classList","add","dataTransfer","setData","effectAllowed","ghostElement","cloneNode","style","position","top","opacity","transform","width","offsetWidth","document","body","appendChild","setDragImage","setTimeout","parentNode","removeChild","warn","handleDragEnd","remove","columns","querySelectorAll","forEach","column","handleDragOver","preventDefault","dropEffect","handleDragLeave","canMoveToStatus","applicationStatus","newStatus","NEW","IN_REVIEW","APPROVED","REJECTED","POR_DISPERSAR","COMPLETED","_application$approval","_application$approval2","_application$approval3","_application$approval4","_application$approval5","_application$approval6","handleDrop","applicationId","getData","find","_application$approval7","_application$approval8","_application$approval9","_application$approval10","missingApprovals","push","join","isMoving","payload","_app$approvalStatus5","_app$approvalStatus6","updatedApp","_app$approvalStatus","_app$approvalStatus2","_app$approvalStatus3","_app$approvalStatus4","Error","message","getCardColor","viewStatus","canDragCard","getDragTooltip","getDraggableClasses","renderApprovalIndicators","_app$approvalStatus7","_app$approvalStatus8","_app$approvalStatus9","_app$approvalStatus10","_app$approvalStatus11","_app$approvalStatus12","_app$approvalStatus13","_app$approvalStatus14","_app$approvalStatus15","_app$approvalStatus16","isAdvisorView","isCompanyView","advisorBadgeClass","advisorStatusText","companyBadgeClass","companyStatusText","className","children","fileName","_jsxFileName","lineNumber","columnNumber","title","getApplicationTag","financingType","label","financingLabel","bgColorClass","customStyles","dangerouslySetInnerHTML","__html","xmlns","fill","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","onClick","onDragOver","onDragLeave","onDrop","draggable","onDragStart","undefined","onDragEnd","substring","to","_c","$RefreshReg$"],"sources":["/Users/diegogg98/NEW CRM MAR18/src/components/ui/KanbanBoard.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Link } from 'react-router-dom';\nimport { APPLICATION_STATUS, STATUS_LABELS } from '../../utils/constants/statuses';\nimport { usePermissions } from '../../contexts/PermissionsContext';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { formatCurrency } from '../../utils/formatters';\nimport { APPLICATION_TYPE_LABELS } from '../../utils/constants/applications';\n\n// NOTA: La funcionalidad de tiempo real ha sido desactivada \n// debido a problemas de compatibilidad\n// Las actualizaciones se reflejarán al recargar la página o cuando el componente\n// padre envíe nuevas aplicaciones como prop\n\ninterface KanbanBoardProps {\n  applications: any[];\n  onStatusChange?: (application: any, newStatus: string, statusField?: string) => Promise<void>;\n  statusField?: 'status' | 'advisor_status' | 'company_status' | 'global_status';\n  applicationTypeFilter?: string;\n}\n\ninterface ApplicationWithApproval {\n  id: string;\n  status: string;\n  advisor_status?: string;\n  company_status?: string;\n  global_status?: string;\n  client_name: string;\n  company_name?: string;\n  amount: number;\n  application_type: string;\n  financing_type?: string;\n  isMoving?: boolean;\n  approvalStatus?: {\n    approvedByAdvisor?: boolean;\n    approvedByCompany?: boolean;\n    isFullyApproved?: boolean;\n    rejectedByAdvisor?: boolean;\n    rejectedByCompany?: boolean;\n  };\n}\n\n// Añadir nueva interfaz para el payload\ninterface ApplicationStatusPayload {\n  id: string;\n  status?: string;\n  advisor_status?: string;\n  company_status?: string;\n  global_status?: string;\n}\n\nconst KanbanBoard: React.FC<KanbanBoardProps> = ({ applications, onStatusChange, statusField = 'status', applicationTypeFilter }) => {\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\n  const [warnMessage, setWarnMessage] = useState<string | null>(null);\n  const [successMessage, setSuccessMessage] = useState<string | null>(null);\n  const [processingAppId, setProcessingAppId] = useState<string | null>(null);\n  const [appsWithApproval, setAppsWithApproval] = useState<ApplicationWithApproval[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const dragItemRef = useRef<HTMLDivElement | null>(null);\n  const pendingRefreshRef = useRef<boolean>(false);\n  const [expandedColumns, setExpandedColumns] = useState<Record<string, boolean>>({});\n  \n  // Añadir contexto de permisos para verificar el rol del usuario\n  const { isAdvisor, isCompanyAdmin } = usePermissions();\n  const { user } = useAuth();\n  \n  // Set up applications when component mounts\n  useEffect(() => {\n    const fetchApplicationsWithApproval = async () => {\n      setIsLoading(true);\n      try {\n        // Debug: Log all unique application types \n        const appTypes = new Set(applications.map(app => app.application_type));\n        console.log('Available application types:', Array.from(appTypes));\n        console.log('Current filter type:', applicationTypeFilter);\n        console.log('Number of applications before filtering:', applications.length);\n        \n        // Debug: Log financing_type values\n        console.log('Financing types:', applications.map(app => ({ \n          id: app.id, \n          type: app.application_type, \n          financing: app.financing_type \n        })));\n        \n        // Primero, asegurarse de que solo trabajamos con aplicaciones de tipo 'selected_plans'\n        const selectedPlansOnly = applications.filter(app => app.application_type === 'selected_plans');\n        console.log(`Filtered to ${selectedPlansOnly.length} 'selected_plans' applications`);\n        \n        // Map applications to a simpler format and initialize status properties\n        let mappedApps = selectedPlansOnly.map(app => {\n          // Determine which status field to use\n          const statusToUse = app[statusField] || app.status;\n          \n          // Debug: Log financing_type for this specific app\n          console.log(`App ${app.id} financing_type:`, app.financing_type);\n          \n          return {\n            id: app.id,\n            status: statusToUse, // Use the status field specified in props\n            advisor_status: app.advisor_status || app.status,\n            company_status: app.company_status || app.status,\n            global_status: app.global_status || app.status,\n            client_name: app.client_name || 'Cliente sin nombre',\n            company_name: app.company_name,\n            amount: app.amount || app.requested_amount || 0,\n            application_type: app.application_type,\n            financing_type: app.financing_type || null, // Asegurarse de incluir financing_type\n            approvalStatus: {\n              approvedByAdvisor: app.approved_by_advisor,\n              approvedByCompany: app.approved_by_company,\n              isFullyApproved: app.approved_by_advisor && app.approved_by_company,\n              rejectedByAdvisor: app.rejected_by_advisor,\n              rejectedByCompany: app.rejected_by_company\n            }\n          } as ApplicationWithApproval;\n        });\n        \n        // Filter by application type if specified\n        if (applicationTypeFilter && applicationTypeFilter !== 'all') {\n          console.log(`Filtering initial applications by type: ${applicationTypeFilter}`);\n          const beforeCount = mappedApps.length;\n          mappedApps = mappedApps.filter(app => app.application_type === applicationTypeFilter);\n          console.log(`Filtered from ${beforeCount} to ${mappedApps.length} applications with type ${applicationTypeFilter}`);\n        }\n\n        // Set the applications in state\n        setAppsWithApproval(mappedApps);\n      } catch (error) {\n        console.error('Error setting up applications:', error);\n        setErrorMessage('Error al cargar las aplicaciones');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    \n    // Call the function\n    fetchApplicationsWithApproval();\n  }, [applications, statusField, applicationTypeFilter]);\n  \n  // Group applications by status\n  const getApplicationsByStatus = (status: string) => {\n    // First filter by status\n    let filteredApps = appsWithApproval.filter(app => app.status === status);\n    \n    // SIEMPRE filtrar por 'selected_plans' independientemente del filtro recibido\n    const selectedPlansFilter = 'selected_plans';\n    filteredApps = filteredApps.filter(app => app.application_type === selectedPlansFilter);\n    \n    return filteredApps;\n  };\n  \n  // Get visible applications (limited to 5 by default)\n  const getVisibleApplications = (status: string) => {\n    const apps = getApplicationsByStatus(status);\n    if (expandedColumns[status]) {\n      return apps; // Show all if expanded\n    }\n    return apps.slice(0, 5); // Show only first 5\n  };\n  \n  // Toggle expanded state for a column\n  const toggleColumnExpand = (status: string) => {\n    setExpandedColumns(prev => ({\n      ...prev,\n      [status]: !prev[status]\n    }));\n  };\n  \n  const handleDragStart = (e: React.DragEvent<HTMLDivElement>, application: ApplicationWithApproval) => {\n    // Store the drag start element for later reference\n    dragItemRef.current = e.currentTarget;\n    \n    // Add moving class to the dragged item\n    e.currentTarget.classList.add('card-moving');\n    \n    // Set the data for the drag operation\n    e.dataTransfer.setData('application/id', application.id);\n    e.dataTransfer.effectAllowed = 'move';\n    \n    // Create a custom drag image for better UX\n    try {\n      const ghostElement = e.currentTarget.cloneNode(true) as HTMLElement;\n      ghostElement.style.position = 'absolute';\n      ghostElement.style.top = '-1000px';\n      ghostElement.style.opacity = '0.8';\n      ghostElement.style.transform = 'scale(0.8)';\n      ghostElement.style.width = `${e.currentTarget.offsetWidth}px`;\n      document.body.appendChild(ghostElement);\n      e.dataTransfer.setDragImage(ghostElement, 20, 20);\n\n      // Clean up the ghost element after a short delay\n      setTimeout(() => {\n        if (ghostElement.parentNode) {\n          document.body.removeChild(ghostElement);\n        }\n      }, 100);\n    } catch (error) {\n      console.warn('Failed to create custom drag image:', error);\n      // Fall back to default drag image\n    }\n  };\n  \n  const handleDragEnd = (e: React.DragEvent<HTMLDivElement>) => {\n    // Remove dragging-related classes from the dragged item\n    if (dragItemRef.current) {\n      dragItemRef.current.classList.remove('card-moving');\n    }\n    \n    // Get and remove any columns with drag-over class\n    const columns = document.querySelectorAll('.column-content');\n    columns.forEach(column => column.classList.remove('drag-over'));\n    \n    // Clear the reference\n    dragItemRef.current = null;\n  };\n  \n  const handleDragOver = (e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n    \n    // Add a class to the drop target\n      e.currentTarget.classList.add('drag-over');\n  };\n  \n  const handleDragLeave = (e: React.DragEvent<HTMLDivElement>) => {\n    // Remove the drag-over class\n    e.currentTarget.classList.remove('drag-over');\n  };\n  \n  const canMoveToStatus = (applicationStatus: string, newStatus: string, application: ApplicationWithApproval): boolean => {\n    // Don't allow moving to the same status\n    if (applicationStatus === newStatus) return false;\n\n    // Status transition rules based on the specific view (advisor, company, or global)\n    if (statusField === 'advisor_status') {\n      // Advisor-specific rules\n      if (applicationStatus === APPLICATION_STATUS.NEW) {\n        // From NEW, advisors can move to IN_REVIEW, APPROVED or REJECTED\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || \n               newStatus === APPLICATION_STATUS.APPROVED || \n               newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.IN_REVIEW) {\n        // From IN_REVIEW, advisors can go back to NEW, approve or reject\n        return newStatus === APPLICATION_STATUS.NEW || \n               newStatus === APPLICATION_STATUS.APPROVED || \n               newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.APPROVED) {\n        // Once approved, advisors can go back to IN_REVIEW or reject\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || \n               newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.POR_DISPERSAR) {\n        // Permitir a asesores retroceder de POR_DISPERSAR a EN_REVISIÓN para corregir errores\n        // o marcar como COMPLETED para indicar que se ha completado la dispersión\n        // o REJECTED para rechazar\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || \n               newStatus === APPLICATION_STATUS.COMPLETED || \n               newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.REJECTED) {\n        // Permitir mover desde REJECTED a NEW o IN_REVIEW para reactivar\n        return newStatus === APPLICATION_STATUS.NEW || \n               newStatus === APPLICATION_STATUS.IN_REVIEW || \n               newStatus === APPLICATION_STATUS.APPROVED;\n      }\n    } \n    else if (statusField === 'company_status') {\n      // Company-specific rules\n      if (applicationStatus === APPLICATION_STATUS.NEW) {\n        // From NEW, company can move to IN_REVIEW, APPROVED or REJECTED\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || \n               newStatus === APPLICATION_STATUS.APPROVED || \n               newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.IN_REVIEW) {\n        // From IN_REVIEW, company can go back to NEW, approve or reject\n        return newStatus === APPLICATION_STATUS.NEW || \n               newStatus === APPLICATION_STATUS.APPROVED || \n               newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.APPROVED) {\n        // Once approved, company can go back to IN_REVIEW or reject\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || \n               newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.REJECTED) {\n        // Permitir mover desde REJECTED a NEW o IN_REVIEW para reactivar\n        return newStatus === APPLICATION_STATUS.NEW || \n               newStatus === APPLICATION_STATUS.IN_REVIEW ||\n               newStatus === APPLICATION_STATUS.APPROVED;\n      }\n    }\n    else if (statusField === 'global_status') {\n      // Global view rules - this is for admins or the \"por dispersar\" stage and beyond\n      if (applicationStatus === APPLICATION_STATUS.NEW) {\n        // Can move from NEW to IN_REVIEW, APPROVED or REJECTED\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || \n               newStatus === APPLICATION_STATUS.APPROVED || \n               newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.IN_REVIEW) {\n        // From IN_REVIEW, can move to NEW, APPROVED or REJECTED\n        if (newStatus === APPLICATION_STATUS.NEW) return true;\n        if (newStatus === APPLICATION_STATUS.APPROVED) {\n          // For global view, we still require both approvals when moving from IN_REVIEW to APPROVED\n          return application.approvalStatus?.approvedByAdvisor === true && \n                 application.approvalStatus?.approvedByCompany === true;\n        }\n        if (newStatus === APPLICATION_STATUS.REJECTED) return true;\n        return false;\n      } else if (applicationStatus === APPLICATION_STATUS.APPROVED) {\n        // From APPROVED, can move to IN_REVIEW, POR_DISPERSAR or REJECTED\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || \n               newStatus === APPLICATION_STATUS.POR_DISPERSAR || \n               newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.POR_DISPERSAR) {\n        // From POR_DISPERSAR, can move to APPROVED, COMPLETED, IN_REVIEW or REJECTED\n        return newStatus === APPLICATION_STATUS.APPROVED || \n               newStatus === APPLICATION_STATUS.COMPLETED || \n               newStatus === APPLICATION_STATUS.IN_REVIEW ||\n               newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.COMPLETED) {\n        // Completed applications cannot be moved\n        return false;\n      } else if (applicationStatus === APPLICATION_STATUS.REJECTED) {\n        // Permitir mover desde REJECTED a otros estados para reactivar\n        return newStatus === APPLICATION_STATUS.NEW || \n               newStatus === APPLICATION_STATUS.IN_REVIEW ||\n               newStatus === APPLICATION_STATUS.APPROVED;\n      }\n    } else {\n      // Default rules for the standard status field\n      if (applicationStatus === APPLICATION_STATUS.NEW) {\n        // Can move from NEW to IN_REVIEW, APPROVED or REJECTED\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || \n               newStatus === APPLICATION_STATUS.APPROVED ||\n               newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.IN_REVIEW) {\n        // From IN_REVIEW, can move to NEW or APPROVED or REJECTED\n        if (newStatus === APPLICATION_STATUS.NEW) return true;\n        if (newStatus === APPLICATION_STATUS.APPROVED) {\n          if (isAdvisor()) {\n            return application.approvalStatus?.approvedByAdvisor === true;\n          }\n          else if (isCompanyAdmin()) {\n            return application.approvalStatus?.approvedByCompany === true;\n          }\n          else {\n            return application.approvalStatus?.approvedByAdvisor === true && \n                   application.approvalStatus?.approvedByCompany === true;\n          }\n        }\n        if (newStatus === APPLICATION_STATUS.REJECTED) return true;\n        return false;\n      } else if (applicationStatus === APPLICATION_STATUS.APPROVED) {\n        // From APPROVED, can move to IN_REVIEW, POR_DISPERSAR or REJECTED\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || \n               newStatus === APPLICATION_STATUS.POR_DISPERSAR ||\n               newStatus === APPLICATION_STATUS.REJECTED;\n      } else if (applicationStatus === APPLICATION_STATUS.POR_DISPERSAR) {\n        // From POR_DISPERSAR, can move to APPROVED, COMPLETED, IN_REVIEW or REJECTED\n        if (isAdvisor() && newStatus === APPLICATION_STATUS.IN_REVIEW) return true;\n        if (isAdvisor() && newStatus === APPLICATION_STATUS.REJECTED) return true;\n        return newStatus === APPLICATION_STATUS.APPROVED || \n               newStatus === APPLICATION_STATUS.COMPLETED;\n      } else if (applicationStatus === APPLICATION_STATUS.COMPLETED) {\n        // Completed applications cannot be moved\n        return false;\n      } else if (applicationStatus === APPLICATION_STATUS.REJECTED) {\n        // Permitir mover desde REJECTED a otros estados para reactivar\n        return newStatus === APPLICATION_STATUS.NEW || \n               newStatus === APPLICATION_STATUS.IN_REVIEW ||\n               newStatus === APPLICATION_STATUS.APPROVED;\n      }\n    }\n      \n    // Default: allow movement between states that don't have specific rules\n    return true;\n  };\n  \n  const handleDrop = async (e: React.DragEvent<HTMLDivElement>, newStatus: string) => {\n    e.preventDefault();\n    \n    // Clear styling\n    e.currentTarget.classList.remove('drag-over');\n    \n    // Check if something is being dragged\n    if (!dragItemRef.current) {\n      console.warn('Nothing is being dragged');\n      return;\n    }\n    \n    // Extract application data from the dataTransfer\n    const applicationId = e.dataTransfer.getData('application/id');\n    const application = appsWithApproval.find(app => app.id === applicationId);\n    \n    if (!application) {\n      console.error('Application not found:', applicationId);\n      return;\n    }\n        \n    // Don't allow dropping in the same column or if processing another application\n    if (application.status === newStatus || processingAppId !== null) {\n      return;\n    }\n        \n    // Check if this transition is allowed\n    if (!canMoveToStatus(application.status, newStatus, application)) {\n      if (application.status === APPLICATION_STATUS.IN_REVIEW && newStatus === APPLICATION_STATUS.APPROVED) {\n        // Mensaje personalizado según el rol del usuario\n        if (isAdvisor() && !application.approvalStatus?.approvedByAdvisor) {\n          setWarnMessage('No puedes aprobar esta solicitud. Debes aprobarla primero desde la página de detalle.');\n        } else if (isCompanyAdmin() && !application.approvalStatus?.approvedByCompany) {\n          setWarnMessage('No puedes aprobar esta solicitud. Debes aprobarla primero desde la página de detalle.');\n        } else {\n          // Para otros roles, mostrar mensaje sobre ambas aprobaciones\n          const missingApprovals = [];\n          if (!application.approvalStatus?.approvedByAdvisor) missingApprovals.push('del asesor');\n          if (!application.approvalStatus?.approvedByCompany) missingApprovals.push('de la empresa');\n          \n          setWarnMessage(`No se puede aprobar esta solicitud. Falta aprobación ${missingApprovals.join(' y ')}.`);\n        }\n        setTimeout(() => setWarnMessage(null), 5000);\n      } else {\n        // General transition not allowed message\n        setErrorMessage(`No se permite cambiar el estado de \"${STATUS_LABELS[application.status as keyof typeof STATUS_LABELS]}\" a \"${STATUS_LABELS[newStatus as keyof typeof STATUS_LABELS]}\"`);\n        setTimeout(() => setErrorMessage(null), 5000);\n      }\n      return;\n    }\n    \n    // Bail if there's no status change handler\n    if (!onStatusChange) {\n      setWarnMessage('No tienes permisos para cambiar el estado de las solicitudes');\n      setTimeout(() => setWarnMessage(null), 3000);\n      return;\n    }\n    \n    // Mark that we're processing this application\n    setProcessingAppId(applicationId);\n    \n    // Mark this application as moving in the UI\n    setAppsWithApproval(prev => \n      prev.map(app => \n        app.id === applicationId\n          ? { ...app, isMoving: true } \n          : app\n      )\n    );\n    \n    try {\n      // IMPORTANTE: Crear un payload que solo contenga el campo de status específico\n      // para evitar que se actualicen otros campos\n      const payload: ApplicationStatusPayload = { \n        id: application.id,\n        // Solo incluir el campo correspondiente al statusField actual\n      };\n      \n      // Solo añadir el campo que necesitamos actualizar, no todos los campos de estado\n      if (statusField === 'advisor_status') {\n        payload.advisor_status = newStatus;\n      } else if (statusField === 'company_status') {\n        payload.company_status = newStatus;\n      } else if (statusField === 'global_status') {\n        payload.global_status = newStatus;\n      } else {\n        payload.status = newStatus;\n      }\n\n      console.log(`Actualizando ${statusField} a ${newStatus} para aplicación ${application.id}. Payload:`, payload);\n      \n      // Call the parent component to update the status\n      await onStatusChange(\n        payload,\n        newStatus,\n        statusField\n      );\n      \n      // Update local state after successful change\n      setAppsWithApproval(prev => \n        prev.map(app => {\n          if (app.id === applicationId) {\n            // Create a new object with updated status\n            const updatedApp = { ...app, isMoving: false };\n            \n            // IMPORTANT: Update ONLY the specific status field and the local \"status\" property\n            // This ensures that only the current view sees the card in the new position\n            if (statusField === 'advisor_status') {\n              updatedApp.advisor_status = newStatus;\n              updatedApp.status = newStatus; // This is the view-specific status\n              \n              // Si estamos moviendo directo de NEW a APPROVED, actualizar el indicador de aprobación del asesor\n              if (app.status === APPLICATION_STATUS.NEW && newStatus === APPLICATION_STATUS.APPROVED) {\n                updatedApp.approvalStatus = {\n                  ...app.approvalStatus,\n                  approvedByAdvisor: true,\n                  isFullyApproved: app.approvalStatus?.approvedByCompany === true\n                };\n              }\n            } else if (statusField === 'company_status') {\n              updatedApp.company_status = newStatus;\n              updatedApp.status = newStatus; // This is the view-specific status\n              \n              // Si estamos moviendo directo de NEW a APPROVED, actualizar el indicador de aprobación de la empresa\n              if (app.status === APPLICATION_STATUS.NEW && newStatus === APPLICATION_STATUS.APPROVED) {\n                updatedApp.approvalStatus = {\n                  ...app.approvalStatus,\n                  approvedByCompany: true,\n                  isFullyApproved: app.approvalStatus?.approvedByAdvisor === true\n                };\n              }\n            } else if (statusField === 'global_status') {\n              updatedApp.global_status = newStatus;\n              updatedApp.status = newStatus; // This is the view-specific status\n              \n              // Si estamos moviendo directo de NEW a APPROVED en global_status, establecer ambos como aprobados\n              if (app.status === APPLICATION_STATUS.NEW && newStatus === APPLICATION_STATUS.APPROVED) {\n                updatedApp.approvalStatus = {\n                  ...app.approvalStatus,\n                  approvedByAdvisor: true,\n                  approvedByCompany: true,\n                  isFullyApproved: true\n                };\n              }\n            } else {\n              updatedApp.status = newStatus;\n              \n              // Si estamos moviendo directo de NEW a APPROVED en el status principal\n              if (app.status === APPLICATION_STATUS.NEW && newStatus === APPLICATION_STATUS.APPROVED) {\n                if (isAdvisor()) {\n                  updatedApp.approvalStatus = {\n                    ...app.approvalStatus,\n                    approvedByAdvisor: true,\n                    isFullyApproved: app.approvalStatus?.approvedByCompany === true\n                  };\n                } else if (isCompanyAdmin()) {\n                  updatedApp.approvalStatus = {\n                    ...app.approvalStatus,\n                    approvedByCompany: true,\n                    isFullyApproved: app.approvalStatus?.approvedByAdvisor === true\n                  };\n                } else {\n                  // Para rol de admin, establecer ambos como aprobados\n                  updatedApp.approvalStatus = {\n                    ...app.approvalStatus,\n                    approvedByAdvisor: true,\n                    approvedByCompany: true,\n                    isFullyApproved: true\n                  };\n                }\n              }\n            }\n            \n            // Si estamos moviendo directo de NEW a REJECTED, actualizar los indicadores de rechazo\n            if (app.status === APPLICATION_STATUS.NEW && newStatus === APPLICATION_STATUS.REJECTED) {\n              if (statusField === 'advisor_status') {\n                updatedApp.approvalStatus = {\n                  ...app.approvalStatus,\n                  rejectedByAdvisor: true\n                };\n              } else if (statusField === 'company_status') {\n                updatedApp.approvalStatus = {\n                  ...app.approvalStatus,\n                  rejectedByCompany: true\n                };\n              } else {\n                // Para rol de admin o status principal/global, establecer ambos como rechazados\n                updatedApp.approvalStatus = {\n                  ...app.approvalStatus,\n                  rejectedByAdvisor: true,\n                  rejectedByCompany: true\n                };\n              }\n            }\n            \n            // Existing code for when both parties have approved\n            if (\n              (statusField === 'advisor_status' && newStatus === APPLICATION_STATUS.APPROVED && app.approvalStatus?.approvedByCompany) ||\n              (statusField === 'company_status' && newStatus === APPLICATION_STATUS.APPROVED && app.approvalStatus?.approvedByAdvisor)\n            ) {\n              updatedApp.approvalStatus = {\n                ...app.approvalStatus,\n                isFullyApproved: true\n              };\n            }\n            \n            // If moving from APPROVED to another status, update approvalStatus\n            if (app.status === APPLICATION_STATUS.APPROVED && newStatus !== APPLICATION_STATUS.APPROVED) {\n              if (statusField === 'advisor_status') {\n                updatedApp.approvalStatus = {\n                  ...app.approvalStatus,\n                  approvedByAdvisor: false,\n                  isFullyApproved: false\n                };\n              } else if (statusField === 'company_status') {\n                updatedApp.approvalStatus = {\n                  ...app.approvalStatus,\n                  approvedByCompany: false,\n                  isFullyApproved: false\n                };\n              }\n            }\n            \n            return updatedApp;\n          }\n          return app;\n        })\n      );\n      \n      // Show success message\n      setSuccessMessage(`Se ha movido \"${application.client_name}\" a \"${STATUS_LABELS[newStatus as keyof typeof STATUS_LABELS]}\"`);\n      setTimeout(() => setSuccessMessage(null), 3000);\n    } catch (error) {\n      console.error('Error updating status:', error);\n      \n      // Reset the card to its original state\n      setAppsWithApproval(prev => \n        prev.map(app => \n          app.id === applicationId\n            ? { ...app, isMoving: false } \n            : app\n        )\n      );\n      \n      // Show error message\n      if (error instanceof Error) {\n        setErrorMessage(`Error: ${error.message}`);\n      } else {\n        setErrorMessage('Error desconocido al actualizar el estado');\n      }\n      setTimeout(() => setErrorMessage(null), 5000);\n    } finally {\n      // Clear processing state\n      setProcessingAppId(null);\n    }\n  };\n  \n  // Function to get the appropriate card color based on its approval status\n  const getCardColor = (app: ApplicationWithApproval) => {\n    // Here you can implement different styling based on approval status\n    if (app.isMoving) return 'card-moving';\n    \n    // Use the status that corresponds to the current view\n    const viewStatus = statusField === 'advisor_status' ? app.advisor_status :\n                       statusField === 'company_status' ? app.company_status :\n                       statusField === 'global_status' ? app.global_status : \n                       app.status;\n    \n    switch (viewStatus) {\n      case APPLICATION_STATUS.NEW:\n        return 'bg-white border-l-yellow-400';\n      case APPLICATION_STATUS.IN_REVIEW:\n        return 'bg-white border-l-blue-400';\n      case APPLICATION_STATUS.APPROVED:\n        return 'bg-white border-l-green-400';\n      case APPLICATION_STATUS.REJECTED:\n        return 'bg-white border-l-red-400';\n      case APPLICATION_STATUS.POR_DISPERSAR:\n        return 'bg-white border-l-purple-400';\n      case APPLICATION_STATUS.COMPLETED:\n        return 'bg-white border-l-slate-400';\n      default:\n        return 'bg-white';\n    }\n  };\n  \n  // Function to determine if a card can be dragged\n  const canDragCard = (app: ApplicationWithApproval) => {\n    // Implement your business rules for what cards can be dragged\n    // For example, you might not want completed applications to be moved\n    \n    // Simple example: don't allow dragging of cards that are already moving\n    if (app.isMoving) return false;\n    \n    // Don't allow dragging while any card is processing\n    if (processingAppId) return false;\n    \n    return true;\n  };\n  \n  // Function to get tooltip text for draggable status\n  const getDragTooltip = (app: ApplicationWithApproval) => {\n    if (processingAppId) return 'Procesando otra aplicación, espere un momento';\n    if (app.isMoving) return 'Actualizando estado...';\n    if (!canDragCard(app)) return 'Esta aplicación no puede ser movida';\n    return 'Arrastre para cambiar el estado';\n  };\n  \n  // Function to get CSS classes for draggable status\n  const getDraggableClasses = (app: ApplicationWithApproval) => {\n    if (!canDragCard(app)) return 'kanban-card-locked';\n    return 'kanban-card-draggable';\n  };\n  \n  // Función auxiliar para renderizar los indicadores de aprobación\n  const renderApprovalIndicators = (app: ApplicationWithApproval) => {\n    // Show both indicators for all roles, but highlight the relevant one for the current view\n    const isAdvisorView = statusField === 'advisor_status';\n    const isCompanyView = statusField === 'company_status';\n    \n    // Determinar el estado de aprobación/rechazo del asesor\n    let advisorBadgeClass = 'badge-warning'; // Por defecto: pendiente (amarillo)\n    let advisorStatusText = 'Pendiente';\n    \n    if (app.approvalStatus?.approvedByAdvisor || \n       (app.advisor_status === APPLICATION_STATUS.APPROVED)) {\n      advisorBadgeClass = 'badge-success text-white'; // Aprobado (verde)\n      advisorStatusText = 'Aprobado';\n    } else if (app.approvalStatus?.rejectedByAdvisor) {\n      // Solo marcar como rechazado si el asesor específicamente rechazó\n      advisorBadgeClass = 'badge-error text-white'; // Rechazado (rojo)\n      advisorStatusText = 'Rechazado';\n    }\n\n    // Determinar el estado de aprobación/rechazo de la empresa\n    let companyBadgeClass = 'badge-warning'; // Por defecto: pendiente (amarillo)\n    let companyStatusText = 'Pendiente';\n    \n    if (app.approvalStatus?.approvedByCompany || \n       (app.company_status === APPLICATION_STATUS.APPROVED)) {\n      companyBadgeClass = 'badge-success text-white'; // Aprobado (verde)\n      companyStatusText = 'Aprobado';\n    } else if (app.approvalStatus?.rejectedByCompany) {\n      // Solo marcar como rechazado si la empresa específicamente rechazó\n      companyBadgeClass = 'badge-error text-white'; // Rechazado (rojo)\n      companyStatusText = 'Rechazado';\n    }\n    \n    return (\n      <div className=\"flex flex-col space-y-1 mt-2\">\n        {/* Título del indicador */}\n        <div className=\"text-xs font-medium text-gray-500\">Estado de aprobación:</div>\n        \n        {/* Contenedor de indicadores */}\n        <div className=\"flex space-x-3 items-center\">\n          {/* Indicador del Asesor */}\n          <div className={`flex items-center gap-1 ${isAdvisorView ? 'p-1 bg-base-200 rounded-md border border-primary' : ''}`}>\n            <span \n              className={`badge badge-sm ${advisorBadgeClass}`} \n              title={`Asesor: ${advisorStatusText}`}\n            >\n              A\n            </span>\n            <span className=\"text-xs\">\n              {advisorStatusText}\n            </span>\n          </div>\n          \n          {/* Indicador de la Empresa */}\n          <div className={`flex items-center gap-1 ${isCompanyView ? 'p-1 bg-base-200 rounded-md border border-primary' : ''}`}>\n            <span \n              className={`badge badge-sm ${companyBadgeClass}`}\n              title={`Empresa: ${companyStatusText}`}\n            >\n              E\n            </span>\n            <span className=\"text-xs\">\n              {companyStatusText}\n            </span>\n          </div>\n        </div>\n        \n        {/* Mostrar un indicador especial cuando ambos han aprobado */}\n        {(app.approvalStatus?.approvedByAdvisor || app.advisor_status === APPLICATION_STATUS.APPROVED) && \n          (app.approvalStatus?.approvedByCompany || app.company_status === APPLICATION_STATUS.APPROVED) && (\n          <div className=\"flex items-center mt-1\">\n            <span className=\"badge badge-sm badge-success text-white\">\n              Aprobación completa\n            </span>\n          </div>\n        )}\n        \n        {/* Mostrar un indicador especial cuando ha sido rechazado */}\n        {(app.status === APPLICATION_STATUS.REJECTED || \n          app.approvalStatus?.rejectedByAdvisor || \n          app.approvalStatus?.rejectedByCompany) && (\n          <div className=\"flex items-center mt-1\">\n            <span className=\"badge badge-sm badge-error text-white\">\n              Solicitud rechazada{app.approvalStatus?.rejectedByAdvisor ? ' por Asesor' : \n                                 app.approvalStatus?.rejectedByCompany ? ' por Empresa' : ''}\n            </span>\n          </div>\n        )}\n      </div>\n    );\n  };\n  \n  const getApplicationTag = (type: string, financingType?: string) => {\n    // Get the human-readable label\n    const label = APPLICATION_TYPE_LABELS[type] || type;\n    \n    // Si es un plan seleccionado y tiene tipo de financiamiento, mostrar eso en lugar del tipo de aplicación\n    if (type === 'selected_plans' && financingType) {\n      const financingLabel = financingType === 'producto' ? 'Financiamiento de Producto' : \n                           financingType === 'personal' ? 'Crédito Personal' : \n                           financingType;\n      \n      const bgColorClass = financingType === 'producto' ? 'bg-indigo-100 text-indigo-800' : \n                         financingType === 'personal' ? 'bg-purple-100 text-purple-800' : \n                         'bg-blue-100 text-blue-800';\n      \n      return (\n        <span className={`application-tag ${bgColorClass}`}>\n          {financingLabel}\n        </span>\n      );\n    }\n    \n    // Funcionamiento original para otros tipos\n    switch (type) {\n      case 'selected_plans':\n        return (\n          <span className=\"application-tag bg-blue-100 text-blue-800\">\n            {label}\n          </span>\n        );\n      case 'cash_requests':\n        return (\n          <span className=\"application-tag bg-green-100 text-green-800\">\n            {label}\n          </span>\n        );\n      case 'product_simulations':\n        return (\n          <span className=\"application-tag bg-orange-100 text-orange-800\">\n            {label}\n          </span>\n        );\n      case 'AUTO_LOAN':\n        return (\n          <span className=\"application-tag bg-purple-100 text-purple-800\">\n            {label}\n          </span>\n        );\n      case 'CAR_BACKED_LOAN':\n        return (\n          <span className=\"application-tag bg-indigo-100 text-indigo-800\">\n            {label}\n          </span>\n        );\n      case 'PERSONAL_LOAN':\n        return (\n          <span className=\"application-tag bg-pink-100 text-pink-800\">\n            {label}\n          </span>\n        );\n      case 'CASH_ADVANCE':\n        return (\n          <span className=\"application-tag bg-yellow-100 text-yellow-800\">\n            {label}\n          </span>\n        );\n      default:\n        return (\n          <span className=\"application-tag bg-gray-100 text-gray-800\">\n            {label || type}\n          </span>\n        );\n    }\n  };\n  \n  // CSS for the Kanban board\n  const customStyles = `\n    .custom-scrollbar::-webkit-scrollbar {\n      width: 8px;\n      height: 8px;\n    }\n    \n    .custom-scrollbar::-webkit-scrollbar-track {\n      background: #f1f1f1;\n      border-radius: 10px;\n    }\n    \n    .custom-scrollbar::-webkit-scrollbar-thumb {\n      background: #888;\n      border-radius: 10px;\n    }\n    \n    .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n      background: #555;\n    }\n    \n    .kanban-card {\n      transition: transform 0.2s ease-in-out, opacity 0.2s ease-in-out, box-shadow 0.3s ease-in-out, border-color 0.3s ease;\n      touch-action: none;\n      user-select: none;\n      will-change: transform, opacity;\n    }\n    \n    .kanban-card-draggable {\n      cursor: grab !important;\n      position: relative;\n    }\n    \n    .kanban-card-draggable:hover {\n      transform: translateY(-4px);\n      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.15);\n      border-color: #a855f7;\n      z-index: 10;\n    }\n    \n    .kanban-card-draggable:active {\n      cursor: grabbing !important;\n    }\n    \n    .kanban-card-locked {\n      position: relative;\n      cursor: not-allowed !important;\n      opacity: 0.8;\n    }\n    \n    .card-moving {\n      opacity: 0.7;\n      background-color: #f9fafb;\n    }\n    \n    .drag-over {\n      background-color: #f3f4f6;\n    }\n    \n    @keyframes processingPulse {\n      0% { box-shadow: 0 0 0 0 rgba(168, 85, 247, 0.4); }\n      70% { box-shadow: 0 0 0 10px rgba(168, 85, 247, 0); }\n      100% { box-shadow: 0 0 0 0 rgba(168, 85, 247, 0); }\n    }\n    \n    .processing {\n      animation: processingPulse 1.5s infinite;\n    }\n\n    .application-tag {\n      display: inline-block;\n      font-size: 0.7rem;\n      padding: 0.15rem 0.4rem;\n      border-radius: 0.25rem;\n      font-weight: 500;\n    }\n\n    .approval-indicators {\n      display: flex;\n      margin-top: 0.5rem;\n      margin-bottom: 0.5rem;\n      gap: 0.5rem;\n    }\n    \n    .approval-indicator {\n      display: flex;\n      align-items: center;\n      gap: 0.25rem;\n    }\n    \n    .approval-indicator-dot {\n      width: 14px;\n      height: 14px;\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border: 1px solid #e2e8f0;\n      transition: all 0.2s ease;\n    }\n    \n    .approval-indicator-dot.approved {\n      background-color: #22c55e;\n      border-color: #16a34a;\n      box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.2);\n    }\n    \n    .approval-indicator-dot.pending {\n      background-color: #d1d5db;\n      border-color: #9ca3af;\n    }\n    \n    .approval-indicator-label {\n      font-size: 0.75rem;\n      font-weight: 500;\n    }\n    \n    .approval-indicator-label.approved {\n      color: #16a34a;\n    }\n    \n    .approval-indicator-label.pending {\n      color: #6b7280;\n    }\n\n    .tag-product {\n      background-color: #e0f2fe;\n      color: #0369a1;\n    }\n\n    .tag-cash {\n      background-color: #dcfce7;\n      color: #15803d;\n    }\n\n    .tag-selected {\n      background-color: #f3e8ff;\n      color: #7e22ce;\n    }\n\n    .column-header {\n      font-weight: 600;\n      padding: 0.75rem;\n      border-radius: 0.5rem;\n      margin-bottom: 1rem;\n    }\n\n    .column-count {\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      width: 1.5rem;\n      height: 1.5rem;\n      border-radius: 9999px;\n      font-size: 0.75rem;\n      font-weight: 600;\n      background-color: white;\n      color: #4b5563;\n      margin-left: 0.5rem;\n    }\n  `;\n  \n    return (\n    <div className=\"kanban-board-container bg-base-100 p-2\">\n      <style dangerouslySetInnerHTML={{ __html: customStyles }} />\n      \n      {/* Indicador permanente de filtro de Planes Seleccionados */}\n      <div className=\"flex justify-center mb-4\">\n        <div className=\"badge badge-lg badge-accent gap-2\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" className=\"inline-block w-4 h-4 stroke-current\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n          </svg>\n          Solo Planes Seleccionados\n        </div>\n      </div>\n      \n      {/* Messages display area */}\n      {errorMessage && (\n        <div className=\"alert alert-error shadow-lg mb-4 mx-2\">\n          <div>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"stroke-current flex-shrink-0 h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\n            <span>{errorMessage}</span>\n          </div>\n          <div className=\"flex-none\">\n            <button onClick={() => setErrorMessage(null)} className=\"btn btn-sm btn-ghost\">Cerrar</button>\n          </div>\n        </div>\n      )}\n      \n      {warnMessage && (\n        <div className=\"alert alert-warning shadow-lg mb-4 mx-2\">\n          <div>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"stroke-current flex-shrink-0 h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" /></svg>\n            <span>{warnMessage}</span>\n          </div>\n          <div className=\"flex-none\">\n            <button onClick={() => setWarnMessage(null)} className=\"btn btn-sm btn-ghost\">Cerrar</button>\n          </div>\n        </div>\n      )}\n      \n      {successMessage && (\n        <div className=\"alert alert-success shadow-lg mb-4 mx-2\">\n          <div>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"stroke-current flex-shrink-0 h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\n            <span>{successMessage}</span>\n          </div>\n          <div className=\"flex-none\">\n            <button onClick={() => setSuccessMessage(null)} className=\"btn btn-sm btn-ghost\">Cerrar</button>\n          </div>\n        </div>\n      )}\n      \n      {/* Loading indicator */}\n      {isLoading ? (\n        <div className=\"flex items-center justify-center h-24\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n          <span className=\"ml-2 text-gray-600\">Cargando aplicaciones...</span>\n              </div>\n      ) : error ? (\n        <div className=\"alert alert-error shadow-lg mb-4\">\n          <div>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"stroke-current flex-shrink-0 h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\n            <span>Error: {error}</span>\n            </div>\n        </div>\n      ) : (\n        // The actual Kanban board grid\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4\">\n          {/* New Applications */}\n          <div className=\"kanban-column bg-base-200 rounded-lg p-4 h-full\">\n            <div className=\"column-header mb-4\">\n              <h3 className=\"text-lg font-bold flex items-center\">\n                <span className=\"w-3 h-3 rounded-full bg-yellow-400 mr-2\"></span>\n                {STATUS_LABELS[APPLICATION_STATUS.NEW]} ({getApplicationsByStatus(APPLICATION_STATUS.NEW).length})\n              </h3>\n            </div>\n            <div \n              className=\"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\"\n              onDragOver={handleDragOver}\n              onDragLeave={handleDragLeave}\n              onDrop={(e) => handleDrop(e, APPLICATION_STATUS.NEW)}\n            >\n              {getVisibleApplications(APPLICATION_STATUS.NEW).map((app) => (\n                <div \n                  key={app.id}\n                  className={`kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`}\n                  draggable={canDragCard(app)}\n                  onDragStart={canDragCard(app) ? (e) => handleDragStart(e, app) : undefined}\n                  onDragEnd={handleDragEnd}\n                  title={getDragTooltip(app)}\n                >\n                  <div className=\"flex justify-between items-start mb-2\">\n                    <h4 className=\"font-semibold text-gray-800\">{app.client_name || \"Cliente sin nombre\"}</h4>\n                    {getApplicationTag(app.application_type, app.financing_type)}\n          </div>\n                  <div className=\"text-sm text-gray-600 mb-2\">\n                    {app.company_name && <p>{app.company_name}</p>}\n                  </div>\n                  <div className=\"text-sm font-medium text-gray-900 mb-1\">\n                    {formatCurrency(app.amount)}\n                  </div>\n                  <div className=\"flex flex-col mt-2 pt-2 border-t border-gray-100\">\n                    {renderApprovalIndicators(app)}\n                    <div className=\"flex justify-between items-center mt-2\">\n                      <span className=\"text-xs text-gray-500\">ID: {app.id.substring(0, 5)}...</span>\n                      <Link \n                        to={`/applications/${app.id}`} \n                        className=\"btn btn-xs btn-primary\"\n                      >\n                        VER DETALLE\n                      </Link>\n                    </div>\n                  </div>\n                </div>\n              ))}\n              {getApplicationsByStatus(APPLICATION_STATUS.NEW).length > 5 && !expandedColumns[APPLICATION_STATUS.NEW] && (\n                <button \n                  onClick={() => toggleColumnExpand(APPLICATION_STATUS.NEW)}\n                  className=\"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\"\n                >\n                  Ver {getApplicationsByStatus(APPLICATION_STATUS.NEW).length - 5} más\n                </button>\n              )}\n              {expandedColumns[APPLICATION_STATUS.NEW] && (\n                <button \n                  onClick={() => toggleColumnExpand(APPLICATION_STATUS.NEW)}\n                  className=\"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\"\n                >\n                  Ver menos\n                </button>\n              )}\n              {getApplicationsByStatus(APPLICATION_STATUS.NEW).length === 0 && (\n                <div className=\"text-center py-4 text-gray-500 italic\">\n                  No hay solicitudes\n                </div>\n              )}\n            </div>\n                </div>\n                \n          {/* In Review Applications */}\n          <div className=\"kanban-column bg-base-200 rounded-lg p-4 h-full\">\n            <div className=\"column-header mb-4\">\n              <h3 className=\"text-lg font-bold flex items-center\">\n                <span className=\"w-3 h-3 rounded-full bg-blue-400 mr-2\"></span>\n                {STATUS_LABELS[APPLICATION_STATUS.IN_REVIEW]} ({getApplicationsByStatus(APPLICATION_STATUS.IN_REVIEW).length})\n              </h3>\n            </div>\n            <div \n              className=\"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\"\n              onDragOver={handleDragOver}\n              onDragLeave={handleDragLeave}\n              onDrop={(e) => handleDrop(e, APPLICATION_STATUS.IN_REVIEW)}\n            >\n              {getVisibleApplications(APPLICATION_STATUS.IN_REVIEW).map((app) => (\n                <div \n                  key={app.id}\n                  className={`kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`}\n                  draggable={canDragCard(app)}\n                  onDragStart={canDragCard(app) ? (e) => handleDragStart(e, app) : undefined}\n                  onDragEnd={handleDragEnd}\n                  title={getDragTooltip(app)}\n                >\n                  <div className=\"flex justify-between items-start mb-2\">\n                    <h4 className=\"font-semibold text-gray-800\">{app.client_name || \"Cliente sin nombre\"}</h4>\n                    {getApplicationTag(app.application_type, app.financing_type)}\n                  </div>\n                  <div className=\"text-sm text-gray-600 mb-2\">\n                    {app.company_name && <p>{app.company_name}</p>}\n                  </div>\n                  <div className=\"text-sm font-medium text-gray-900 mb-1\">\n                    {formatCurrency(app.amount)}\n                  </div>\n                  <div className=\"flex flex-col mt-2 pt-2 border-t border-gray-100\">\n                    {renderApprovalIndicators(app)}\n                    <div className=\"flex justify-between items-center mt-2\">\n                      <span className=\"text-xs text-gray-500\">ID: {app.id.substring(0, 5)}...</span>\n                      <Link \n                        to={`/applications/${app.id}`} \n                        className=\"btn btn-xs btn-primary\"\n                      >\n                        VER DETALLE\n                      </Link>\n                    </div>\n                  </div>\n                </div>\n              ))}\n              {getApplicationsByStatus(APPLICATION_STATUS.IN_REVIEW).length > 5 && !expandedColumns[APPLICATION_STATUS.IN_REVIEW] && (\n                <button \n                  onClick={() => toggleColumnExpand(APPLICATION_STATUS.IN_REVIEW)}\n                  className=\"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\"\n                >\n                  Ver {getApplicationsByStatus(APPLICATION_STATUS.IN_REVIEW).length - 5} más\n                </button>\n              )}\n              {expandedColumns[APPLICATION_STATUS.IN_REVIEW] && (\n                <button \n                  onClick={() => toggleColumnExpand(APPLICATION_STATUS.IN_REVIEW)}\n                  className=\"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\"\n                >\n                  Ver menos\n                </button>\n              )}\n              {getApplicationsByStatus(APPLICATION_STATUS.IN_REVIEW).length === 0 && (\n                <div className=\"text-center py-4 text-gray-500 italic\">\n                  No hay solicitudes\n                </div>\n              )}\n                </div>\n                </div>\n                \n          {/* Approved Applications */}\n          <div className=\"kanban-column bg-base-200 rounded-lg p-4 h-full\">\n            <div className=\"column-header mb-4\">\n              <h3 className=\"text-lg font-bold flex items-center\">\n                <span className=\"w-3 h-3 rounded-full bg-green-400 mr-2\"></span>\n                {STATUS_LABELS[APPLICATION_STATUS.APPROVED]} ({getApplicationsByStatus(APPLICATION_STATUS.APPROVED).length})\n              </h3>\n                </div>\n            <div \n              className=\"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\"\n              onDragOver={handleDragOver}\n              onDragLeave={handleDragLeave}\n              onDrop={(e) => handleDrop(e, APPLICATION_STATUS.APPROVED)}\n            >\n              {getVisibleApplications(APPLICATION_STATUS.APPROVED).map((app) => (\n                <div \n                  key={app.id}\n                  className={`kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`}\n                  draggable={canDragCard(app)}\n                  onDragStart={canDragCard(app) ? (e) => handleDragStart(e, app) : undefined}\n                  onDragEnd={handleDragEnd}\n                  title={getDragTooltip(app)}\n                >\n                  <div className=\"flex justify-between items-start mb-2\">\n                    <h4 className=\"font-semibold text-gray-800\">{app.client_name || \"Cliente sin nombre\"}</h4>\n                    {getApplicationTag(app.application_type, app.financing_type)}\n                </div>\n                  <div className=\"text-sm text-gray-600 mb-2\">\n                    {app.company_name && <p>{app.company_name}</p>}\n              </div>\n                  <div className=\"text-sm font-medium text-gray-900 mb-1\">\n                    {formatCurrency(app.amount)}\n                  </div>\n                  <div className=\"flex flex-col mt-2 pt-2 border-t border-gray-100\">\n                    {renderApprovalIndicators(app)}\n                    <div className=\"flex justify-between items-center mt-2\">\n                      <span className=\"text-xs text-gray-500\">ID: {app.id.substring(0, 5)}...</span>\n                      <Link \n                        to={`/applications/${app.id}`} \n                        className=\"btn btn-xs btn-primary\"\n                      >\n                        VER DETALLE\n                      </Link>\n              </div>\n                  </div>\n                </div>\n              ))}\n              {getApplicationsByStatus(APPLICATION_STATUS.APPROVED).length > 5 && !expandedColumns[APPLICATION_STATUS.APPROVED] && (\n                <button \n                  onClick={() => toggleColumnExpand(APPLICATION_STATUS.APPROVED)}\n                  className=\"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\"\n                >\n                  Ver {getApplicationsByStatus(APPLICATION_STATUS.APPROVED).length - 5} más\n                </button>\n              )}\n              {expandedColumns[APPLICATION_STATUS.APPROVED] && (\n                <button \n                  onClick={() => toggleColumnExpand(APPLICATION_STATUS.APPROVED)}\n                  className=\"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\"\n                >\n                  Ver menos\n                </button>\n              )}\n              {getApplicationsByStatus(APPLICATION_STATUS.APPROVED).length === 0 && (\n                <div className=\"text-center py-4 text-gray-500 italic\">\n                  No hay solicitudes\n            </div>\n          )}\n        </div>\n      </div>\n      \n          {/* Ready for Disbursement (Por Dispersar) */}\n          <div className=\"kanban-column bg-base-200 rounded-lg p-4 h-full\">\n            <div className=\"column-header mb-4\">\n              <h3 className=\"text-lg font-bold flex items-center\">\n                <span className=\"w-3 h-3 rounded-full bg-purple-400 mr-2\"></span>\n                {STATUS_LABELS[APPLICATION_STATUS.POR_DISPERSAR]} ({getApplicationsByStatus(APPLICATION_STATUS.POR_DISPERSAR).length})\n              </h3>\n            </div>\n            <div \n              className=\"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\"\n              onDragOver={handleDragOver}\n              onDragLeave={handleDragLeave}\n              onDrop={(e) => handleDrop(e, APPLICATION_STATUS.POR_DISPERSAR)}\n            >\n              {getVisibleApplications(APPLICATION_STATUS.POR_DISPERSAR).map((app) => (\n                <div \n                  key={app.id}\n                  className={`kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`}\n                  draggable={canDragCard(app)}\n                  onDragStart={canDragCard(app) ? (e) => handleDragStart(e, app) : undefined}\n                  onDragEnd={handleDragEnd}\n                  title={getDragTooltip(app)}\n                >\n                  <div className=\"flex justify-between items-start mb-2\">\n                    <h4 className=\"font-semibold text-gray-800\">{app.client_name || \"Cliente sin nombre\"}</h4>\n                    {getApplicationTag(app.application_type, app.financing_type)}\n              </div>\n                  <div className=\"text-sm text-gray-600 mb-2\">\n                    {app.company_name && <p>{app.company_name}</p>}\n                    </div>\n                  <div className=\"text-sm font-medium text-gray-900 mb-1\">\n                    {formatCurrency(app.amount)}\n                  </div>\n                  <div className=\"flex flex-col mt-2 pt-2 border-t border-gray-100\">\n                    {renderApprovalIndicators(app)}\n                    <div className=\"flex justify-between items-center mt-2\">\n                      <span className=\"text-xs text-gray-500\">ID: {app.id.substring(0, 5)}...</span>\n                      <Link \n                        to={`/applications/${app.id}`} \n                        className=\"btn btn-xs btn-primary\"\n                      >\n                        VER DETALLE\n                      </Link>\n                    </div>\n                  </div>\n                </div>\n              ))}\n              {getApplicationsByStatus(APPLICATION_STATUS.POR_DISPERSAR).length > 5 && !expandedColumns[APPLICATION_STATUS.POR_DISPERSAR] && (\n                <button \n                  onClick={() => toggleColumnExpand(APPLICATION_STATUS.POR_DISPERSAR)}\n                  className=\"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\"\n                >\n                  Ver {getApplicationsByStatus(APPLICATION_STATUS.POR_DISPERSAR).length - 5} más\n                </button>\n              )}\n              {expandedColumns[APPLICATION_STATUS.POR_DISPERSAR] && (\n                <button \n                  onClick={() => toggleColumnExpand(APPLICATION_STATUS.POR_DISPERSAR)}\n                  className=\"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\"\n                >\n                  Ver menos\n                </button>\n              )}\n              {getApplicationsByStatus(APPLICATION_STATUS.POR_DISPERSAR).length === 0 && (\n                <div className=\"text-center py-4 text-gray-500 italic\">\n                  No hay solicitudes\n                </div>\n              )}\n            </div>\n          </div>\n          \n          {/* Completed Applications */}\n          <div className=\"kanban-column bg-base-200 rounded-lg p-4 h-full\">\n            <div className=\"column-header mb-4\">\n              <h3 className=\"text-lg font-bold flex items-center\">\n                <span className=\"w-3 h-3 rounded-full bg-slate-400 mr-2\"></span>\n                {STATUS_LABELS[APPLICATION_STATUS.COMPLETED]} ({getApplicationsByStatus(APPLICATION_STATUS.COMPLETED).length})\n              </h3>\n            </div>\n            <div \n              className=\"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\"\n              onDragOver={handleDragOver}\n              onDragLeave={handleDragLeave}\n              onDrop={(e) => handleDrop(e, APPLICATION_STATUS.COMPLETED)}\n            >\n              {getVisibleApplications(APPLICATION_STATUS.COMPLETED).map((app) => (\n                      <div\n                        key={app.id}\n                  className={`kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`}\n                  draggable={canDragCard(app)}\n                  onDragStart={canDragCard(app) ? (e) => handleDragStart(e, app) : undefined}\n                  onDragEnd={handleDragEnd}\n                  title={getDragTooltip(app)}\n                >\n                          <div className=\"flex justify-between items-start mb-2\">\n                    <h4 className=\"font-semibold text-gray-800\">{app.client_name || \"Cliente sin nombre\"}</h4>\n                    {getApplicationTag(app.application_type, app.financing_type)}\n                            </div>\n                  <div className=\"text-sm text-gray-600 mb-2\">\n                    {app.company_name && <p>{app.company_name}</p>}\n                          </div>\n                  <div className=\"text-sm font-medium text-gray-900 mb-1\">\n                    {formatCurrency(app.amount)}\n                            </div>\n                  <div className=\"flex flex-col mt-2 pt-2 border-t border-gray-100\">\n                    {renderApprovalIndicators(app)}\n                    <div className=\"flex justify-between items-center mt-2\">\n                      <span className=\"text-xs text-gray-500\">ID: {app.id.substring(0, 5)}...</span>\n                      <Link \n                        to={`/applications/${app.id}`} \n                        className=\"btn btn-xs btn-primary\"\n                      >\n                        VER DETALLE\n                      </Link>\n                            </div>\n                  </div>\n                </div>\n              ))}\n              {getApplicationsByStatus(APPLICATION_STATUS.COMPLETED).length > 5 && !expandedColumns[APPLICATION_STATUS.COMPLETED] && (\n                <button \n                  onClick={() => toggleColumnExpand(APPLICATION_STATUS.COMPLETED)}\n                  className=\"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\"\n                >\n                  Ver {getApplicationsByStatus(APPLICATION_STATUS.COMPLETED).length - 5} más\n                </button>\n              )}\n              {expandedColumns[APPLICATION_STATUS.COMPLETED] && (\n                <button \n                  onClick={() => toggleColumnExpand(APPLICATION_STATUS.COMPLETED)}\n                  className=\"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\"\n                >\n                  Ver menos\n                </button>\n              )}\n              {getApplicationsByStatus(APPLICATION_STATUS.COMPLETED).length === 0 && (\n                <div className=\"text-center py-4 text-gray-500 italic\">\n                  No hay solicitudes\n                </div>\n              )}\n            </div>\n                            </div>\n                            \n          {/* Rejected Applications */}\n          <div className=\"kanban-column bg-base-200 rounded-lg p-4 h-full\">\n            <div className=\"column-header mb-4\">\n              <h3 className=\"text-lg font-bold flex items-center\">\n                <span className=\"w-3 h-3 rounded-full bg-red-400 mr-2\"></span>\n                {STATUS_LABELS[APPLICATION_STATUS.REJECTED]} ({getApplicationsByStatus(APPLICATION_STATUS.REJECTED).length})\n              </h3>\n            </div>\n            <div \n              className=\"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\"\n              onDragOver={handleDragOver}\n              onDragLeave={handleDragLeave}\n              onDrop={(e) => handleDrop(e, APPLICATION_STATUS.REJECTED)}\n            >\n              {getVisibleApplications(APPLICATION_STATUS.REJECTED).map((app) => (\n                <div \n                  key={app.id}\n                  className={`kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`}\n                  draggable={canDragCard(app)}\n                  onDragStart={canDragCard(app) ? (e) => handleDragStart(e, app) : undefined}\n                  onDragEnd={handleDragEnd}\n                  title={getDragTooltip(app)}\n                >\n                  <div className=\"flex justify-between items-start mb-2\">\n                    <h4 className=\"font-semibold text-gray-800\">{app.client_name || \"Cliente sin nombre\"}</h4>\n                    {getApplicationTag(app.application_type, app.financing_type)}\n                  </div>\n                  <div className=\"text-sm text-gray-600 mb-2\">\n                    {app.company_name && <p>{app.company_name}</p>}\n                  </div>\n                  <div className=\"text-sm font-medium text-gray-900 mb-1\">\n                    {formatCurrency(app.amount)}\n                  </div>\n                  <div className=\"flex flex-col mt-2 pt-2 border-t border-gray-100\">\n                    {renderApprovalIndicators(app)}\n                    <div className=\"flex justify-between items-center mt-2\">\n                      <span className=\"text-xs text-gray-500\">ID: {app.id.substring(0, 5)}...</span>\n                      <Link \n                        to={`/applications/${app.id}`} \n                        className=\"btn btn-xs btn-primary\"\n                      >\n                        VER DETALLE\n                              </Link>\n                            </div>\n                          </div>\n                        </div>\n              ))}\n              {getApplicationsByStatus(APPLICATION_STATUS.REJECTED).length > 5 && !expandedColumns[APPLICATION_STATUS.REJECTED] && (\n                <button \n                  onClick={() => toggleColumnExpand(APPLICATION_STATUS.REJECTED)}\n                  className=\"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\"\n                >\n                  Ver {getApplicationsByStatus(APPLICATION_STATUS.REJECTED).length - 5} más\n                </button>\n              )}\n              {expandedColumns[APPLICATION_STATUS.REJECTED] && (\n                <button \n                  onClick={() => toggleColumnExpand(APPLICATION_STATUS.REJECTED)}\n                  className=\"w-full py-2 text-sm text-primary hover:text-primary-focus hover:bg-base-200 rounded-md text-center transition-colors\"\n                >\n                  Ver menos\n                </button>\n              )}\n              {getApplicationsByStatus(APPLICATION_STATUS.REJECTED).length === 0 && (\n                <div className=\"text-center py-4 text-gray-500 italic\">\n                  No hay solicitudes\n                      </div>\n                )}\n              </div>\n            </div>\n      </div>\n      )}\n    </div>\n  );\n};\n\nexport default KanbanBoard; "],"mappings":"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,cAAc;QACjB,oBACE/K,OAAA;UAAM0K,SAAS,EAAC,+CAA+C;UAAAC,QAAA,EAC5DQ;QAAK;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CAAC;MAEX;QACE,oBACE/K,OAAA;UAAM0K,SAAS,EAAC,2CAA2C;UAAAC,QAAA,EACxDQ,KAAK,IAAI3I;QAAI;UAAAoI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC;IAEb;EACF,CAAC;;EAED;EACA,MAAMO,YAAY,GAAG;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;EAEC,oBACAtL,OAAA;IAAK0K,SAAS,EAAC,wCAAwC;IAAAC,QAAA,gBACrD3K,OAAA;MAAOuL,uBAAuB,EAA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}