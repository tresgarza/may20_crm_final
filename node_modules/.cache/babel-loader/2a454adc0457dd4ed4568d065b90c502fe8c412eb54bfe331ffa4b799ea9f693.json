{"ast":null,"code":"var _jsxFileName = \"/Users/diegogg98/NEW CRM MAR18/src/components/ui/KanbanBoard.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Link } from 'react-router-dom';\nimport { APPLICATION_STATUS, STATUS_LABELS } from '../../utils/constants/statuses';\nimport { usePermissions } from '../../contexts/PermissionsContext';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { formatCurrency } from '../../utils/formatters';\n\n// NOTA: La funcionalidad de tiempo real ha sido desactivada \n// debido a problemas de compatibilidad\n// Las actualizaciones se reflejarán al recargar la página o cuando el componente\n// padre envíe nuevas aplicaciones como prop\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Utility functions outside of component scope\nconst escapeSQLString = str => {\n  if (!str) return '';\n  return str.replace(/'/g, \"''\");\n};\nconst cast = value => {\n  return value;\n};\nconst KanbanBoard = ({\n  applications,\n  onStatusChange\n}) => {\n  _s();\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [warnMessage, setWarnMessage] = useState(null);\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [processingAppId, setProcessingAppId] = useState(null);\n  const [appsWithApproval, setAppsWithApproval] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Añadir contexto de permisos para verificar el rol del usuario\n  const {\n    isAdvisor,\n    isCompanyAdmin,\n    getEntityFilter\n  } = usePermissions();\n  const {\n    user\n  } = useAuth();\n\n  // Reference to track if we should refresh data\n  const pendingRefreshRef = useRef(false);\n  const dragItemRef = useRef(null);\n\n  // Set up applications when component mounts\n  useEffect(() => {\n    setIsLoading(true);\n    try {\n      // Map the applications to our simplified format and fetch approval status if needed\n      const fetchApplicationsWithApproval = async () => {\n        const mappedApps = await Promise.all(applications.map(async app => {\n          // Ensure status is valid for Kanban\n          let status = app.status || APPLICATION_STATUS.NEW;\n\n          // If status is 'pending' or 'solicitud', show in \"New\" column\n          if (status === 'pending' || status === 'solicitud') {\n            status = APPLICATION_STATUS.NEW;\n          }\n\n          // Use the actual values from the database for approval statuses\n          const approvalData = {\n            approvedByAdvisor: app.approved_by_advisor === true,\n            approvedByCompany: app.approved_by_company === true,\n            isFullyApproved: app.approved_by_advisor === true && app.approved_by_company === true\n          };\n\n          // Determine separate statuses for advisor and company\n          // For now, derive them from the approval status and main status\n          let advisorStatus = status;\n          let companyStatus = status;\n\n          // If in review or approved, set individual statuses based on approvals\n          if (status === APPLICATION_STATUS.IN_REVIEW || status === APPLICATION_STATUS.APPROVED) {\n            if (app.approved_by_advisor) {\n              advisorStatus = APPLICATION_STATUS.APPROVED;\n            }\n            if (app.approved_by_company) {\n              companyStatus = APPLICATION_STATUS.APPROVED;\n            }\n          }\n\n          // If both are approved, both should see approved\n          if (app.approved_by_advisor && app.approved_by_company) {\n            advisorStatus = APPLICATION_STATUS.APPROVED;\n            companyStatus = APPLICATION_STATUS.APPROVED;\n          }\n\n          // For global statuses like POR_DISPERSAR and COMPLETED, keep them synchronized\n          if (status === APPLICATION_STATUS.POR_DISPERSAR || status === APPLICATION_STATUS.COMPLETED || status === APPLICATION_STATUS.REJECTED) {\n            advisorStatus = status;\n            companyStatus = status;\n          }\n          console.log(`Application ${app.id} approval status:`, approvalData, 'Current user role:', user === null || user === void 0 ? void 0 : user.role);\n          return {\n            id: app.id,\n            status,\n            // This will be used for display in kanban based on user role\n            client_name: app.client_name || 'Cliente sin nombre',\n            company_name: app.company_name,\n            amount: app.amount || 0,\n            application_type: app.application_type || 'Desconocido',\n            isMoving: false,\n            approvalStatus: approvalData,\n            advisorStatus,\n            companyStatus,\n            globalStatus: status\n          };\n        }));\n\n        // Filter the apps based on the user's role for status display\n        const filteredApps = mappedApps.map(app => {\n          // Determine which status to use based on the user's role\n          if (isAdvisor()) {\n            return {\n              ...app,\n              status: app.advisorStatus || app.status\n            };\n          } else if (isCompanyAdmin()) {\n            return {\n              ...app,\n              status: app.companyStatus || app.status\n            };\n          }\n          // Admin sees the global status\n          return app;\n        });\n        console.log('Aplicaciones procesadas para Kanban:', filteredApps);\n        setAppsWithApproval(filteredApps);\n        setIsLoading(false);\n      };\n      fetchApplicationsWithApproval();\n    } catch (error) {\n      console.error('Error setting up applications:', error);\n      setErrorMessage('Error al cargar las aplicaciones');\n      setIsLoading(false);\n    }\n  }, [applications, user === null || user === void 0 ? void 0 : user.role, isAdvisor, isCompanyAdmin]);\n\n  // Function to update local approval status\n  const updateLocalApprovalStatus = useCallback((applicationId, newData, newStatus) => {\n    setAppsWithApproval(prevApps => prevApps.map(app => {\n      if (app.id === applicationId) {\n        // If we have a status change, update it\n        const updatedStatus = newStatus || app.status;\n\n        // Use the actual values from the update data\n        const approvalStatus = {\n          approvedByAdvisor: newData.approved_by_advisor === true,\n          approvedByCompany: newData.approved_by_company === true,\n          isFullyApproved: newData.approved_by_advisor === true && newData.approved_by_company === true\n        };\n        return {\n          ...app,\n          status: updatedStatus,\n          approvalStatus\n        };\n      }\n      return app;\n    }));\n  }, []);\n\n  // Get statuses to display as columns\n  const statuses = [APPLICATION_STATUS.NEW, APPLICATION_STATUS.IN_REVIEW, APPLICATION_STATUS.APPROVED, APPLICATION_STATUS.REJECTED, APPLICATION_STATUS.POR_DISPERSAR, APPLICATION_STATUS.COMPLETED];\n\n  // Group applications by status\n  const getApplicationsByStatus = status => {\n    return appsWithApproval.filter(app => app.status === status);\n  };\n  const handleDragStart = (e, application) => {\n    // Store the drag start element for later reference\n    dragItemRef.current = e.currentTarget;\n\n    // Add moving class to the dragged item\n    e.currentTarget.classList.add('card-moving');\n\n    // Set the data for the drag operation\n    e.dataTransfer.setData('application/id', application.id);\n    e.dataTransfer.effectAllowed = 'move';\n\n    // Create a custom drag image for better UX\n    try {\n      const ghostElement = e.currentTarget.cloneNode(true);\n      ghostElement.style.position = 'absolute';\n      ghostElement.style.top = '-1000px';\n      ghostElement.style.opacity = '0.8';\n      ghostElement.style.transform = 'scale(0.8)';\n      ghostElement.style.width = `${e.currentTarget.offsetWidth}px`;\n      document.body.appendChild(ghostElement);\n      e.dataTransfer.setDragImage(ghostElement, 20, 20);\n\n      // Clean up the ghost element after a short delay\n      setTimeout(() => {\n        if (ghostElement.parentNode) {\n          document.body.removeChild(ghostElement);\n        }\n      }, 100);\n    } catch (error) {\n      console.warn('Failed to create custom drag image:', error);\n      // Fall back to default drag image\n    }\n  };\n  const handleDragEnd = e => {\n    // Remove dragging-related classes from the dragged item\n    if (dragItemRef.current) {\n      dragItemRef.current.classList.remove('card-moving');\n    }\n\n    // Get and remove any columns with drag-over class\n    const columns = document.querySelectorAll('.column-content');\n    columns.forEach(column => column.classList.remove('drag-over'));\n\n    // Clear the reference\n    dragItemRef.current = null;\n  };\n  const handleDragOver = e => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n\n    // Add a class to the drop target\n    e.currentTarget.classList.add('drag-over');\n  };\n  const handleDragLeave = e => {\n    // Remove the drag-over class\n    e.currentTarget.classList.remove('drag-over');\n  };\n  const canMoveToStatus = (applicationStatus, newStatus, application) => {\n    // Don't allow moving to the same status\n    if (applicationStatus === newStatus) return false;\n\n    // Get the current user role\n    const userIsAdvisor = isAdvisor();\n    const userIsCompanyAdmin = isCompanyAdmin();\n\n    // Status transition rules based on role\n    if (userIsAdvisor) {\n      // Advisor specific rules\n      if (applicationStatus === APPLICATION_STATUS.NEW) {\n        // Can only move from NEW to IN_REVIEW\n        return newStatus === APPLICATION_STATUS.IN_REVIEW;\n      } else if (applicationStatus === APPLICATION_STATUS.IN_REVIEW) {\n        // From IN_REVIEW, can move to NEW or APPROVED \n        if (newStatus === APPLICATION_STATUS.NEW) return true;\n        if (newStatus === APPLICATION_STATUS.APPROVED) {\n          // Advisor can approve their part\n          return true;\n        }\n        return false;\n      } else if (applicationStatus === APPLICATION_STATUS.APPROVED) {\n        // From APPROVED, advisor can't move application - it needs company approval too\n        return false;\n      } else if (applicationStatus === APPLICATION_STATUS.POR_DISPERSAR || applicationStatus === APPLICATION_STATUS.COMPLETED) {\n        // POR_DISPERSAR and COMPLETED are managed by the system, advisor can't move\n        return false;\n      }\n    } else if (userIsCompanyAdmin) {\n      // Company admin specific rules\n      if (applicationStatus === APPLICATION_STATUS.NEW) {\n        // Can move from NEW to IN_REVIEW\n        return newStatus === APPLICATION_STATUS.IN_REVIEW;\n      } else if (applicationStatus === APPLICATION_STATUS.IN_REVIEW) {\n        // From IN_REVIEW, can move to NEW or APPROVED\n        if (newStatus === APPLICATION_STATUS.NEW) return true;\n        if (newStatus === APPLICATION_STATUS.APPROVED) {\n          // Company can approve their part\n          return true;\n        }\n        return false;\n      } else if (applicationStatus === APPLICATION_STATUS.APPROVED) {\n        // From APPROVED, company can't move application - waiting for full approval\n        return false;\n      } else if (applicationStatus === APPLICATION_STATUS.POR_DISPERSAR) {\n        // From POR_DISPERSAR, can only move to COMPLETED\n        return newStatus === APPLICATION_STATUS.COMPLETED;\n      } else if (applicationStatus === APPLICATION_STATUS.COMPLETED) {\n        // Completed applications cannot be moved\n        return false;\n      }\n    } else {\n      // Admin rules (can move between all states)\n      if (applicationStatus === APPLICATION_STATUS.NEW) {\n        // Can only move from NEW to IN_REVIEW\n        return newStatus === APPLICATION_STATUS.IN_REVIEW;\n      } else if (applicationStatus === APPLICATION_STATUS.IN_REVIEW) {\n        // From IN_REVIEW, can move to NEW or can move to APPROVED only if both advisor and company have approved\n        // or if the current user can only set their own approval\n        if (newStatus === APPLICATION_STATUS.NEW) return true;\n        if (newStatus === APPLICATION_STATUS.APPROVED) {\n          var _application$approval, _application$approval2;\n          // For admins, need both approvals\n          return ((_application$approval = application.approvalStatus) === null || _application$approval === void 0 ? void 0 : _application$approval.approvedByAdvisor) === true && ((_application$approval2 = application.approvalStatus) === null || _application$approval2 === void 0 ? void 0 : _application$approval2.approvedByCompany) === true;\n        }\n        return false;\n      } else if (applicationStatus === APPLICATION_STATUS.APPROVED) {\n        // From APPROVED, can only move to IN_REVIEW or POR_DISPERSAR\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || newStatus === APPLICATION_STATUS.POR_DISPERSAR;\n      } else if (applicationStatus === APPLICATION_STATUS.POR_DISPERSAR) {\n        // From POR_DISPERSAR, can only move back to APPROVED or to COMPLETED\n        return newStatus === APPLICATION_STATUS.APPROVED || newStatus === APPLICATION_STATUS.COMPLETED;\n      } else if (applicationStatus === APPLICATION_STATUS.COMPLETED) {\n        // Completed applications cannot be moved\n        return false;\n      }\n    }\n\n    // Default: allow movement between states that don't have specific rules\n    return true;\n  };\n  const handleDrop = async (e, newStatus) => {\n    e.preventDefault();\n\n    // Clear styling\n    e.currentTarget.classList.remove('drag-over');\n\n    // Check if something is being dragged\n    if (!dragItemRef.current) {\n      console.warn('Nothing is being dragged');\n      return;\n    }\n\n    // Extract application data from the dataTransfer\n    const applicationId = e.dataTransfer.getData('application/id');\n    const application = appsWithApproval.find(app => app.id === applicationId);\n    if (!application) {\n      console.error('Application not found:', applicationId);\n      return;\n    }\n\n    // Don't allow dropping in the same column or if processing another application\n    if (application.status === newStatus || processingAppId !== null) {\n      return;\n    }\n\n    // Check if this transition is allowed\n    if (!canMoveToStatus(application.status, newStatus, application)) {\n      if (application.status === APPLICATION_STATUS.IN_REVIEW && newStatus === APPLICATION_STATUS.APPROVED) {\n        var _application$approval3, _application$approval4;\n        // Mensaje personalizado según el rol del usuario\n        if (isAdvisor() && !((_application$approval3 = application.approvalStatus) !== null && _application$approval3 !== void 0 && _application$approval3.approvedByAdvisor)) {\n          setWarnMessage('No puedes aprobar esta solicitud. Debes aprobarla primero desde la página de detalle.');\n        } else if (isCompanyAdmin() && !((_application$approval4 = application.approvalStatus) !== null && _application$approval4 !== void 0 && _application$approval4.approvedByCompany)) {\n          setWarnMessage('No puedes aprobar esta solicitud. Debes aprobarla primero desde la página de detalle.');\n        } else {\n          var _application$approval5, _application$approval6;\n          // Para otros roles, mostrar mensaje sobre ambas aprobaciones\n          const missingApprovals = [];\n          if (!((_application$approval5 = application.approvalStatus) !== null && _application$approval5 !== void 0 && _application$approval5.approvedByAdvisor)) missingApprovals.push('del asesor');\n          if (!((_application$approval6 = application.approvalStatus) !== null && _application$approval6 !== void 0 && _application$approval6.approvedByCompany)) missingApprovals.push('de la empresa');\n          setWarnMessage(`No se puede aprobar esta solicitud. Falta aprobación ${missingApprovals.join(' y ')}.`);\n        }\n        setTimeout(() => setWarnMessage(null), 5000);\n      } else {\n        // General transition not allowed message\n        setErrorMessage(`No se permite cambiar el estado de \"${STATUS_LABELS[application.status]}\" a \"${STATUS_LABELS[newStatus]}\"`);\n        setTimeout(() => setErrorMessage(null), 5000);\n      }\n      return;\n    }\n\n    // Bail if there's no status change handler\n    if (!onStatusChange) {\n      setWarnMessage('No tienes permisos para cambiar el estado de las solicitudes');\n      setTimeout(() => setWarnMessage(null), 3000);\n      return;\n    }\n\n    // Mark that we're processing this application\n    setProcessingAppId(applicationId);\n\n    // Mark this application as moving in the UI\n    setAppsWithApproval(prev => prev.map(app => app.id === applicationId ? {\n      ...app,\n      isMoving: true\n    } : app));\n    try {\n      // Determine which status we need to update based on user role\n      let updateData = {\n        status: newStatus // Default to updating global status\n      };\n\n      // For role-specific updates, also include the role's status field\n      if (isAdvisor()) {\n        updateData.advisorStatus = newStatus;\n\n        // If advisor is approving, mark approved_by_advisor automatically\n        if (newStatus === APPLICATION_STATUS.APPROVED) {\n          updateData.approved_by_advisor = true;\n          updateData.approval_date_advisor = new Date().toISOString();\n        }\n      } else if (isCompanyAdmin()) {\n        updateData.companyStatus = newStatus;\n\n        // If company is approving, mark approved_by_company automatically\n        if (newStatus === APPLICATION_STATUS.APPROVED) {\n          updateData.approved_by_company = true;\n          updateData.approval_date_company = new Date().toISOString();\n        }\n      }\n\n      // Call the parent component to update the status\n      await onStatusChange(\n      // We need to ensure all fields from the original application are passed back\n      {\n        ...application,\n        ...updateData\n      }, newStatus);\n\n      // Update local state after successful change\n      setAppsWithApproval(prev => prev.map(app => {\n        if (app.id === applicationId) {\n          // Update based on user role\n          if (isAdvisor()) {\n            var _app$approvalStatus;\n            return {\n              ...app,\n              status: newStatus,\n              advisorStatus: newStatus,\n              approvalStatus: {\n                ...app.approvalStatus,\n                approvedByAdvisor: newStatus === APPLICATION_STATUS.APPROVED ? true : (_app$approvalStatus = app.approvalStatus) === null || _app$approvalStatus === void 0 ? void 0 : _app$approvalStatus.approvedByAdvisor\n              },\n              isMoving: false\n            };\n          } else if (isCompanyAdmin()) {\n            var _app$approvalStatus2;\n            return {\n              ...app,\n              status: newStatus,\n              companyStatus: newStatus,\n              approvalStatus: {\n                ...app.approvalStatus,\n                approvedByCompany: newStatus === APPLICATION_STATUS.APPROVED ? true : (_app$approvalStatus2 = app.approvalStatus) === null || _app$approvalStatus2 === void 0 ? void 0 : _app$approvalStatus2.approvedByCompany\n              },\n              isMoving: false\n            };\n          } else {\n            // Admin updates all statuses\n            return {\n              ...app,\n              status: newStatus,\n              advisorStatus: newStatus,\n              companyStatus: newStatus,\n              globalStatus: newStatus,\n              isMoving: false\n            };\n          }\n        }\n        return app;\n      }));\n\n      // Check if we need to automatically move to POR_DISPERSAR\n      if (newStatus === APPLICATION_STATUS.APPROVED) {\n        const updatedApp = appsWithApproval.find(app => app.id === applicationId);\n        if (updatedApp) {\n          var _updatedApp$approvalS, _updatedApp$approvalS2;\n          // Determine if both advisor and company have approved\n          const bothApproved = isAdvisor() && ((_updatedApp$approvalS = updatedApp.approvalStatus) === null || _updatedApp$approvalS === void 0 ? void 0 : _updatedApp$approvalS.approvedByCompany) || isCompanyAdmin() && ((_updatedApp$approvalS2 = updatedApp.approvalStatus) === null || _updatedApp$approvalS2 === void 0 ? void 0 : _updatedApp$approvalS2.approvedByAdvisor);\n          if (bothApproved) {\n            // Auto move to POR_DISPERSAR\n            setTimeout(() => {\n              setSuccessMessage(`¡Ambos han aprobado! Moviendo \"${updatedApp.client_name}\" a \"Por Dispersar\" automáticamente`);\n\n              // Call the parent component to update the status to POR_DISPERSAR\n              onStatusChange({\n                ...updatedApp,\n                status: APPLICATION_STATUS.POR_DISPERSAR\n              }, APPLICATION_STATUS.POR_DISPERSAR).then(() => {\n                // Update local state\n                setAppsWithApproval(prev => prev.map(app => app.id === applicationId ? {\n                  ...app,\n                  status: APPLICATION_STATUS.POR_DISPERSAR,\n                  advisorStatus: APPLICATION_STATUS.POR_DISPERSAR,\n                  companyStatus: APPLICATION_STATUS.POR_DISPERSAR,\n                  globalStatus: APPLICATION_STATUS.POR_DISPERSAR\n                } : app));\n              }).catch(err => {\n                console.error('Error auto-moving to POR_DISPERSAR:', err);\n                setErrorMessage('Error al mover automáticamente a \"Por Dispersar\"');\n              });\n            }, 1000);\n          }\n        }\n      }\n\n      // Show success message\n      setSuccessMessage(`Se ha movido \"${application.client_name}\" a \"${STATUS_LABELS[newStatus]}\"`);\n      setTimeout(() => setSuccessMessage(null), 3000);\n    } catch (error) {\n      console.error('Error updating status:', error);\n\n      // Reset the card to its original state\n      setAppsWithApproval(prev => prev.map(app => app.id === applicationId ? {\n        ...app,\n        isMoving: false\n      } : app));\n\n      // Show error message\n      if (error instanceof Error) {\n        setErrorMessage(`Error: ${error.message}`);\n      } else {\n        setErrorMessage('Error desconocido al actualizar el estado');\n      }\n      setTimeout(() => setErrorMessage(null), 5000);\n    } finally {\n      // Clear processing state\n      setProcessingAppId(null);\n    }\n  };\n\n  // Function to get the appropriate card color based on its approval status\n  const getCardColor = app => {\n    // Here you can implement different styling based on approval status\n    if (app.isMoving) return 'card-moving';\n    switch (app.status) {\n      case APPLICATION_STATUS.NEW:\n        return 'bg-white border-l-yellow-400';\n      case APPLICATION_STATUS.IN_REVIEW:\n        return 'bg-white border-l-blue-400';\n      case APPLICATION_STATUS.APPROVED:\n        return 'bg-white border-l-green-400';\n      case APPLICATION_STATUS.REJECTED:\n        return 'bg-white border-l-red-400';\n      case APPLICATION_STATUS.POR_DISPERSAR:\n        return 'bg-white border-l-purple-400';\n      case APPLICATION_STATUS.COMPLETED:\n        return 'bg-white border-l-slate-400';\n      default:\n        return 'bg-white';\n    }\n  };\n\n  // Function to determine if a card can be dragged\n  const canDragCard = app => {\n    // Implement your business rules for what cards can be dragged\n    // For example, you might not want completed applications to be moved\n\n    // Simple example: don't allow dragging of cards that are already moving\n    if (app.isMoving) return false;\n\n    // Don't allow dragging while any card is processing\n    if (processingAppId) return false;\n    return true;\n  };\n\n  // Function to get tooltip text for draggable status\n  const getDragTooltip = app => {\n    if (processingAppId) return 'Procesando otra aplicación, espere un momento';\n    if (app.isMoving) return 'Actualizando estado...';\n    if (!canDragCard(app)) return 'Esta aplicación no puede ser movida';\n    return 'Arrastre para cambiar el estado';\n  };\n\n  // Function to get CSS classes for draggable status\n  const getDraggableClasses = app => {\n    if (!canDragCard(app)) return 'kanban-card-locked';\n    return 'kanban-card-draggable';\n  };\n\n  // Función auxiliar para renderizar los indicadores de aprobación\n  const renderApprovalIndicators = app => {\n    var _app$approvalStatus3, _app$approvalStatus4, _app$approvalStatus5, _app$approvalStatus6;\n    // Show both indicators for all roles\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex space-x-1 mt-1\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: `badge badge-xs ${(_app$approvalStatus3 = app.approvalStatus) !== null && _app$approvalStatus3 !== void 0 && _app$approvalStatus3.approvedByAdvisor ? 'badge-success' : 'badge-warning'}`,\n        title: `Asesor: ${(_app$approvalStatus4 = app.approvalStatus) !== null && _app$approvalStatus4 !== void 0 && _app$approvalStatus4.approvedByAdvisor ? 'Aprobado' : 'Pendiente'}`,\n        children: \"A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 618,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: `badge badge-xs ${(_app$approvalStatus5 = app.approvalStatus) !== null && _app$approvalStatus5 !== void 0 && _app$approvalStatus5.approvedByCompany ? 'badge-success' : 'badge-warning'}`,\n        title: `Empresa: ${(_app$approvalStatus6 = app.approvalStatus) !== null && _app$approvalStatus6 !== void 0 && _app$approvalStatus6.approvedByCompany ? 'Aprobado' : 'Pendiente'}`,\n        children: \"E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 620,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 617,\n      columnNumber: 7\n    }, this);\n  };\n  const getApplicationTag = type => {\n    switch (type) {\n      case 'selected_plans':\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"application-tag bg-blue-100 text-blue-800\",\n          children: \"selected_plans\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 11\n        }, this);\n      case 'cash_requests':\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"application-tag bg-green-100 text-green-800\",\n          children: \"cash_requests\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 636,\n          columnNumber: 11\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"application-tag bg-purple-100 text-purple-800\",\n          children: type\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 642,\n          columnNumber: 11\n        }, this);\n    }\n  };\n\n  // CSS for the Kanban board\n  const customStyles = `\n    .custom-scrollbar::-webkit-scrollbar {\n      width: 8px;\n      height: 8px;\n    }\n    \n    .custom-scrollbar::-webkit-scrollbar-track {\n      background: #f1f1f1;\n      border-radius: 10px;\n    }\n    \n    .custom-scrollbar::-webkit-scrollbar-thumb {\n      background: #888;\n      border-radius: 10px;\n    }\n    \n    .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n      background: #555;\n    }\n    \n    .kanban-card {\n      transition: transform 0.2s ease-in-out, opacity 0.2s ease-in-out, box-shadow 0.3s ease-in-out, border-color 0.3s ease;\n      touch-action: none;\n      user-select: none;\n      will-change: transform, opacity;\n    }\n    \n    .kanban-card-draggable {\n      cursor: grab !important;\n      position: relative;\n    }\n    \n    .kanban-card-draggable:hover {\n      transform: translateY(-4px);\n      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.15);\n      border-color: #a855f7;\n      z-index: 10;\n    }\n    \n    .kanban-card-draggable:active {\n      cursor: grabbing !important;\n    }\n    \n    .kanban-card-locked {\n      position: relative;\n      cursor: not-allowed !important;\n      opacity: 0.8;\n    }\n    \n    .card-moving {\n      opacity: 0.7;\n      background-color: #f9fafb;\n    }\n    \n    .drag-over {\n      background-color: #f3f4f6;\n    }\n    \n    @keyframes processingPulse {\n      0% { box-shadow: 0 0 0 0 rgba(168, 85, 247, 0.4); }\n      70% { box-shadow: 0 0 0 10px rgba(168, 85, 247, 0); }\n      100% { box-shadow: 0 0 0 0 rgba(168, 85, 247, 0); }\n    }\n    \n    .processing {\n      animation: processingPulse 1.5s infinite;\n    }\n\n    .application-tag {\n      display: inline-block;\n      font-size: 0.7rem;\n      padding: 0.15rem 0.4rem;\n      border-radius: 0.25rem;\n      font-weight: 500;\n    }\n\n    .approval-indicators {\n      display: flex;\n      margin-top: 0.5rem;\n      margin-bottom: 0.5rem;\n      gap: 0.5rem;\n    }\n    \n    .approval-indicator {\n      display: flex;\n      align-items: center;\n      gap: 0.25rem;\n    }\n    \n    .approval-indicator-dot {\n      width: 14px;\n      height: 14px;\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border: 1px solid #e2e8f0;\n      transition: all 0.2s ease;\n    }\n    \n    .approval-indicator-dot.approved {\n      background-color: #22c55e;\n      border-color: #16a34a;\n      box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.2);\n    }\n    \n    .approval-indicator-dot.pending {\n      background-color: #d1d5db;\n      border-color: #9ca3af;\n    }\n    \n    .approval-indicator-label {\n      font-size: 0.75rem;\n      font-weight: 500;\n    }\n    \n    .approval-indicator-label.approved {\n      color: #16a34a;\n    }\n    \n    .approval-indicator-label.pending {\n      color: #6b7280;\n    }\n\n    .tag-product {\n      background-color: #e0f2fe;\n      color: #0369a1;\n    }\n\n    .tag-cash {\n      background-color: #dcfce7;\n      color: #15803d;\n    }\n\n    .tag-selected {\n      background-color: #f3e8ff;\n      color: #7e22ce;\n    }\n\n    .column-header {\n      font-weight: 600;\n      padding: 0.75rem;\n      border-radius: 0.5rem;\n      margin-bottom: 1rem;\n    }\n\n    .column-count {\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      width: 1.5rem;\n      height: 1.5rem;\n      border-radius: 9999px;\n      font-size: 0.75rem;\n      font-weight: 600;\n      background-color: white;\n      color: #4b5563;\n      margin-left: 0.5rem;\n    }\n  `;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"kanban-board-container bg-base-100 p-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      dangerouslySetInnerHTML: {\n        __html: customStyles\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 813,\n      columnNumber: 7\n    }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-error shadow-lg mb-4 mx-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          className: \"stroke-current flex-shrink-0 h-6 w-6\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: \"2\",\n            d: \"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 819,\n            columnNumber: 134\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 819,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: errorMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 820,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 818,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-none\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setErrorMessage(null),\n          className: \"btn btn-sm btn-ghost\",\n          children: \"Cerrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 823,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 822,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 817,\n      columnNumber: 9\n    }, this), warnMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-warning shadow-lg mb-4 mx-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          className: \"stroke-current flex-shrink-0 h-6 w-6\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: \"2\",\n            d: \"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 831,\n            columnNumber: 134\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 831,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: warnMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 832,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 830,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-none\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setWarnMessage(null),\n          className: \"btn btn-sm btn-ghost\",\n          children: \"Cerrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 835,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 834,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 829,\n      columnNumber: 9\n    }, this), successMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-success shadow-lg mb-4 mx-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          className: \"stroke-current flex-shrink-0 h-6 w-6\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: \"2\",\n            d: \"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 843,\n            columnNumber: 134\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 843,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: successMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 844,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 842,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-none\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setSuccessMessage(null),\n          className: \"btn btn-sm btn-ghost\",\n          children: \"Cerrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 847,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 846,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 841,\n      columnNumber: 9\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-24\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 855,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"ml-2 text-gray-600\",\n        children: \"Cargando aplicaciones...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 856,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 854,\n      columnNumber: 9\n    }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-error shadow-lg mb-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          className: \"stroke-current flex-shrink-0 h-6 w-6\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: \"2\",\n            d: \"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 861,\n            columnNumber: 134\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 861,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Error: \", error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 862,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 860,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 859,\n      columnNumber: 9\n    }, this) :\n    /*#__PURE__*/\n    // The actual Kanban board grid\n    _jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"kanban-column bg-base-200 rounded-lg p-4 h-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-header mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-bold flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"w-3 h-3 rounded-full bg-yellow-400 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 872,\n              columnNumber: 17\n            }, this), STATUS_LABELS[APPLICATION_STATUS.NEW], \" (\", getApplicationsByStatus(APPLICATION_STATUS.NEW).length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 871,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 870,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\",\n          onDragOver: handleDragOver,\n          onDragLeave: handleDragLeave,\n          onDrop: e => handleDrop(e, APPLICATION_STATUS.NEW),\n          children: [getApplicationsByStatus(APPLICATION_STATUS.NEW).map(app => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`,\n            draggable: canDragCard(app),\n            onDragStart: canDragCard(app) ? e => handleDragStart(e, app) : undefined,\n            onDragEnd: handleDragEnd,\n            title: getDragTooltip(app),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-start mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold text-gray-800\",\n                children: app.client_name || \"Cliente sin nombre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 892,\n                columnNumber: 21\n              }, this), getApplicationTag(app.application_type)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 891,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mb-2\",\n              children: app.company_name && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: app.company_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 896,\n                columnNumber: 42\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 895,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm font-medium text-gray-900 mb-1\",\n              children: formatCurrency(app.amount)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 898,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col mt-2 pt-2 border-t border-gray-100\",\n              children: [renderApprovalIndicators(app), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-500\",\n                  children: [\"ID: \", app.id.substring(0, 5), \"...\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 904,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: `/applications/${app.id}`,\n                  className: \"btn btn-xs btn-primary\",\n                  children: \"VER DETALLE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 905,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 903,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 901,\n              columnNumber: 19\n            }, this)]\n          }, app.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 883,\n            columnNumber: 17\n          }, this)), getApplicationsByStatus(APPLICATION_STATUS.NEW).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-4 text-gray-500 italic\",\n            children: \"No hay solicitudes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 916,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 876,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 869,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"kanban-column bg-base-200 rounded-lg p-4 h-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-header mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-bold flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"w-3 h-3 rounded-full bg-blue-400 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 927,\n              columnNumber: 17\n            }, this), STATUS_LABELS[APPLICATION_STATUS.IN_REVIEW], \" (\", getApplicationsByStatus(APPLICATION_STATUS.IN_REVIEW).length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 926,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 925,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\",\n          onDragOver: handleDragOver,\n          onDragLeave: handleDragLeave,\n          onDrop: e => handleDrop(e, APPLICATION_STATUS.IN_REVIEW),\n          children: [getApplicationsByStatus(APPLICATION_STATUS.IN_REVIEW).map(app => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`,\n            draggable: canDragCard(app),\n            onDragStart: canDragCard(app) ? e => handleDragStart(e, app) : undefined,\n            onDragEnd: handleDragEnd,\n            title: getDragTooltip(app),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-start mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold text-gray-800\",\n                children: app.client_name || \"Cliente sin nombre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 947,\n                columnNumber: 21\n              }, this), getApplicationTag(app.application_type)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 946,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mb-2\",\n              children: app.company_name && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: app.company_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 951,\n                columnNumber: 42\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 950,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm font-medium text-gray-900 mb-1\",\n              children: formatCurrency(app.amount)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 953,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col mt-2 pt-2 border-t border-gray-100\",\n              children: [renderApprovalIndicators(app), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-500\",\n                  children: [\"ID: \", app.id.substring(0, 5), \"...\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 959,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: `/applications/${app.id}`,\n                  className: \"btn btn-xs btn-primary\",\n                  children: \"VER DETALLE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 960,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 958,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 956,\n              columnNumber: 19\n            }, this)]\n          }, app.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 938,\n            columnNumber: 17\n          }, this)), getApplicationsByStatus(APPLICATION_STATUS.IN_REVIEW).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-4 text-gray-500 italic\",\n            children: \"No hay solicitudes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 971,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 931,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 924,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"kanban-column bg-base-200 rounded-lg p-4 h-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-header mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-bold flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"w-3 h-3 rounded-full bg-green-400 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 982,\n              columnNumber: 17\n            }, this), STATUS_LABELS[APPLICATION_STATUS.APPROVED], \" (\", getApplicationsByStatus(APPLICATION_STATUS.APPROVED).length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 981,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 980,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\",\n          onDragOver: handleDragOver,\n          onDragLeave: handleDragLeave,\n          onDrop: e => handleDrop(e, APPLICATION_STATUS.APPROVED),\n          children: [getApplicationsByStatus(APPLICATION_STATUS.APPROVED).map(app => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`,\n            draggable: canDragCard(app),\n            onDragStart: canDragCard(app) ? e => handleDragStart(e, app) : undefined,\n            onDragEnd: handleDragEnd,\n            title: getDragTooltip(app),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-start mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold text-gray-800\",\n                children: app.client_name || \"Cliente sin nombre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1002,\n                columnNumber: 21\n              }, this), getApplicationTag(app.application_type)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1001,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mb-2\",\n              children: app.company_name && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: app.company_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1006,\n                columnNumber: 42\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1005,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm font-medium text-gray-900 mb-1\",\n              children: formatCurrency(app.amount)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1008,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col mt-2 pt-2 border-t border-gray-100\",\n              children: [renderApprovalIndicators(app), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-500\",\n                  children: [\"ID: \", app.id.substring(0, 5), \"...\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1014,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: `/applications/${app.id}`,\n                  className: \"btn btn-xs btn-primary\",\n                  children: \"VER DETALLE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1015,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1013,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1011,\n              columnNumber: 19\n            }, this)]\n          }, app.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 993,\n            columnNumber: 17\n          }, this)), getApplicationsByStatus(APPLICATION_STATUS.APPROVED).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-4 text-gray-500 italic\",\n            children: \"No hay solicitudes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1026,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 986,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 979,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"kanban-column bg-base-200 rounded-lg p-4 h-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-header mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-bold flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"w-3 h-3 rounded-full bg-purple-400 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1037,\n              columnNumber: 17\n            }, this), STATUS_LABELS[APPLICATION_STATUS.POR_DISPERSAR], \" (\", getApplicationsByStatus(APPLICATION_STATUS.POR_DISPERSAR).length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1036,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1035,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\",\n          onDragOver: handleDragOver,\n          onDragLeave: handleDragLeave,\n          onDrop: e => handleDrop(e, APPLICATION_STATUS.POR_DISPERSAR),\n          children: [getApplicationsByStatus(APPLICATION_STATUS.POR_DISPERSAR).map(app => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`,\n            draggable: canDragCard(app),\n            onDragStart: canDragCard(app) ? e => handleDragStart(e, app) : undefined,\n            onDragEnd: handleDragEnd,\n            title: getDragTooltip(app),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-start mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold text-gray-800\",\n                children: app.client_name || \"Cliente sin nombre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1057,\n                columnNumber: 21\n              }, this), getApplicationTag(app.application_type)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1056,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mb-2\",\n              children: app.company_name && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: app.company_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1061,\n                columnNumber: 42\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1060,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm font-medium text-gray-900 mb-1\",\n              children: formatCurrency(app.amount)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1063,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col mt-2 pt-2 border-t border-gray-100\",\n              children: [renderApprovalIndicators(app), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-500\",\n                  children: [\"ID: \", app.id.substring(0, 5), \"...\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1069,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: `/applications/${app.id}`,\n                  className: \"btn btn-xs btn-primary\",\n                  children: \"VER DETALLE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1070,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1068,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1066,\n              columnNumber: 19\n            }, this)]\n          }, app.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1048,\n            columnNumber: 17\n          }, this)), getApplicationsByStatus(APPLICATION_STATUS.POR_DISPERSAR).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-4 text-gray-500 italic\",\n            children: \"No hay solicitudes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1081,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1041,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1034,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"kanban-column bg-base-200 rounded-lg p-4 h-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-header mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-bold flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"w-3 h-3 rounded-full bg-slate-400 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1092,\n              columnNumber: 17\n            }, this), STATUS_LABELS[APPLICATION_STATUS.COMPLETED], \" (\", getApplicationsByStatus(APPLICATION_STATUS.COMPLETED).length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1091,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1090,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\",\n          onDragOver: handleDragOver,\n          onDragLeave: handleDragLeave,\n          onDrop: e => handleDrop(e, APPLICATION_STATUS.COMPLETED),\n          children: [getApplicationsByStatus(APPLICATION_STATUS.COMPLETED).map(app => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`,\n            draggable: canDragCard(app),\n            onDragStart: canDragCard(app) ? e => handleDragStart(e, app) : undefined,\n            onDragEnd: handleDragEnd,\n            title: getDragTooltip(app),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-start mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold text-gray-800\",\n                children: app.client_name || \"Cliente sin nombre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1112,\n                columnNumber: 21\n              }, this), getApplicationTag(app.application_type)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1111,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mb-2\",\n              children: app.company_name && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: app.company_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1116,\n                columnNumber: 42\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1115,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm font-medium text-gray-900 mb-1\",\n              children: formatCurrency(app.amount)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1118,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col mt-2 pt-2 border-t border-gray-100\",\n              children: [renderApprovalIndicators(app), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-500\",\n                  children: [\"ID: \", app.id.substring(0, 5), \"...\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1124,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: `/applications/${app.id}`,\n                  className: \"btn btn-xs btn-primary\",\n                  children: \"VER DETALLE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1125,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1123,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1121,\n              columnNumber: 19\n            }, this)]\n          }, app.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1103,\n            columnNumber: 23\n          }, this)), getApplicationsByStatus(APPLICATION_STATUS.COMPLETED).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-4 text-gray-500 italic\",\n            children: \"No hay solicitudes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1136,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1096,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1089,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"kanban-column bg-base-200 rounded-lg p-4 h-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-header mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-bold flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"w-3 h-3 rounded-full bg-red-400 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1147,\n              columnNumber: 17\n            }, this), STATUS_LABELS[APPLICATION_STATUS.REJECTED], \" (\", getApplicationsByStatus(APPLICATION_STATUS.REJECTED).length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1146,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1145,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\",\n          onDragOver: handleDragOver,\n          onDragLeave: handleDragLeave,\n          onDrop: e => handleDrop(e, APPLICATION_STATUS.REJECTED),\n          children: [getApplicationsByStatus(APPLICATION_STATUS.REJECTED).map(app => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`,\n            draggable: canDragCard(app),\n            onDragStart: canDragCard(app) ? e => handleDragStart(e, app) : undefined,\n            onDragEnd: handleDragEnd,\n            title: getDragTooltip(app),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-start mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold text-gray-800\",\n                children: app.client_name || \"Cliente sin nombre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1167,\n                columnNumber: 21\n              }, this), getApplicationTag(app.application_type)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1166,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mb-2\",\n              children: app.company_name && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: app.company_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1171,\n                columnNumber: 42\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1170,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm font-medium text-gray-900 mb-1\",\n              children: formatCurrency(app.amount)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1173,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col mt-2 pt-2 border-t border-gray-100\",\n              children: [renderApprovalIndicators(app), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-500\",\n                  children: [\"ID: \", app.id.substring(0, 5), \"...\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1179,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: `/applications/${app.id}`,\n                  className: \"btn btn-xs btn-primary\",\n                  children: \"VER DETALLE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1180,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1178,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1176,\n              columnNumber: 19\n            }, this)]\n          }, app.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1158,\n            columnNumber: 17\n          }, this)), getApplicationsByStatus(APPLICATION_STATUS.REJECTED).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-4 text-gray-500 italic\",\n            children: \"No hay solicitudes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1191,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1151,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1144,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 867,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 812,\n    columnNumber: 5\n  }, this);\n};\n_s(KanbanBoard, \"W9LI1fR1OFNR8WNQxeSi2uk6SoM=\", false, function () {\n  return [usePermissions, useAuth];\n});\n_c = KanbanBoard;\nexport default KanbanBoard;\nvar _c;\n$RefreshReg$(_c, \"KanbanBoard\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","Link","APPLICATION_STATUS","STATUS_LABELS","usePermissions","useAuth","formatCurrency","jsxDEV","_jsxDEV","escapeSQLString","str","replace","cast","value","KanbanBoard","applications","onStatusChange","_s","errorMessage","setErrorMessage","warnMessage","setWarnMessage","successMessage","setSuccessMessage","processingAppId","setProcessingAppId","appsWithApproval","setAppsWithApproval","isLoading","setIsLoading","error","setError","isAdvisor","isCompanyAdmin","getEntityFilter","user","pendingRefreshRef","dragItemRef","fetchApplicationsWithApproval","mappedApps","Promise","all","map","app","status","NEW","approvalData","approvedByAdvisor","approved_by_advisor","approvedByCompany","approved_by_company","isFullyApproved","advisorStatus","companyStatus","IN_REVIEW","APPROVED","POR_DISPERSAR","COMPLETED","REJECTED","console","log","id","role","client_name","company_name","amount","application_type","isMoving","approvalStatus","globalStatus","filteredApps","updateLocalApprovalStatus","applicationId","newData","newStatus","prevApps","updatedStatus","statuses","getApplicationsByStatus","filter","handleDragStart","e","application","current","currentTarget","classList","add","dataTransfer","setData","effectAllowed","ghostElement","cloneNode","style","position","top","opacity","transform","width","offsetWidth","document","body","appendChild","setDragImage","setTimeout","parentNode","removeChild","warn","handleDragEnd","remove","columns","querySelectorAll","forEach","column","handleDragOver","preventDefault","dropEffect","handleDragLeave","canMoveToStatus","applicationStatus","userIsAdvisor","userIsCompanyAdmin","_application$approval","_application$approval2","handleDrop","getData","find","_application$approval3","_application$approval4","_application$approval5","_application$approval6","missingApprovals","push","join","prev","updateData","approval_date_advisor","Date","toISOString","approval_date_company","_app$approvalStatus","_app$approvalStatus2","updatedApp","_updatedApp$approvalS","_updatedApp$approvalS2","bothApproved","then","catch","err","Error","message","getCardColor","canDragCard","getDragTooltip","getDraggableClasses","renderApprovalIndicators","_app$approvalStatus3","_app$approvalStatus4","_app$approvalStatus5","_app$approvalStatus6","className","children","title","fileName","_jsxFileName","lineNumber","columnNumber","getApplicationTag","type","customStyles","dangerouslySetInnerHTML","__html","xmlns","fill","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","onClick","length","onDragOver","onDragLeave","onDrop","draggable","onDragStart","undefined","onDragEnd","substring","to","_c","$RefreshReg$"],"sources":["/Users/diegogg98/NEW CRM MAR18/src/components/ui/KanbanBoard.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Link } from 'react-router-dom';\nimport { APPLICATION_STATUS, STATUS_LABELS } from '../../utils/constants/statuses';\nimport { APPLICATION_TYPE } from '../../utils/constants/applications';\nimport { usePermissions } from '../../contexts/PermissionsContext';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { formatDate, formatCurrency } from '../../utils/formatters';\nimport { Application } from '../../utils/types';\nimport { ApplicationStatus } from '../../services/applicationService';\n\n// NOTA: La funcionalidad de tiempo real ha sido desactivada \n// debido a problemas de compatibilidad\n// Las actualizaciones se reflejarán al recargar la página o cuando el componente\n// padre envíe nuevas aplicaciones como prop\n\ninterface KanbanBoardProps {\n  applications: any[];\n  onStatusChange?: (application: any, newStatus: string) => Promise<void>;\n}\n\ninterface ApplicationWithApproval {\n  id: string;\n  status: string;\n  client_name: string;\n  company_name?: string;\n  amount: number;\n  application_type: string;\n  isMoving?: boolean;\n  approvalStatus?: {\n    approvedByAdvisor?: boolean;\n    approvedByCompany?: boolean;\n    isFullyApproved?: boolean;\n  };\n  advisorStatus?: string;\n  companyStatus?: string;\n  globalStatus?: string;\n}\n\n// Utility functions outside of component scope\nconst escapeSQLString = (str: string) => {\n  if (!str) return '';\n  return str.replace(/'/g, \"''\");\n};\n\nconst cast = <T,>(value: any): T => {\n  return value as T;\n};\n\nconst KanbanBoard: React.FC<KanbanBoardProps> = ({ applications, onStatusChange }) => {\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\n  const [warnMessage, setWarnMessage] = useState<string | null>(null);\n  const [successMessage, setSuccessMessage] = useState<string | null>(null);\n  const [processingAppId, setProcessingAppId] = useState<string | null>(null);\n  const [appsWithApproval, setAppsWithApproval] = useState<ApplicationWithApproval[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Añadir contexto de permisos para verificar el rol del usuario\n  const { isAdvisor, isCompanyAdmin, getEntityFilter } = usePermissions();\n  const { user } = useAuth();\n  \n  // Reference to track if we should refresh data\n  const pendingRefreshRef = useRef(false);\n  \n  const dragItemRef = useRef<HTMLDivElement | null>(null);\n  \n  // Set up applications when component mounts\n  useEffect(() => {\n      setIsLoading(true);\n      try {\n      // Map the applications to our simplified format and fetch approval status if needed\n      const fetchApplicationsWithApproval = async () => {\n        const mappedApps = await Promise.all(applications.map(async app => {\n          // Ensure status is valid for Kanban\n          let status = app.status || APPLICATION_STATUS.NEW;\n          \n          // If status is 'pending' or 'solicitud', show in \"New\" column\n          if (status === 'pending' || status === 'solicitud') {\n            status = APPLICATION_STATUS.NEW;\n          }\n          \n          // Use the actual values from the database for approval statuses\n          const approvalData = {\n            approvedByAdvisor: app.approved_by_advisor === true,\n            approvedByCompany: app.approved_by_company === true,\n            isFullyApproved: app.approved_by_advisor === true && app.approved_by_company === true\n          };\n          \n          // Determine separate statuses for advisor and company\n          // For now, derive them from the approval status and main status\n          let advisorStatus = status;\n          let companyStatus = status;\n          \n          // If in review or approved, set individual statuses based on approvals\n          if (status === APPLICATION_STATUS.IN_REVIEW || status === APPLICATION_STATUS.APPROVED) {\n            if (app.approved_by_advisor) {\n              advisorStatus = APPLICATION_STATUS.APPROVED;\n            }\n            if (app.approved_by_company) {\n              companyStatus = APPLICATION_STATUS.APPROVED;\n            }\n          }\n          \n          // If both are approved, both should see approved\n          if (app.approved_by_advisor && app.approved_by_company) {\n            advisorStatus = APPLICATION_STATUS.APPROVED;\n            companyStatus = APPLICATION_STATUS.APPROVED;\n          }\n          \n          // For global statuses like POR_DISPERSAR and COMPLETED, keep them synchronized\n          if (status === APPLICATION_STATUS.POR_DISPERSAR || \n              status === APPLICATION_STATUS.COMPLETED || \n              status === APPLICATION_STATUS.REJECTED) {\n            advisorStatus = status;\n            companyStatus = status;\n          }\n          \n          console.log(`Application ${app.id} approval status:`, approvalData, 'Current user role:', user?.role);\n          \n          return {\n            id: app.id,\n            status, // This will be used for display in kanban based on user role\n            client_name: app.client_name || 'Cliente sin nombre',\n            company_name: app.company_name,\n            amount: app.amount || 0,\n            application_type: app.application_type || 'Desconocido',\n            isMoving: false,\n            approvalStatus: approvalData,\n            advisorStatus,\n            companyStatus,\n            globalStatus: status\n          };\n        }));\n        \n        // Filter the apps based on the user's role for status display\n        const filteredApps = mappedApps.map(app => {\n          // Determine which status to use based on the user's role\n          if (isAdvisor()) {\n            return { ...app, status: app.advisorStatus || app.status };\n          } else if (isCompanyAdmin()) {\n            return { ...app, status: app.companyStatus || app.status };\n          }\n          // Admin sees the global status\n          return app;\n        });\n        \n        console.log('Aplicaciones procesadas para Kanban:', filteredApps);\n        setAppsWithApproval(filteredApps);\n        setIsLoading(false);\n      };\n      \n      fetchApplicationsWithApproval();\n      } catch (error) {\n      console.error('Error setting up applications:', error);\n      setErrorMessage('Error al cargar las aplicaciones');\n        setIsLoading(false);\n      }\n  }, [applications, user?.role, isAdvisor, isCompanyAdmin]);\n  \n  // Function to update local approval status\n  const updateLocalApprovalStatus = useCallback((applicationId: string, newData: any, newStatus?: string) => {\n    setAppsWithApproval(prevApps => \n      prevApps.map(app => {\n        if (app.id === applicationId) {\n          // If we have a status change, update it\n          const updatedStatus = newStatus || app.status;\n          \n          // Use the actual values from the update data\n          const approvalStatus = {\n            approvedByAdvisor: newData.approved_by_advisor === true,\n            approvedByCompany: newData.approved_by_company === true,\n            isFullyApproved: newData.approved_by_advisor === true && newData.approved_by_company === true\n          };\n          \n          return {\n            ...app,\n            status: updatedStatus,\n            approvalStatus\n          };\n        }\n        return app;\n      })\n    );\n  }, []);\n  \n  // Get statuses to display as columns\n  const statuses = [\n    APPLICATION_STATUS.NEW,\n    APPLICATION_STATUS.IN_REVIEW,\n    APPLICATION_STATUS.APPROVED,\n    APPLICATION_STATUS.REJECTED,\n          APPLICATION_STATUS.POR_DISPERSAR,\n    APPLICATION_STATUS.COMPLETED\n  ];\n  \n  // Group applications by status\n  const getApplicationsByStatus = (status: string) => {\n    return appsWithApproval.filter(app => app.status === status);\n  };\n  \n  const handleDragStart = (e: React.DragEvent<HTMLDivElement>, application: ApplicationWithApproval) => {\n    // Store the drag start element for later reference\n    dragItemRef.current = e.currentTarget;\n    \n    // Add moving class to the dragged item\n    e.currentTarget.classList.add('card-moving');\n    \n    // Set the data for the drag operation\n    e.dataTransfer.setData('application/id', application.id);\n    e.dataTransfer.effectAllowed = 'move';\n    \n    // Create a custom drag image for better UX\n    try {\n      const ghostElement = e.currentTarget.cloneNode(true) as HTMLElement;\n      ghostElement.style.position = 'absolute';\n      ghostElement.style.top = '-1000px';\n      ghostElement.style.opacity = '0.8';\n      ghostElement.style.transform = 'scale(0.8)';\n      ghostElement.style.width = `${e.currentTarget.offsetWidth}px`;\n      document.body.appendChild(ghostElement);\n      e.dataTransfer.setDragImage(ghostElement, 20, 20);\n\n      // Clean up the ghost element after a short delay\n      setTimeout(() => {\n        if (ghostElement.parentNode) {\n          document.body.removeChild(ghostElement);\n        }\n      }, 100);\n    } catch (error) {\n      console.warn('Failed to create custom drag image:', error);\n      // Fall back to default drag image\n    }\n  };\n  \n  const handleDragEnd = (e: React.DragEvent<HTMLDivElement>) => {\n    // Remove dragging-related classes from the dragged item\n    if (dragItemRef.current) {\n      dragItemRef.current.classList.remove('card-moving');\n    }\n    \n    // Get and remove any columns with drag-over class\n    const columns = document.querySelectorAll('.column-content');\n    columns.forEach(column => column.classList.remove('drag-over'));\n    \n    // Clear the reference\n    dragItemRef.current = null;\n  };\n  \n  const handleDragOver = (e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n    \n    // Add a class to the drop target\n      e.currentTarget.classList.add('drag-over');\n  };\n  \n  const handleDragLeave = (e: React.DragEvent<HTMLDivElement>) => {\n    // Remove the drag-over class\n    e.currentTarget.classList.remove('drag-over');\n  };\n  \n  const canMoveToStatus = (applicationStatus: string, newStatus: string, application: ApplicationWithApproval): boolean => {\n    // Don't allow moving to the same status\n    if (applicationStatus === newStatus) return false;\n\n    // Get the current user role\n    const userIsAdvisor = isAdvisor();\n    const userIsCompanyAdmin = isCompanyAdmin();\n\n    // Status transition rules based on role\n    if (userIsAdvisor) {\n      // Advisor specific rules\n      if (applicationStatus === APPLICATION_STATUS.NEW) {\n        // Can only move from NEW to IN_REVIEW\n        return newStatus === APPLICATION_STATUS.IN_REVIEW;\n      } else if (applicationStatus === APPLICATION_STATUS.IN_REVIEW) {\n        // From IN_REVIEW, can move to NEW or APPROVED \n        if (newStatus === APPLICATION_STATUS.NEW) return true;\n        if (newStatus === APPLICATION_STATUS.APPROVED) {\n          // Advisor can approve their part\n          return true;\n        }\n        return false;\n      } else if (applicationStatus === APPLICATION_STATUS.APPROVED) {\n        // From APPROVED, advisor can't move application - it needs company approval too\n        return false;\n      } else if (applicationStatus === APPLICATION_STATUS.POR_DISPERSAR || \n                 applicationStatus === APPLICATION_STATUS.COMPLETED) {\n        // POR_DISPERSAR and COMPLETED are managed by the system, advisor can't move\n        return false;\n      }\n    } else if (userIsCompanyAdmin) {\n      // Company admin specific rules\n      if (applicationStatus === APPLICATION_STATUS.NEW) {\n        // Can move from NEW to IN_REVIEW\n        return newStatus === APPLICATION_STATUS.IN_REVIEW;\n      } else if (applicationStatus === APPLICATION_STATUS.IN_REVIEW) {\n        // From IN_REVIEW, can move to NEW or APPROVED\n        if (newStatus === APPLICATION_STATUS.NEW) return true;\n        if (newStatus === APPLICATION_STATUS.APPROVED) {\n          // Company can approve their part\n          return true;\n        }\n        return false;\n      } else if (applicationStatus === APPLICATION_STATUS.APPROVED) {\n        // From APPROVED, company can't move application - waiting for full approval\n        return false;\n      } else if (applicationStatus === APPLICATION_STATUS.POR_DISPERSAR) {\n        // From POR_DISPERSAR, can only move to COMPLETED\n        return newStatus === APPLICATION_STATUS.COMPLETED;\n      } else if (applicationStatus === APPLICATION_STATUS.COMPLETED) {\n        // Completed applications cannot be moved\n        return false;\n      }\n    } else {\n      // Admin rules (can move between all states)\n      if (applicationStatus === APPLICATION_STATUS.NEW) {\n        // Can only move from NEW to IN_REVIEW\n        return newStatus === APPLICATION_STATUS.IN_REVIEW;\n      } else if (applicationStatus === APPLICATION_STATUS.IN_REVIEW) {\n        // From IN_REVIEW, can move to NEW or can move to APPROVED only if both advisor and company have approved\n        // or if the current user can only set their own approval\n        if (newStatus === APPLICATION_STATUS.NEW) return true;\n        if (newStatus === APPLICATION_STATUS.APPROVED) {\n          // For admins, need both approvals\n          return application.approvalStatus?.approvedByAdvisor === true && \n                 application.approvalStatus?.approvedByCompany === true;\n        }\n        return false;\n      } else if (applicationStatus === APPLICATION_STATUS.APPROVED) {\n        // From APPROVED, can only move to IN_REVIEW or POR_DISPERSAR\n        return newStatus === APPLICATION_STATUS.IN_REVIEW || newStatus === APPLICATION_STATUS.POR_DISPERSAR;\n      } else if (applicationStatus === APPLICATION_STATUS.POR_DISPERSAR) {\n        // From POR_DISPERSAR, can only move back to APPROVED or to COMPLETED\n        return newStatus === APPLICATION_STATUS.APPROVED || newStatus === APPLICATION_STATUS.COMPLETED;\n      } else if (applicationStatus === APPLICATION_STATUS.COMPLETED) {\n        // Completed applications cannot be moved\n        return false;\n      }\n    }\n      \n    // Default: allow movement between states that don't have specific rules\n    return true;\n  };\n  \n  const handleDrop = async (e: React.DragEvent<HTMLDivElement>, newStatus: string) => {\n    e.preventDefault();\n    \n    // Clear styling\n    e.currentTarget.classList.remove('drag-over');\n    \n    // Check if something is being dragged\n    if (!dragItemRef.current) {\n      console.warn('Nothing is being dragged');\n      return;\n    }\n    \n    // Extract application data from the dataTransfer\n    const applicationId = e.dataTransfer.getData('application/id');\n    const application = appsWithApproval.find(app => app.id === applicationId);\n    \n    if (!application) {\n      console.error('Application not found:', applicationId);\n      return;\n    }\n        \n    // Don't allow dropping in the same column or if processing another application\n    if (application.status === newStatus || processingAppId !== null) {\n      return;\n    }\n        \n    // Check if this transition is allowed\n    if (!canMoveToStatus(application.status, newStatus, application)) {\n      if (application.status === APPLICATION_STATUS.IN_REVIEW && newStatus === APPLICATION_STATUS.APPROVED) {\n        // Mensaje personalizado según el rol del usuario\n        if (isAdvisor() && !application.approvalStatus?.approvedByAdvisor) {\n          setWarnMessage('No puedes aprobar esta solicitud. Debes aprobarla primero desde la página de detalle.');\n        } else if (isCompanyAdmin() && !application.approvalStatus?.approvedByCompany) {\n          setWarnMessage('No puedes aprobar esta solicitud. Debes aprobarla primero desde la página de detalle.');\n        } else {\n          // Para otros roles, mostrar mensaje sobre ambas aprobaciones\n          const missingApprovals = [];\n          if (!application.approvalStatus?.approvedByAdvisor) missingApprovals.push('del asesor');\n          if (!application.approvalStatus?.approvedByCompany) missingApprovals.push('de la empresa');\n          \n          setWarnMessage(`No se puede aprobar esta solicitud. Falta aprobación ${missingApprovals.join(' y ')}.`);\n        }\n        setTimeout(() => setWarnMessage(null), 5000);\n      } else {\n        // General transition not allowed message\n        setErrorMessage(`No se permite cambiar el estado de \"${STATUS_LABELS[application.status as keyof typeof STATUS_LABELS]}\" a \"${STATUS_LABELS[newStatus as keyof typeof STATUS_LABELS]}\"`);\n        setTimeout(() => setErrorMessage(null), 5000);\n      }\n      return;\n    }\n    \n    // Bail if there's no status change handler\n    if (!onStatusChange) {\n      setWarnMessage('No tienes permisos para cambiar el estado de las solicitudes');\n      setTimeout(() => setWarnMessage(null), 3000);\n      return;\n    }\n    \n    // Mark that we're processing this application\n    setProcessingAppId(applicationId);\n    \n    // Mark this application as moving in the UI\n    setAppsWithApproval(prev => \n      prev.map(app => \n        app.id === applicationId\n        ? { ...app, isMoving: true } \n        : app\n      )\n    );\n    \n    try {\n      // Determine which status we need to update based on user role\n      let updateData: any = { \n        status: newStatus // Default to updating global status\n      };\n      \n      // For role-specific updates, also include the role's status field\n      if (isAdvisor()) {\n        updateData.advisorStatus = newStatus;\n        \n        // If advisor is approving, mark approved_by_advisor automatically\n        if (newStatus === APPLICATION_STATUS.APPROVED) {\n          updateData.approved_by_advisor = true;\n          updateData.approval_date_advisor = new Date().toISOString();\n        }\n      } else if (isCompanyAdmin()) {\n        updateData.companyStatus = newStatus;\n        \n        // If company is approving, mark approved_by_company automatically\n        if (newStatus === APPLICATION_STATUS.APPROVED) {\n          updateData.approved_by_company = true;\n          updateData.approval_date_company = new Date().toISOString();\n        }\n      }\n      \n      // Call the parent component to update the status\n      await onStatusChange(\n        // We need to ensure all fields from the original application are passed back\n        { ...application, ...updateData },\n        newStatus\n      );\n      \n      // Update local state after successful change\n      setAppsWithApproval(prev => \n        prev.map(app => {\n          if (app.id === applicationId) {\n            // Update based on user role\n            if (isAdvisor()) {\n              return { \n                ...app, \n                status: newStatus, \n                advisorStatus: newStatus,\n                approvalStatus: {\n                  ...app.approvalStatus,\n                  approvedByAdvisor: newStatus === APPLICATION_STATUS.APPROVED ? true : app.approvalStatus?.approvedByAdvisor\n                },\n                isMoving: false \n              };\n            } else if (isCompanyAdmin()) {\n              return { \n                ...app, \n                status: newStatus, \n                companyStatus: newStatus,\n                approvalStatus: {\n                  ...app.approvalStatus,\n                  approvedByCompany: newStatus === APPLICATION_STATUS.APPROVED ? true : app.approvalStatus?.approvedByCompany\n                },\n                isMoving: false \n              };\n            } else {\n              // Admin updates all statuses\n              return { \n                ...app, \n                status: newStatus, \n                advisorStatus: newStatus,\n                companyStatus: newStatus,\n                globalStatus: newStatus,\n                isMoving: false \n              };\n            }\n          }\n          return app;\n        })\n      );\n      \n      // Check if we need to automatically move to POR_DISPERSAR\n      if (newStatus === APPLICATION_STATUS.APPROVED) {\n        const updatedApp = appsWithApproval.find(app => app.id === applicationId);\n        \n        if (updatedApp) {\n          // Determine if both advisor and company have approved\n          const bothApproved = \n            (isAdvisor() && updatedApp.approvalStatus?.approvedByCompany) || \n            (isCompanyAdmin() && updatedApp.approvalStatus?.approvedByAdvisor);\n          \n          if (bothApproved) {\n            // Auto move to POR_DISPERSAR\n            setTimeout(() => {\n              setSuccessMessage(`¡Ambos han aprobado! Moviendo \"${updatedApp.client_name}\" a \"Por Dispersar\" automáticamente`);\n              \n              // Call the parent component to update the status to POR_DISPERSAR\n              onStatusChange(\n                { ...updatedApp, status: APPLICATION_STATUS.POR_DISPERSAR },\n                APPLICATION_STATUS.POR_DISPERSAR\n              ).then(() => {\n                // Update local state\n                setAppsWithApproval(prev => \n                  prev.map(app => \n                    app.id === applicationId\n                    ? { \n                        ...app, \n                        status: APPLICATION_STATUS.POR_DISPERSAR,\n                        advisorStatus: APPLICATION_STATUS.POR_DISPERSAR,\n                        companyStatus: APPLICATION_STATUS.POR_DISPERSAR,\n                        globalStatus: APPLICATION_STATUS.POR_DISPERSAR\n                      } \n                    : app\n                  )\n                );\n              }).catch(err => {\n                console.error('Error auto-moving to POR_DISPERSAR:', err);\n                setErrorMessage('Error al mover automáticamente a \"Por Dispersar\"');\n              });\n            }, 1000);\n          }\n        }\n      }\n      \n      // Show success message\n      setSuccessMessage(`Se ha movido \"${application.client_name}\" a \"${STATUS_LABELS[newStatus as keyof typeof STATUS_LABELS]}\"`);\n      setTimeout(() => setSuccessMessage(null), 3000);\n    } catch (error) {\n      console.error('Error updating status:', error);\n      \n      // Reset the card to its original state\n      setAppsWithApproval(prev => \n        prev.map(app => \n          app.id === applicationId\n            ? { ...app, isMoving: false } \n            : app\n        )\n      );\n      \n      // Show error message\n      if (error instanceof Error) {\n        setErrorMessage(`Error: ${error.message}`);\n      } else {\n        setErrorMessage('Error desconocido al actualizar el estado');\n      }\n      setTimeout(() => setErrorMessage(null), 5000);\n    } finally {\n      // Clear processing state\n      setProcessingAppId(null);\n    }\n  };\n  \n  // Function to get the appropriate card color based on its approval status\n  const getCardColor = (app: ApplicationWithApproval) => {\n    // Here you can implement different styling based on approval status\n    if (app.isMoving) return 'card-moving';\n    \n    switch (app.status) {\n      case APPLICATION_STATUS.NEW:\n        return 'bg-white border-l-yellow-400';\n      case APPLICATION_STATUS.IN_REVIEW:\n        return 'bg-white border-l-blue-400';\n      case APPLICATION_STATUS.APPROVED:\n        return 'bg-white border-l-green-400';\n      case APPLICATION_STATUS.REJECTED:\n        return 'bg-white border-l-red-400';\n      case APPLICATION_STATUS.POR_DISPERSAR:\n        return 'bg-white border-l-purple-400';\n      case APPLICATION_STATUS.COMPLETED:\n        return 'bg-white border-l-slate-400';\n      default:\n        return 'bg-white';\n    }\n  };\n  \n  // Function to determine if a card can be dragged\n  const canDragCard = (app: ApplicationWithApproval) => {\n    // Implement your business rules for what cards can be dragged\n    // For example, you might not want completed applications to be moved\n    \n    // Simple example: don't allow dragging of cards that are already moving\n    if (app.isMoving) return false;\n    \n    // Don't allow dragging while any card is processing\n    if (processingAppId) return false;\n    \n    return true;\n  };\n  \n  // Function to get tooltip text for draggable status\n  const getDragTooltip = (app: ApplicationWithApproval) => {\n    if (processingAppId) return 'Procesando otra aplicación, espere un momento';\n    if (app.isMoving) return 'Actualizando estado...';\n    if (!canDragCard(app)) return 'Esta aplicación no puede ser movida';\n    return 'Arrastre para cambiar el estado';\n  };\n  \n  // Function to get CSS classes for draggable status\n  const getDraggableClasses = (app: ApplicationWithApproval) => {\n    if (!canDragCard(app)) return 'kanban-card-locked';\n    return 'kanban-card-draggable';\n  };\n  \n  // Función auxiliar para renderizar los indicadores de aprobación\n  const renderApprovalIndicators = (app: ApplicationWithApproval) => {\n    // Show both indicators for all roles\n    return (\n      <div className=\"flex space-x-1 mt-1\">\n        <span className={`badge badge-xs ${app.approvalStatus?.approvedByAdvisor ? 'badge-success' : 'badge-warning'}`} \n              title={`Asesor: ${app.approvalStatus?.approvedByAdvisor ? 'Aprobado' : 'Pendiente'}`}>A</span>\n        <span className={`badge badge-xs ${app.approvalStatus?.approvedByCompany ? 'badge-success' : 'badge-warning'}`}\n              title={`Empresa: ${app.approvalStatus?.approvedByCompany ? 'Aprobado' : 'Pendiente'}`}>E</span>\n      </div>\n    );\n  };\n  \n  const getApplicationTag = (type: string) => {\n    switch (type) {\n      case 'selected_plans':\n    return (\n          <span className=\"application-tag bg-blue-100 text-blue-800\">\n            selected_plans\n      </span>\n    );\n      case 'cash_requests':\n        return (\n          <span className=\"application-tag bg-green-100 text-green-800\">\n            cash_requests\n          </span>\n        );\n      default:\n        return (\n          <span className=\"application-tag bg-purple-100 text-purple-800\">\n            {type}\n          </span>\n        );\n    }\n  };\n  \n  // CSS for the Kanban board\n  const customStyles = `\n    .custom-scrollbar::-webkit-scrollbar {\n      width: 8px;\n      height: 8px;\n    }\n    \n    .custom-scrollbar::-webkit-scrollbar-track {\n      background: #f1f1f1;\n      border-radius: 10px;\n    }\n    \n    .custom-scrollbar::-webkit-scrollbar-thumb {\n      background: #888;\n      border-radius: 10px;\n    }\n    \n    .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n      background: #555;\n    }\n    \n    .kanban-card {\n      transition: transform 0.2s ease-in-out, opacity 0.2s ease-in-out, box-shadow 0.3s ease-in-out, border-color 0.3s ease;\n      touch-action: none;\n      user-select: none;\n      will-change: transform, opacity;\n    }\n    \n    .kanban-card-draggable {\n      cursor: grab !important;\n      position: relative;\n    }\n    \n    .kanban-card-draggable:hover {\n      transform: translateY(-4px);\n      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.15);\n      border-color: #a855f7;\n      z-index: 10;\n    }\n    \n    .kanban-card-draggable:active {\n      cursor: grabbing !important;\n    }\n    \n    .kanban-card-locked {\n      position: relative;\n      cursor: not-allowed !important;\n      opacity: 0.8;\n    }\n    \n    .card-moving {\n      opacity: 0.7;\n      background-color: #f9fafb;\n    }\n    \n    .drag-over {\n      background-color: #f3f4f6;\n    }\n    \n    @keyframes processingPulse {\n      0% { box-shadow: 0 0 0 0 rgba(168, 85, 247, 0.4); }\n      70% { box-shadow: 0 0 0 10px rgba(168, 85, 247, 0); }\n      100% { box-shadow: 0 0 0 0 rgba(168, 85, 247, 0); }\n    }\n    \n    .processing {\n      animation: processingPulse 1.5s infinite;\n    }\n\n    .application-tag {\n      display: inline-block;\n      font-size: 0.7rem;\n      padding: 0.15rem 0.4rem;\n      border-radius: 0.25rem;\n      font-weight: 500;\n    }\n\n    .approval-indicators {\n      display: flex;\n      margin-top: 0.5rem;\n      margin-bottom: 0.5rem;\n      gap: 0.5rem;\n    }\n    \n    .approval-indicator {\n      display: flex;\n      align-items: center;\n      gap: 0.25rem;\n    }\n    \n    .approval-indicator-dot {\n      width: 14px;\n      height: 14px;\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border: 1px solid #e2e8f0;\n      transition: all 0.2s ease;\n    }\n    \n    .approval-indicator-dot.approved {\n      background-color: #22c55e;\n      border-color: #16a34a;\n      box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.2);\n    }\n    \n    .approval-indicator-dot.pending {\n      background-color: #d1d5db;\n      border-color: #9ca3af;\n    }\n    \n    .approval-indicator-label {\n      font-size: 0.75rem;\n      font-weight: 500;\n    }\n    \n    .approval-indicator-label.approved {\n      color: #16a34a;\n    }\n    \n    .approval-indicator-label.pending {\n      color: #6b7280;\n    }\n\n    .tag-product {\n      background-color: #e0f2fe;\n      color: #0369a1;\n    }\n\n    .tag-cash {\n      background-color: #dcfce7;\n      color: #15803d;\n    }\n\n    .tag-selected {\n      background-color: #f3e8ff;\n      color: #7e22ce;\n    }\n\n    .column-header {\n      font-weight: 600;\n      padding: 0.75rem;\n      border-radius: 0.5rem;\n      margin-bottom: 1rem;\n    }\n\n    .column-count {\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      width: 1.5rem;\n      height: 1.5rem;\n      border-radius: 9999px;\n      font-size: 0.75rem;\n      font-weight: 600;\n      background-color: white;\n      color: #4b5563;\n      margin-left: 0.5rem;\n    }\n  `;\n  \n    return (\n    <div className=\"kanban-board-container bg-base-100 p-2\">\n      <style dangerouslySetInnerHTML={{ __html: customStyles }} />\n      \n      {/* Messages display area */}\n      {errorMessage && (\n        <div className=\"alert alert-error shadow-lg mb-4 mx-2\">\n          <div>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"stroke-current flex-shrink-0 h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\n            <span>{errorMessage}</span>\n          </div>\n          <div className=\"flex-none\">\n            <button onClick={() => setErrorMessage(null)} className=\"btn btn-sm btn-ghost\">Cerrar</button>\n          </div>\n        </div>\n      )}\n      \n      {warnMessage && (\n        <div className=\"alert alert-warning shadow-lg mb-4 mx-2\">\n          <div>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"stroke-current flex-shrink-0 h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" /></svg>\n            <span>{warnMessage}</span>\n          </div>\n          <div className=\"flex-none\">\n            <button onClick={() => setWarnMessage(null)} className=\"btn btn-sm btn-ghost\">Cerrar</button>\n          </div>\n        </div>\n      )}\n      \n      {successMessage && (\n        <div className=\"alert alert-success shadow-lg mb-4 mx-2\">\n          <div>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"stroke-current flex-shrink-0 h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\n            <span>{successMessage}</span>\n          </div>\n          <div className=\"flex-none\">\n            <button onClick={() => setSuccessMessage(null)} className=\"btn btn-sm btn-ghost\">Cerrar</button>\n          </div>\n        </div>\n      )}\n      \n      {/* Loading indicator */}\n      {isLoading ? (\n        <div className=\"flex items-center justify-center h-24\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n          <span className=\"ml-2 text-gray-600\">Cargando aplicaciones...</span>\n              </div>\n      ) : error ? (\n        <div className=\"alert alert-error shadow-lg mb-4\">\n          <div>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"stroke-current flex-shrink-0 h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\n            <span>Error: {error}</span>\n            </div>\n        </div>\n      ) : (\n        // The actual Kanban board grid\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4\">\n          {/* New Applications */}\n          <div className=\"kanban-column bg-base-200 rounded-lg p-4 h-full\">\n            <div className=\"column-header mb-4\">\n              <h3 className=\"text-lg font-bold flex items-center\">\n                <span className=\"w-3 h-3 rounded-full bg-yellow-400 mr-2\"></span>\n                {STATUS_LABELS[APPLICATION_STATUS.NEW]} ({getApplicationsByStatus(APPLICATION_STATUS.NEW).length})\n              </h3>\n            </div>\n            <div \n              className=\"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\"\n              onDragOver={handleDragOver}\n              onDragLeave={handleDragLeave}\n              onDrop={(e) => handleDrop(e, APPLICATION_STATUS.NEW)}\n            >\n              {getApplicationsByStatus(APPLICATION_STATUS.NEW).map((app) => (\n                <div \n                  key={app.id}\n                  className={`kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`}\n                  draggable={canDragCard(app)}\n                  onDragStart={canDragCard(app) ? (e) => handleDragStart(e, app) : undefined}\n                  onDragEnd={handleDragEnd}\n                  title={getDragTooltip(app)}\n                >\n                  <div className=\"flex justify-between items-start mb-2\">\n                    <h4 className=\"font-semibold text-gray-800\">{app.client_name || \"Cliente sin nombre\"}</h4>\n                    {getApplicationTag(app.application_type)}\n          </div>\n                  <div className=\"text-sm text-gray-600 mb-2\">\n                    {app.company_name && <p>{app.company_name}</p>}\n                  </div>\n                  <div className=\"text-sm font-medium text-gray-900 mb-1\">\n                    {formatCurrency(app.amount)}\n                  </div>\n                  <div className=\"flex flex-col mt-2 pt-2 border-t border-gray-100\">\n                    {renderApprovalIndicators(app)}\n                    <div className=\"flex justify-between items-center mt-2\">\n                      <span className=\"text-xs text-gray-500\">ID: {app.id.substring(0, 5)}...</span>\n                      <Link \n                        to={`/applications/${app.id}`} \n                        className=\"btn btn-xs btn-primary\"\n                      >\n                        VER DETALLE\n                      </Link>\n                    </div>\n                  </div>\n                </div>\n              ))}\n              {getApplicationsByStatus(APPLICATION_STATUS.NEW).length === 0 && (\n                <div className=\"text-center py-4 text-gray-500 italic\">\n                  No hay solicitudes\n                </div>\n              )}\n            </div>\n                </div>\n                \n          {/* In Review Applications */}\n          <div className=\"kanban-column bg-base-200 rounded-lg p-4 h-full\">\n            <div className=\"column-header mb-4\">\n              <h3 className=\"text-lg font-bold flex items-center\">\n                <span className=\"w-3 h-3 rounded-full bg-blue-400 mr-2\"></span>\n                {STATUS_LABELS[APPLICATION_STATUS.IN_REVIEW]} ({getApplicationsByStatus(APPLICATION_STATUS.IN_REVIEW).length})\n              </h3>\n            </div>\n            <div \n              className=\"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\"\n              onDragOver={handleDragOver}\n              onDragLeave={handleDragLeave}\n              onDrop={(e) => handleDrop(e, APPLICATION_STATUS.IN_REVIEW)}\n            >\n              {getApplicationsByStatus(APPLICATION_STATUS.IN_REVIEW).map((app) => (\n                <div \n                  key={app.id}\n                  className={`kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`}\n                  draggable={canDragCard(app)}\n                  onDragStart={canDragCard(app) ? (e) => handleDragStart(e, app) : undefined}\n                  onDragEnd={handleDragEnd}\n                  title={getDragTooltip(app)}\n                >\n                  <div className=\"flex justify-between items-start mb-2\">\n                    <h4 className=\"font-semibold text-gray-800\">{app.client_name || \"Cliente sin nombre\"}</h4>\n                    {getApplicationTag(app.application_type)}\n                  </div>\n                  <div className=\"text-sm text-gray-600 mb-2\">\n                    {app.company_name && <p>{app.company_name}</p>}\n                  </div>\n                  <div className=\"text-sm font-medium text-gray-900 mb-1\">\n                    {formatCurrency(app.amount)}\n                  </div>\n                  <div className=\"flex flex-col mt-2 pt-2 border-t border-gray-100\">\n                    {renderApprovalIndicators(app)}\n                    <div className=\"flex justify-between items-center mt-2\">\n                      <span className=\"text-xs text-gray-500\">ID: {app.id.substring(0, 5)}...</span>\n                      <Link \n                        to={`/applications/${app.id}`} \n                        className=\"btn btn-xs btn-primary\"\n                      >\n                        VER DETALLE\n                      </Link>\n                    </div>\n                  </div>\n                </div>\n              ))}\n              {getApplicationsByStatus(APPLICATION_STATUS.IN_REVIEW).length === 0 && (\n                <div className=\"text-center py-4 text-gray-500 italic\">\n                  No hay solicitudes\n                </div>\n              )}\n                </div>\n                </div>\n                \n          {/* Approved Applications */}\n          <div className=\"kanban-column bg-base-200 rounded-lg p-4 h-full\">\n            <div className=\"column-header mb-4\">\n              <h3 className=\"text-lg font-bold flex items-center\">\n                <span className=\"w-3 h-3 rounded-full bg-green-400 mr-2\"></span>\n                {STATUS_LABELS[APPLICATION_STATUS.APPROVED]} ({getApplicationsByStatus(APPLICATION_STATUS.APPROVED).length})\n              </h3>\n                </div>\n            <div \n              className=\"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\"\n              onDragOver={handleDragOver}\n              onDragLeave={handleDragLeave}\n              onDrop={(e) => handleDrop(e, APPLICATION_STATUS.APPROVED)}\n            >\n              {getApplicationsByStatus(APPLICATION_STATUS.APPROVED).map((app) => (\n                <div \n                  key={app.id}\n                  className={`kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`}\n                  draggable={canDragCard(app)}\n                  onDragStart={canDragCard(app) ? (e) => handleDragStart(e, app) : undefined}\n                  onDragEnd={handleDragEnd}\n                  title={getDragTooltip(app)}\n                >\n                  <div className=\"flex justify-between items-start mb-2\">\n                    <h4 className=\"font-semibold text-gray-800\">{app.client_name || \"Cliente sin nombre\"}</h4>\n                    {getApplicationTag(app.application_type)}\n                </div>\n                  <div className=\"text-sm text-gray-600 mb-2\">\n                    {app.company_name && <p>{app.company_name}</p>}\n              </div>\n                  <div className=\"text-sm font-medium text-gray-900 mb-1\">\n                    {formatCurrency(app.amount)}\n                  </div>\n                  <div className=\"flex flex-col mt-2 pt-2 border-t border-gray-100\">\n                    {renderApprovalIndicators(app)}\n                    <div className=\"flex justify-between items-center mt-2\">\n                      <span className=\"text-xs text-gray-500\">ID: {app.id.substring(0, 5)}...</span>\n                      <Link \n                        to={`/applications/${app.id}`} \n                        className=\"btn btn-xs btn-primary\"\n                      >\n                        VER DETALLE\n                      </Link>\n              </div>\n                  </div>\n                </div>\n              ))}\n              {getApplicationsByStatus(APPLICATION_STATUS.APPROVED).length === 0 && (\n                <div className=\"text-center py-4 text-gray-500 italic\">\n                  No hay solicitudes\n            </div>\n          )}\n        </div>\n      </div>\n      \n          {/* Ready for Disbursement (Por Dispersar) */}\n          <div className=\"kanban-column bg-base-200 rounded-lg p-4 h-full\">\n            <div className=\"column-header mb-4\">\n              <h3 className=\"text-lg font-bold flex items-center\">\n                <span className=\"w-3 h-3 rounded-full bg-purple-400 mr-2\"></span>\n                {STATUS_LABELS[APPLICATION_STATUS.POR_DISPERSAR]} ({getApplicationsByStatus(APPLICATION_STATUS.POR_DISPERSAR).length})\n              </h3>\n            </div>\n            <div \n              className=\"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\"\n              onDragOver={handleDragOver}\n              onDragLeave={handleDragLeave}\n              onDrop={(e) => handleDrop(e, APPLICATION_STATUS.POR_DISPERSAR)}\n            >\n              {getApplicationsByStatus(APPLICATION_STATUS.POR_DISPERSAR).map((app) => (\n                <div \n                  key={app.id}\n                  className={`kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`}\n                  draggable={canDragCard(app)}\n                  onDragStart={canDragCard(app) ? (e) => handleDragStart(e, app) : undefined}\n                  onDragEnd={handleDragEnd}\n                  title={getDragTooltip(app)}\n                >\n                  <div className=\"flex justify-between items-start mb-2\">\n                    <h4 className=\"font-semibold text-gray-800\">{app.client_name || \"Cliente sin nombre\"}</h4>\n                    {getApplicationTag(app.application_type)}\n              </div>\n                  <div className=\"text-sm text-gray-600 mb-2\">\n                    {app.company_name && <p>{app.company_name}</p>}\n                    </div>\n                  <div className=\"text-sm font-medium text-gray-900 mb-1\">\n                    {formatCurrency(app.amount)}\n                  </div>\n                  <div className=\"flex flex-col mt-2 pt-2 border-t border-gray-100\">\n                    {renderApprovalIndicators(app)}\n                    <div className=\"flex justify-between items-center mt-2\">\n                      <span className=\"text-xs text-gray-500\">ID: {app.id.substring(0, 5)}...</span>\n                      <Link \n                        to={`/applications/${app.id}`} \n                        className=\"btn btn-xs btn-primary\"\n                      >\n                        VER DETALLE\n                      </Link>\n                    </div>\n                  </div>\n                </div>\n              ))}\n              {getApplicationsByStatus(APPLICATION_STATUS.POR_DISPERSAR).length === 0 && (\n                <div className=\"text-center py-4 text-gray-500 italic\">\n                  No hay solicitudes\n                </div>\n              )}\n            </div>\n          </div>\n          \n          {/* Completed Applications */}\n          <div className=\"kanban-column bg-base-200 rounded-lg p-4 h-full\">\n            <div className=\"column-header mb-4\">\n              <h3 className=\"text-lg font-bold flex items-center\">\n                <span className=\"w-3 h-3 rounded-full bg-slate-400 mr-2\"></span>\n                {STATUS_LABELS[APPLICATION_STATUS.COMPLETED]} ({getApplicationsByStatus(APPLICATION_STATUS.COMPLETED).length})\n              </h3>\n            </div>\n            <div \n              className=\"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\"\n              onDragOver={handleDragOver}\n              onDragLeave={handleDragLeave}\n              onDrop={(e) => handleDrop(e, APPLICATION_STATUS.COMPLETED)}\n            >\n              {getApplicationsByStatus(APPLICATION_STATUS.COMPLETED).map((app) => (\n                      <div\n                        key={app.id}\n                  className={`kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`}\n                  draggable={canDragCard(app)}\n                  onDragStart={canDragCard(app) ? (e) => handleDragStart(e, app) : undefined}\n                  onDragEnd={handleDragEnd}\n                  title={getDragTooltip(app)}\n                >\n                          <div className=\"flex justify-between items-start mb-2\">\n                    <h4 className=\"font-semibold text-gray-800\">{app.client_name || \"Cliente sin nombre\"}</h4>\n                    {getApplicationTag(app.application_type)}\n                            </div>\n                  <div className=\"text-sm text-gray-600 mb-2\">\n                    {app.company_name && <p>{app.company_name}</p>}\n                          </div>\n                  <div className=\"text-sm font-medium text-gray-900 mb-1\">\n                    {formatCurrency(app.amount)}\n                            </div>\n                  <div className=\"flex flex-col mt-2 pt-2 border-t border-gray-100\">\n                    {renderApprovalIndicators(app)}\n                    <div className=\"flex justify-between items-center mt-2\">\n                      <span className=\"text-xs text-gray-500\">ID: {app.id.substring(0, 5)}...</span>\n                      <Link \n                        to={`/applications/${app.id}`} \n                        className=\"btn btn-xs btn-primary\"\n                      >\n                        VER DETALLE\n                      </Link>\n                            </div>\n                  </div>\n                </div>\n              ))}\n              {getApplicationsByStatus(APPLICATION_STATUS.COMPLETED).length === 0 && (\n                <div className=\"text-center py-4 text-gray-500 italic\">\n                  No hay solicitudes\n                </div>\n              )}\n            </div>\n                            </div>\n                            \n          {/* Rejected Applications */}\n          <div className=\"kanban-column bg-base-200 rounded-lg p-4 h-full\">\n            <div className=\"column-header mb-4\">\n              <h3 className=\"text-lg font-bold flex items-center\">\n                <span className=\"w-3 h-3 rounded-full bg-red-400 mr-2\"></span>\n                {STATUS_LABELS[APPLICATION_STATUS.REJECTED]} ({getApplicationsByStatus(APPLICATION_STATUS.REJECTED).length})\n              </h3>\n            </div>\n            <div \n              className=\"column-content h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar p-1 rounded-md\"\n              onDragOver={handleDragOver}\n              onDragLeave={handleDragLeave}\n              onDrop={(e) => handleDrop(e, APPLICATION_STATUS.REJECTED)}\n            >\n              {getApplicationsByStatus(APPLICATION_STATUS.REJECTED).map((app) => (\n                <div \n                  key={app.id}\n                  className={`kanban-card ${getCardColor(app)} p-4 rounded-md shadow-md mb-3 border-l-4 ${getDraggableClasses(app)} ${processingAppId === app.id ? 'processing' : ''}`}\n                  draggable={canDragCard(app)}\n                  onDragStart={canDragCard(app) ? (e) => handleDragStart(e, app) : undefined}\n                  onDragEnd={handleDragEnd}\n                  title={getDragTooltip(app)}\n                >\n                  <div className=\"flex justify-between items-start mb-2\">\n                    <h4 className=\"font-semibold text-gray-800\">{app.client_name || \"Cliente sin nombre\"}</h4>\n                    {getApplicationTag(app.application_type)}\n                  </div>\n                  <div className=\"text-sm text-gray-600 mb-2\">\n                    {app.company_name && <p>{app.company_name}</p>}\n                  </div>\n                  <div className=\"text-sm font-medium text-gray-900 mb-1\">\n                    {formatCurrency(app.amount)}\n                  </div>\n                  <div className=\"flex flex-col mt-2 pt-2 border-t border-gray-100\">\n                    {renderApprovalIndicators(app)}\n                    <div className=\"flex justify-between items-center mt-2\">\n                      <span className=\"text-xs text-gray-500\">ID: {app.id.substring(0, 5)}...</span>\n                      <Link \n                        to={`/applications/${app.id}`} \n                        className=\"btn btn-xs btn-primary\"\n                      >\n                        VER DETALLE\n                              </Link>\n                            </div>\n                          </div>\n                        </div>\n              ))}\n              {getApplicationsByStatus(APPLICATION_STATUS.REJECTED).length === 0 && (\n                <div className=\"text-center py-4 text-gray-500 italic\">\n                  No hay solicitudes\n                      </div>\n                )}\n              </div>\n            </div>\n      </div>\n      )}\n    </div>\n  );\n};\n\nexport default KanbanBoard; "],"mappings":"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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;EAEC,oBACAhK,OAAA;IAAKuJ,SAAS,EAAC,wCAAwC;IAAAC,QAAA,gBACrDxJ,OAAA;MAAOiK,uBAAuB,EAAE;QAAEC,MAAM,EAAEF;MAAa;IAAE;MAAAN,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EAG3DnJ,YAAY,iBACXV,OAAA;MAAKuJ,SAAS,EAAC,uCAAuC;MAAAC,QAAA,gBACpDxJ,OAAA;QAAAwJ,QAAA,gBACExJ,OAAA;UAAKmK,KAAK,EAAC,4BAA4B;UAACZ,SAAS,EAAC,sCAAsC;UAACa,IAAI,EAAC,MAAM;UAACC,OAAO,EAAC,WAAW;UAAAb,QAAA,eAACxJ,OAAA;YAAMsK,aAAa,EAAC,OAAO;YAACC,cAAc,EAAC,OAAO;YAACC,WAAW,EAAC,GAAG;YAACC,CAAC,EAAC;UA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}